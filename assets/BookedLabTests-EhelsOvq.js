import{r as o,u as M,w as H,N as K,k as R,j as s,V,h as q,O as Q,Q as z,T as G,A as J}from"./index-BsC4CiLt.js";import{R as U}from"./ResponsiveTable-CwHPkwiT.js";/* empty css                */import{B as N}from"./apiEndpoints-DA67aB0N.js";import"./Status-BCEaVBkQ.js";import"./index-NiuxfhvR.js";import"./IsError-DysmRO1f.js";import"./NoData-CEn6Zv-n.js";import"./index-DInAQVjv.js";import"./index-CvgDGYcH.js";import"./index-QFobRxCo.js";import"./index-C4oxCGHh.js";function ce(){const[x,j]=o.useState([]),[r,v]=o.useState(1),[y,T]=o.useState(1),[i,g]=o.useState(""),[c,B]=o.useState(null),[d,S]=o.useState(null),m=10,h=M(),l=H(),{docDeleted:p}=K(t=>t==null?void 0:t.deleteModal),k=["fetch-booked-lab-tests",{currentPage:r,limit:m,keyword:i,docDeleted:p,startDate:c,endDate:d}],{isLoading:w,data:u,isError:f,error:b}=R({queryKey:k,queryFn:async()=>{let t=`${N}?page=${r}&pageSize=${m}`;return c&&(t+=`&from=${c}`),d&&(t+=`&to=${d}`),i&&(t+=`&keyword=${i}`),J.get(t)}});o.useEffect(()=>{if(u){const{data:{docs:t,pages:a}}=u.data,n=t.map(e=>{var D,A;const L=e.longAutoIncrementId||"N/A",$=e.offeredLabTests&&e.offeredLabTests.length>0?e.offeredLabTests.map(F=>F.title).join(", "):"N/A",P=((D=e.labHeadOffice)==null?void 0:D.title)||"N/A",_=e.createdAt?new Date(e.createdAt).toLocaleDateString("en-GB"):"N/A",C=`$${(((A=e.order)==null?void 0:A.amount)||0).toFixed(2)}`,O=e.sampleCollectionMethod||"N/A",I=e.status||"N/A";return{_id:e._id,id:L,test:$,lab:P,collBy:_,fee:C,visit:s.jsx("span",{className:"text-[#4C63BD]",children:O}),status:I}});j(n),T(a)}p&&g(""),f&&V.error(q(b))},[u,f,b,p]);const E=(t,a,n)=>{if(t.stopPropagation(),n==="view"&&h(`/booked-lab-tests/details/${a==null?void 0:a._id}`),n==="delete"){const e=N;l(Q(!0)),l(z(e)),l(G(a==null?void 0:a._id))}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[400px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Booked Lab Tests"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{h("/booked-lab-tests/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(U,{datePicker:!0,setStartDate:B,setEndDate:S,setKeyword:g,isLoading:w,isError:f,fetchedData:x,data:x,mainHeading:"Booked Lab Tests",searchBar:!0,headings:["Order #","Test","Lab","Coll. By","Fee","Visit","Status","Action"],cells:["id","test","lab","collBy","fee","visit"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:E,setCurrentPage:v,pages:y,currentPage:r})})]})})}export{ce as default};
