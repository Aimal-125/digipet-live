import{r as t,u as v,c as y,a as o,p as C,j as s,F as S,b as E,q as m,e as i,f as d,E as c,A as F,V as p,t as q,h as A,Y as V,y as $}from"./index-BpncqqTg.js";V($);function U(){const[l,h]=t.useState(!1),[r,f]=t.useState(!1),[n,j]=t.useState(!1),x=v(),P={currentPassword:"",newPassword:"",confirmPassword:""},N=y().shape({currentPassword:o().required("Current Password is required"),newPassword:o().required("New Password is required"),confirmPassword:o().oneOf([C("newPassword"),null],"Confirm password must match new password").required("Confirm password is required")}),b=async(a,{setSubmitting:u,resetForm:g})=>{var w;u(!0);try{const{data:e}=await F.patch("/user/update-my-password",a);e!=null&&e.success&&(p.success((e==null?void 0:e.message)||((w=e==null?void 0:e.data)==null?void 0:w.message)),await q(),x(0),x("/login"))}catch(e){p.error(A(e))}finally{u(!1),g()}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsx("h1",{className:"main-heading",children:"Update Password"}),s.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:s.jsx(S,{initialValues:P,validationSchema:N,onSubmit:b,enableReinitialize:!0,children:a=>s.jsxs(E,{className:"flex flex-col gap-3",children:[s.jsxs(m,{children:[s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"currentPassword",className:"updatePassword-label",children:"Current Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:l?"text":"password",className:"w-full px-4 py-2",name:"currentPassword",onChange:a.handleChange,value:a.values.currentPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":l?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{h(!l)},children:l?s.jsx(i,{}):s.jsx(d,{})})})]})]}),s.jsx(c,{name:"currentPassword",component:"div",className:"text-sm text-red-500"})]}),s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"newPassword",className:"updatePassword-label",children:"New Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:r?"text":"password",className:"w-full px-4 py-2",name:"newPassword",onChange:a.handleChange,value:a.values.newPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":r?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{f(!r)},children:r?s.jsx(i,{}):s.jsx(d,{})})})]})]}),s.jsx(c,{name:"newPassword",component:"div",className:"text-sm text-red-500"})]})]}),s.jsxs(m,{children:[s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"updatePassword-label",children:"Confirm Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:n?"text":"password",className:"w-full px-4 py-2",name:"confirmPassword",onChange:a.handleChange,value:a.values.confirmPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":n?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{j(!n)},children:n?s.jsx(i,{}):s.jsx(d,{})})})]})]}),s.jsx(c,{name:"confirmPassword",component:"div",className:"text-sm text-red-500"})]}),s.jsx("div",{className:"w-full"})]}),s.jsx("div",{className:"mt-2 max-[601px]:mt-0",children:s.jsx("button",{type:"submit",className:`${a.isSubmitting?"cursor-not-allowed":"cursor-pointer"} bg-[#624DE3] text-white font-bold px-6 py-2 rounded-[20px]`,disabled:a.isSubmitting,children:"Save"})})]})})})]})})}export{U as default};
