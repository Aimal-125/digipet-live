import{G as D,u as E,j as e,D as z,r as a,i as B,E as M,V as H,b as q,k as G,H as K,l as O,A as V}from"./index-BGHtLGIu.js";import{R as W}from"./ResponsiveTable-Cy1IRt33.js";import{u as Q}from"./useQuery-BzOiPmuN.js";/* empty css                  */import{N as T}from"./NoData-4Utk0su6.js";import"./Status-C8fxc1vf.js";import"./index-CPVEpVqX.js";import"./index-BtNt5WtL.js";function J(t){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function X(t){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"},child:[]},{tag:"polyline",attr:{points:"23 20 23 14 17 14"},child:[]},{tag:"path",attr:{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},child:[]}]})(t)}function Y({message:t="Something went wrong. Please try again."}){const l=E();return e.jsxs("div",{className:"error-container",children:[e.jsxs("h2",{className:"error-heading",children:[e.jsx("span",{children:e.jsx(J,{style:{fontSize:"24px"},className:"error-icon"})}),"Error Occurred"]}),e.jsx("p",{className:"error-message",children:t}),e.jsxs("button",{onClick:()=>l(0),className:"retry-button",children:[e.jsx(X,{style:{fontSize:"18px"},className:"icon"}),"Retry"]})]})}const Z=()=>e.jsxs("div",{className:"loading-container",children:[e.jsx(z,{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]});function ce(){const[t,l]=a.useState([]),[d,S]=a.useState(1),[w,L]=a.useState(1),[u,m]=a.useState(""),x=10,f=E(),p=B(),[C,I]=a.useState(0),{docDeleted:g}=M(r=>r==null?void 0:r.deleteModal),b=["fetch-admin-users",{currentPage:d,limit:x,keyword:u,docDeleted:g}],{isLoading:R,data:o,isError:F,error:h}=Q({queryKey:b,queryFn:()=>V.get(`/admin/admin-user/?page=${d}&pageSize=${x}&keyword=${u}`)});a.useEffect(()=>{if(o){const{data:{data:{docs:r}}}=o,{data:{data:{pages:s}}}=o;l(r),L(s),I(r==null?void 0:r.length)}g&&m(""),h&&H.error(q(h))},[o,h,g,u]);const P=(r,s,i)=>{if(r.stopPropagation(),i==="edit"&&f(`/admin-users/edit/${s==null?void 0:s._id}`),i==="delete"){const c="/admin/admin-user";p(G(!0)),p(K(c)),p(O(s==null?void 0:s._id))}console.log(s,`${i} btn clicked`)},U=Array.from({length:C},(r,s)=>{var c,j,y,N,A,k;const i=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"";return{_id:(c=t[s])==null?void 0:c._id,id:((j=t[s])==null?void 0:j.longAutoIncrementId)||((y=t[s])==null?void 0:y.autoIncrementId)||"N/A",username:((N=t[s])==null?void 0:N.username)||"N/A",email:((A=t[s])==null?void 0:A.email)||"N/A",role:(()=>{var v;const n=(v=t[s])==null?void 0:v.roles;if(Array.isArray(n)&&n.length>0){const _=n.map($=>i($));return e.jsx("span",{children:_.join(", ")})}return"N/A"})(),status:((k=t[s])==null?void 0:k.status)||"N/A"}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Admin Users"}),e.jsx("div",{children:e.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{f("/admin-users/add")},children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Add New"})]})})]}),R?e.jsx(Z,{}):F?e.jsx(Y,{}):(t==null?void 0:t.length)===0?e.jsx(T,{setKeyword:m}):e.jsx("div",{className:"",children:e.jsx(W,{data:U,mainHeading:"Admin Users",searchBar:!0,headings:["ID #","Username","Email","Role","Status","Action"],cells:["id","username","email","role"],status:!0,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:P,setCurrentPage:S,pages:w,currentPage:d,setKeyword:m})})]})})}export{ce as default};
