import{r as o,u as I,z as P,I as O,k as F,j as s,V as K,h as M,J as H,K as R,N as V,A as q}from"./index-BxhrTQri.js";import{R as z}from"./ResponsiveTable-BOmT_VBO.js";/* empty css                */import{B as A}from"./apiEndpoints-D7ff-bgI.js";import"./Status-BBB0qoK2.js";import"./index-DFUMWaLX.js";import"./NoData-D5nSU70a.js";import"./index-C9TsHVx2.js";function ee(){const[u,N]=o.useState([]),[i,j]=o.useState(1),[v,y]=o.useState(1),[r,f]=o.useState(""),x=10,g=I(),c=P(),{docDeleted:d}=O(t=>t==null?void 0:t.deleteModal),D=["fetch-booked-lab-tests",{currentPage:i,limit:x,keyword:r,docDeleted:d}],{isLoading:B,data:l,isError:p,error:m}=F({queryKey:D,queryFn:async()=>{let t=`${A}?page=${i}&pageSize=${x}`;return r&&(t+=`&keyword=${r}`),q.get(t)}});o.useEffect(()=>{if(l){const{data:{docs:t,pages:a}}=l.data,n=t.map(e=>{var h,b;const k=e.longAutoIncrementId||"N/A",w=e.offeredLabTests&&e.offeredLabTests.length>0?e.offeredLabTests.map(C=>C.title).join(", "):"N/A",E=((h=e.labHeadOffice)==null?void 0:h.title)||"N/A",L=e.createdAt?new Date(e.createdAt).toLocaleDateString("en-GB"):"N/A",S=`$${(((b=e.order)==null?void 0:b.amount)||0).toFixed(2)}`,_=e.sampleCollectionMethod||"N/A",$=e.status||"N/A";return{_id:e._id,id:k,test:w,lab:E,collBy:L,fee:S,visit:s.jsx("span",{className:"text-[#4C63BD]",children:_}),status:$}});N(n),y(a)}d&&f(""),p&&K.error(M(m))},[l,p,m,d]);const T=(t,a,n)=>{if(t.stopPropagation(),n==="view"&&g(`/booked-lab-tests/details/${a==null?void 0:a._id}`),n==="delete"){const e=A;c(H(!0)),c(R(e)),c(V(a==null?void 0:a._id))}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[400px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Booked Lab Tests"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{g("/booked-lab-tests/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(z,{isLoading:B,isError:p,fetchedData:u,data:u,mainHeading:"Booked Lab Tests",searchBar:!1,headings:["Order #","Test","Lab","Coll. By","Fee","Visit","Status","Action"],cells:["id","test","lab","collBy","fee","visit"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:T,setCurrentPage:j,pages:v,currentPage:i,setKeyword:f})})]})})}export{ee as default};
