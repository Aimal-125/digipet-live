import{D as b,r as c,u as S,k as F,V as m,h as p,c as N,a as R,l as v,j as a,F as D,b as U,m as $,S as q,A as g}from"./index-DUYjTDLa.js";import{H as E}from"./HeadingPlusBackBtn-FVXhAHzt.js";import{S as B}from"./SingleImageUpload-7U8nLR2v.js";import{I as z}from"./Input-8IAiboUU.js";import"./BackButton-HT3sDUP7.js";import"./index-RjsA-lLy.js";import"./no-image-icon-CabPHXKl.js";function T(){const{id:l}=b(),[i,d]=c.useState({}),[o,x]=c.useState(""),f=S(),h=["fetch-speciality",{id:l}],{data:t,error:n}=F({queryKey:h,queryFn:()=>g.get(`/speciality/${l}`)});c.useEffect(()=>{var e,r;t&&d((r=(e=t==null?void 0:t.data)==null?void 0:e.data)==null?void 0:r.doc),n&&m.error(p(n))},[t,n]);const j={imageDataURI:null,title:(i==null?void 0:i.title)||""},y=N().shape({imageDataURI:v().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",e=>e===null||e instanceof File&&["image/jpeg","image/png"].includes(e.type)).required("Image is required"),title:R().required("Title is required")}),I=async(e,{setSubmitting:r})=>{var u;r(!0);try{const{data:s}=await g.patch(`/speciality/${l}`,{...e,imageDataURI:o,status:"Approved"});s!=null&&s.success&&(m.success((s==null?void 0:s.message)||((u=s==null?void 0:s.data)==null?void 0:u.message)),f("/all-specialities"))}catch(s){m.error(p(s))}finally{r(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"",children:a.jsx(E,{label:"Edit Speciality"})}),a.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:a.jsx(D,{initialValues:j,validationSchema:y,onSubmit:I,enableReinitialize:!0,children:e=>a.jsxs(U,{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"",children:a.jsx(B,{formik:e,base64Image:o,setBase64Image:x,name:"imageDataURI",id:"imageDataURI",backendImage:i!=null&&i.image?`${$}/${i==null?void 0:i.image}`:""})}),a.jsx("div",{className:"",children:a.jsx(z,{formik:e,name:"title",id:"title",label:"Title"})}),a.jsx("div",{className:"mt-2",children:a.jsx(q,{formik:e})})]})})})]})})}export{T as default};
