import{H as b,r as c,u as S,k as D,V as o,h as u,c as F,a as N,l as R,j as a,F as v,b as U,m as $,S as q,A as d}from"./index-B_nrAWIt.js";import{H as E}from"./HeadingPlusBackBtn-DKCqj644.js";import{S as B}from"./SingleImageUpload-C1mUX98W.js";import{I as z}from"./Input-CWXe6AEF.js";import"./BackButton-DrsOu0xo.js";import"./index-Bs2yjB6o.js";import"./no-image-icon-CabPHXKl.js";function M(){const{id:l}=b(),[t,p]=c.useState({}),[m,x]=c.useState(""),f=S(),h=["fetch-doctor-category",{id:l}],{data:i,error:n}=D({queryKey:h,queryFn:()=>d.get(`/speciality/${l}`)});c.useEffect(()=>{var e,r;i&&p((r=(e=i==null?void 0:i.data)==null?void 0:e.data)==null?void 0:r.doc),n&&o.error(u(n))},[i,n]);const j={imageDataURI:null,title:(t==null?void 0:t.title)||""},y=F().shape({imageDataURI:R().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",e=>e===null||e instanceof File&&["image/jpeg","image/png"].includes(e.type)).required("Image is required"),title:N().required("Title is required")}),I=async(e,{setSubmitting:r})=>{var g;r(!0);try{const{data:s}=await d.patch(`/speciality/${l}`,{...e,imageDataURI:m,status:"Approved"});s!=null&&s.success&&(o.success((s==null?void 0:s.message)||((g=s==null?void 0:s.data)==null?void 0:g.message)),f("/doctors-categories"))}catch(s){o.error(u(s))}finally{r(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"",children:a.jsx(E,{label:"Edit Doctor Category"})}),a.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:a.jsx(v,{initialValues:j,validationSchema:y,onSubmit:I,enableReinitialize:!0,children:e=>a.jsxs(U,{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"",children:a.jsx(B,{formik:e,base64Image:m,setBase64Image:x,name:"imageDataURI",id:"imageDataURI",backendImage:t!=null&&t.image?`${$}/${t==null?void 0:t.image}`:""})}),a.jsx("div",{className:"",children:a.jsx(z,{formik:e,name:"title",id:"title",label:"Title"})}),a.jsx("div",{className:"mt-2",children:a.jsx(q,{formik:e})})]})})})]})})}export{M as default};
