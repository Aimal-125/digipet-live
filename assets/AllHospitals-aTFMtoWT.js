import{r as o,u as R,w as q,J as B,k as F,V as O,h as V,j as s,K as z,N as J,O as Q,A as T}from"./index-DUYjTDLa.js";import{R as W}from"./ResponsiveTable-Bx0PTskj.js";import{n as G}from"./nameWithImage-DC3XV7ql.js";/* empty css                */import"./Status-BubxHrRz.js";import"./index-DDsQ4hsC.js";import"./IsError-CddUd3sL.js";import"./NoData-CiBxRMDc.js";import"./index-RjsA-lLy.js";import"./index-DpQgK1aN.js";import"./index-ucCudfBO.js";import"./index-qS6WQuq_.js";function le(){var D,v;const[c,w]=o.useState(1),[E,I]=o.useState(1),[r,f]=o.useState(""),x=10,d=R(),p=q(),[$,k]=o.useState(0),{docDeleted:u}=B(t=>t==null?void 0:t.deleteModal),[g,H]=o.useState(null),[h,P]=o.useState(null),_=["fetch-all-hospitals",{currentPage:c,limit:x,keyword:r,docDeleted:u,startDate:g,endDate:h}],{isLoading:b,data:i,isError:L,error:m}=F({queryKey:_,queryFn:async()=>{let t=`/clinic?status=Approved&page=${c}&pageSize=${x}`;return g&&(t+=`&from=${g}`),h&&(t+=`&to=${h}`),r&&(t+=`&keyword=${r}`),T.get(t)}}),[a,C]=o.useState((v=(D=i==null?void 0:i.data)==null?void 0:D.data)==null?void 0:v.docs);o.useEffect(()=>{if(i){const{data:{data:{docs:t}}}=i,{data:{data:{pages:e}}}=i;C(t),I(e),k(t==null?void 0:t.length)}u&&f(""),m&&O.error(V(m))},[i,m,u,r]);const K=(t,e,n)=>{if(t.stopPropagation(),n==="view"&&d(`/all-hospitals/details/${e==null?void 0:e._id}`),n==="edit"&&d(`/all-hospitals/edit/${e==null?void 0:e._id}`),n==="delete"){const l="/clinic";p(z(!0)),p(J(l)),p(Q(e==null?void 0:e._id))}},M=Array.from({length:$},(t,e)=>{var n,l,j,y,A,N,S;return{_id:(n=a[e])==null?void 0:n._id,id:((l=a[e])==null?void 0:l.longAutoIncrementId)||((j=a[e])==null?void 0:j.autoIncrementId)||"N/A",hospitalName:G((y=a[e])==null?void 0:y.image,(A=a[e])==null?void 0:A.title),location:((N=a[e])==null?void 0:N.address)||"N/A",status:(S=a[e])==null?void 0:S.status}});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"All Hospitals"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{d("/all-hospitals/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(W,{datePicker:!0,setStartDate:H,setEndDate:P,isLoading:b,isError:L,fetchedData:a,data:M,mainHeading:"All Hospitals",searchBar:!0,headings:["ID #","Hospital Name","Location","Status","Action"],cells:["id","hospitalName","location"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:K,currentPage:c,setCurrentPage:w,setKeyword:f,pages:E})})]})})}export{le as default};
