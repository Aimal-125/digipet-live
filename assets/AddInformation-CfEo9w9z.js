import{r as l,c as f,a as i,l as o,j as t,F as b,b as S,S as A,V as v,h as y}from"./index-BlNJeTnI.js";import{A as F,c as I}from"./converToBase64-C3Jg6Boi.js";import{H as q}from"./HeadingPlusBackBtn-BsklcJos.js";import{S as N}from"./SingleImageUpload-BCqkOXfw.js";import{I as E}from"./Input-Cjds7Lg7.js";import{T as P}from"./TextArea-B3-RYU9Z.js";import{S as w}from"./SelectComponent-B-D4jrKw.js";import"./BackButton-CAs5lnAX.js";import"./index-CMglQiNc.js";import"./no-image-icon-CabPHXKl.js";function _(){const[s,m]=l.useState(""),[c,d]=l.useState(""),r=4*1024*1024,g=["image/jpeg","image/jpg","image/png","image/svg+xml","video/mp4","application/pdf"],p=[{label:"Getting Started",value:"getting started"},{label:"How to trade",value:"how to trade"}],u={image:null,attachment:null,title:"",description:"",category:""},x=f().shape({image:o().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png, svg",e=>e===null||e instanceof File&&["image/jpeg","image/png","image/svg+xml"].includes(e.type)).required("Image is required"),attachment:o().nullable().test("fileFormat","Unsupported file format. Allowed formats: JPG, PNG, SVG, MP4, PDF.",e=>e&&g.includes(e.type)).test("fileSize",`File too large. Maximum size is ${r/(1024*1024)}MB.`,e=>e&&e.size<=r).required("Attachment is required"),title:i().required("Title is required"),description:i().required("Description is required"),category:i().required("Question Category is required")}),h=async(e,{setSubmitting:n})=>{n(!0);const j=await I(c);try{await new Promise(a=>setTimeout(()=>{a()},1e3))}catch(a){v.error(y(a))}finally{n(!1)}console.log({...e,image:s,attachment:j})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx("div",{className:"",children:t.jsx(q,{label:"Add Information"})}),t.jsx("div",{className:"p-5 bg-white rounded-[20px]",children:t.jsx(b,{initialValues:u,validationSchema:x,onSubmit:h,enableReinitialize:!0,children:e=>t.jsxs(S,{className:"flex flex-col gap-3",children:[t.jsx("div",{className:"",children:t.jsx(N,{formik:e,base64Image:s,setBase64Image:m})}),t.jsx("div",{className:"",children:t.jsx(E,{formik:e,name:"title",id:"title",label:"Title"})}),t.jsx("div",{className:"",children:t.jsx(P,{formik:e,name:"description",id:"description",label:"Description"})}),t.jsx("div",{className:"",children:t.jsx(w,{formik:e,name:"category",id:"category",label:"Question Category",options:p})}),t.jsx("div",{className:"",children:t.jsx(F,{formik:e,name:"attachment",id:"attachment",label:"Attachment",getAttachment:d})}),t.jsx("div",{className:"mt-2",children:t.jsx(A,{formik:e})})]})})})]})})}export{_ as default};
