import{r,N as T,k as q,u as B,w as F,V as H,h as K,j as t,m as O,O as Q,Q as V,T as z,A as U}from"./index-BsC4CiLt.js";import{R as G}from"./ResponsiveTable-CwHPkwiT.js";/* empty css                */import"./Status-BCEaVBkQ.js";import"./index-NiuxfhvR.js";import"./IsError-DysmRO1f.js";import"./NoData-CEn6Zv-n.js";import"./index-DInAQVjv.js";import"./index-CvgDGYcH.js";import"./index-QFobRxCo.js";import"./index-C4oxCGHh.js";function re(){var f,y;const[c,A]=r.useState(1),[E,v]=r.useState(1),[w,$]=r.useState(0),{docDeleted:x}=T(s=>s==null?void 0:s.deleteModal),[o,I]=r.useState(""),[d,b]=r.useState(null),[p,k]=r.useState(null),m=10,P=["fetch-all-specialities",{currentPage:c,limit:m,docDeleted:x,keyword:o,startDate:d,endDate:p}],{isLoading:R,data:i,isError:_,error:u}=q({queryKey:P,queryFn:async()=>{let s=`/speciality?page=${c}&pageSize=${m}`;return d&&(s+=`&from=${d}`),p&&(s+=`&to=${p}`),o&&(s+=`&keyword=${o}`),U.get(s)}}),[a,L]=r.useState((y=(f=i==null?void 0:i.data)==null?void 0:f.data)==null?void 0:y.docs),h=B(),g=F();r.useEffect(()=>{var s,e,n,l;i&&(L((e=(s=i==null?void 0:i.data)==null?void 0:s.data)==null?void 0:e.docs),v((l=(n=i==null?void 0:i.data)==null?void 0:n.data)==null?void 0:l.pages),$(a==null?void 0:a.length)),u&&H.error(K(u))},[i,a==null?void 0:a.length,u,x]);const C=Array.from({length:w},(s,e)=>{var n,l,j,D,S;return{_id:(n=a[e])==null?void 0:n._id,id:((l=a[e])==null?void 0:l.longAutoIncrementId)||((j=a[e])==null?void 0:j.autoIncrementId)||"N/A",specialities:t.jsxs("span",{className:"inline-flex max-[351px]:flex-col max-[350px]:items-end items-center gap-[18px]",children:[t.jsx("span",{className:"w-[50px] h-[50px] rounded-full",children:t.jsx("img",{src:`${O}/${(D=a[e])==null?void 0:D.image}`,alt:"test type image",style:{width:"100%",height:"100%",display:"inline-flex",borderRadius:"50%"},onError:N=>{N.target.onerror=null,N.target.src="https://placehold.co/40x40/cccccc/000000?text=No+Img"}})}),t.jsx("span",{children:(S=a[e])==null?void 0:S.title})]})}}),M=(s,e,n)=>{if(s.stopPropagation(),n==="edit"&&h(`/all-specialities/edit/${e==null?void 0:e._id}`),n==="delete"){const l="/speciality";g(Q(!0)),g(V(l)),g(z(e==null?void 0:e._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"All Specialities"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{h("/all-specialities/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New"})]})})]}),t.jsx("div",{className:"",children:t.jsx(G,{datePicker:!0,setStartDate:b,setEndDate:k,setKeyword:I,isLoading:R,isError:_,fetchedData:a,data:C,mainHeading:"Specialities",searchBar:!0,headings:["ID #","Specialities","Action"],cells:["id","specialities"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:M,currentPage:c,setCurrentPage:A,pages:E})})]})})}export{re as default};
