import{r as o,u as q,w as z,k as K,V as O,h as T,j as t,x as Y,M as J,z as N,B as j,A as Q}from"./index-CQKYHy-I.js";import{D as W}from"./DashboardContainer1-HByQmYgj.js";import{R as G}from"./ResponsiveTable-D2aRitRL.js";import{P as X,D as Z,A as aa,a as ta}from"./admin-profit-icon-YhiRSQEj.js";import{V as ea}from"./view-icon-DsPpK1Wz.js";import{E as sa}from"./edit-icon-CSd65PgS.js";/* empty css                */import{f as oa}from"./index-CkunNRzH.js";import{h as na}from"./moment-C5S46NFB.js";import"./Status-C1XBkVxv.js";import"./index-AGEDdwYz.js";import"./NoData-BHZ79NSU.js";import"./index-DJrup_GY.js";import"./index-CipUpZi5.js";import"./index-Dd1dE9M7.js";import"./index-MSC2IknF.js";function va(){var f,h;const[c,w]=o.useState(1),[L,P]=o.useState(1),[l,k]=o.useState(null),[d,I]=o.useState(null),[p,E]=o.useState(""),m=10,[S,V]=o.useState(0),B=q(),i=z(),M=["fetch-labs",{currentPage:c,limit:m,startDate:l,endDate:d,keyword:p}],{isLoading:C,data:n,isError:_,error:u}=K({queryKey:M,queryFn:()=>{let e=`lab?status=Approved&isLabBranch=no&page=${c}&pageSize=${m}`;return l&&(e+=`&from=${l}`),d&&(e+=`&to=${d}`),p&&(e+=`&keyword=${p}`),Q.get(e)}}),[s,$]=o.useState((h=(f=n==null?void 0:n.data)==null?void 0:f.data)==null?void 0:h.docs);o.useEffect(()=>{if(n){const{data:{data:{docs:e}}}=n,{data:{data:{pages:a}}}=n;$(e),P(a),V(e==null?void 0:e.length)}u&&O.error(T(u))},[n,u]);const F=Array.from({length:S},(e,a)=>{var r,g,b,x,D,A,y,v;return{_id:(r=s[a])==null?void 0:r._id,id:((g=s[a])==null?void 0:g.longAutoIncrementId)||((b=s[a])==null?void 0:b.autoIncrementId)||"N/A",labName:((x=s[a])==null?void 0:x.title)||"N/A",email:((D=s[a])==null?void 0:D.email)||"N/A",phone:oa((A=s[a])==null?void 0:A.phone)||"N/A",joinedDate:na(((y=s[a])==null?void 0:y.createdAt)||"2025-01-01").format("DD/MM/YY"),status:((v=s[a])==null?void 0:v.status)||"N/A"}}),R=[{label:"All Labs",totalValue:40689,icon:X,status:"Up",value:8.5,duration:"yesterday"},{label:"In Wait of Verification",totalValue:10293,icon:Z,status:"Up",value:1.3,duration:"past week"},{label:"Verified Labs",totalValue:89e3,icon:aa,status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked Labs",totalValue:2040,icon:ta,status:"Up",value:1.8,duration:"yesterday"}],H=(e,a,r)=>{e.stopPropagation(),r==="view"&&B(`/labs/approved/profile/${a==null?void 0:a._id}`)},U=(e,a,r)=>{e.stopPropagation(),r==="change-password"&&(i(N(!0)),i(j({type:"change-password",data:{userId:a._id}}))),r==="block"&&(i(N(!0)),i(j({type:"block",data:{userId:a._id}})))};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Labs"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New Lab"})]})})]}),t.jsx("div",{className:"",children:t.jsx(W,{data:R})}),t.jsx("div",{className:"",children:t.jsx(G,{datePicker:!0,setStartDate:k,setEndDate:I,setKeyword:E,isLoading:C,isError:_,fetchedData:s,data:F,mainHeading:"All Labs",searchBar:!0,headings:["ID #","Lab Name","Email","Phone","Joined Date","Status","Action"],cells:["id","labName","email","phone","joinedDate"],status:!0,actions:!0,actionTypes:[{action:"view",icon:ea},{action:"edit",icon:sa}],actionHandler:H,currentPage:c,setCurrentPage:w,pages:L,navigation:!0,navigationLink:"/labs/approved/profile",headingNameForNavigationOnMobile:"Lab Name",moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:t.jsx(Y,{})},{label:"Block",action:"block",icon:t.jsx(J,{})}],moreActionsHandler:U})})]})})}export{va as default};
