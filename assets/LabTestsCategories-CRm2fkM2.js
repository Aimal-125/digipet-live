import{r as i,N as P,k as R,u as _,w as M,V as q,h as B,j as t,m as F,O as H,Q as K,T as O,A as Q}from"./index-BsC4CiLt.js";import{R as V}from"./ResponsiveTable-CwHPkwiT.js";/* empty css                */import"./Status-BCEaVBkQ.js";import"./index-NiuxfhvR.js";import"./IsError-DysmRO1f.js";import"./NoData-CEn6Zv-n.js";import"./index-DInAQVjv.js";import"./index-CvgDGYcH.js";import"./index-QFobRxCo.js";import"./index-C4oxCGHh.js";function ae(){const[a,b]=i.useState([]),[c,D]=i.useState(1),[N,S]=i.useState(1),[v,w]=i.useState(0),{docDeleted:x}=P(s=>s==null?void 0:s.deleteModal),[l,E]=i.useState(""),[d,A]=i.useState(null),[p,C]=i.useState(null),m=10,T=["fetch-lab-test-categories",{currentPage:c,limit:m,docDeleted:x,startDate:d,endDate:p,keyword:l}],{isLoading:$,data:n,isError:k,error:g}=R({queryKey:T,queryFn:async()=>{let s=`/lab-test-category?page=${c}&pageSize=${m}`;return d&&(s+=`&from=${d}`),p&&(s+=`&to=${p}`),l&&(s+=`&keyword=${l}`),Q.get(s)}}),h=_(),u=M();i.useEffect(()=>{var s,e,r,o;n&&(b((e=(s=n==null?void 0:n.data)==null?void 0:s.data)==null?void 0:e.docs),S((o=(r=n==null?void 0:n.data)==null?void 0:r.data)==null?void 0:o.pages),w(a==null?void 0:a.length)),g&&q.error(B(g))},[n,a==null?void 0:a.length,g,x]);const I=Array.from({length:v},(s,e)=>{var r,o,f,y,j;return{_id:(r=a[e])==null?void 0:r._id,id:((o=a[e])==null?void 0:o.longAutoIncrementId)||((f=a[e])==null?void 0:f.autoIncrementId)||"N/A",labTest:t.jsxs("span",{className:"inline-flex max-[351px]:flex-col max-[350px]:items-end items-center gap-[18px]",children:[t.jsx("span",{className:"w-[50px] h-[50px] rounded-full",children:t.jsx("img",{src:`${F}/${(y=a[e])==null?void 0:y.image}`,alt:"test type image",style:{width:"100%",height:"100%",display:"inline-flex",borderRadius:"50%"}})}),t.jsx("span",{children:(j=a[e])==null?void 0:j.title})]})}}),L=(s,e,r)=>{if(s.stopPropagation(),r==="edit"&&h(`/lab-tests-categories/edit/${e==null?void 0:e._id}`),r==="delete"){const o="/lab-test-category";u(H(!0)),u(K(o)),u(O(e==null?void 0:e._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Lab Tests Categories"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{h("/lab-tests-categories/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New"})]})})]}),t.jsx("div",{className:"",children:t.jsx(V,{datePicker:!0,setStartDate:A,setEndDate:C,setKeyword:E,isLoading:$,isError:k,fetchedData:a,data:I,mainHeading:"Categories",searchBar:!0,headings:["ID #","Categories","Action"],cells:["id","labTest"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:L,currentPage:c,setCurrentPage:D,pages:N})})]})})}export{ae as default};
