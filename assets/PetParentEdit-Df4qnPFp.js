import{C as Y,j as e,D as N,r as u,k as E,c as y,G as $,a as l,l as R,F as P,b as w,m as b,q as m,S as v,A as G,p as V,P as g,V as M,h as U,Y as z,y as L}from"./index--oTFs3gJ.js";import{H}from"./HeadingPlusBackBtn-CCyxk8gb.js";import{h as p}from"./moment-C5S46NFB.js";import{i as T,a as k}from"./index-tNe2wjfG.js";import{P as K}from"./apiEndpoints-DA67aB0N.js";import{I as j}from"./Input-DgXnbsb9.js";import{C as Q}from"./CountrySearchInput-DIy4l0Go.js";import{S as _,C as J}from"./CitySearchInput-CCaZ6Mxn.js";import{A as W}from"./AddressInput-BdrLdGIX.js";import{S as X}from"./SingleImageUpload-CsFqmQgm.js";import{P as Z}from"./PhoneInput-IZNzD7W7.js";import{S as ee}from"./SelectComponent-CCeIczMi.js";import{g as ae}from"./index-CtnJN3Yv.js";import"./BackButton-BekUZv0_.js";import"./index-CvwiJHFK.js";import"./index-BVp46ldf.js";/* empty css                     */import"./index.modern-BDAvcjIR.js";import"./index-oiI3A1nS.js";import"./index-CIdIKWNU.js";import"./no-image-icon-CabPHXKl.js";function re({...s}){const[t,i,o]=Y(s),n=t.value?p(t.value).format("YYYY-MM-DD"):"",c=d=>{const h=d.target.value;o.setValue(h?p(h).toDate():null)};return e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("label",{htmlFor:s.id||s.name,className:"text-[18px] font-[500] text-[#252C62]",children:"Date of Birth"}),e.jsx("input",{...s,type:"date",value:n,onChange:c,onBlur:t.onBlur,onFocus:d=>{t.onBlur(d),d.target.showPicker()},className:"h-10 px-3 py-2 rounded-md bg-white border border-lightBlue text-darkBlue focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",max:p().format("YYYY-MM-DD")}),i.touched&&i.error?e.jsx("div",{className:"text-red-500 text-sm",children:i.error}):null]})}function se(){const{id:s}=N(),[t,i]=u.useState(""),[o,n]=u.useState(""),[c,d]=u.useState(""),[h,B]=u.useState("");u.useEffect(()=>{if(t){const r=new Intl.DisplayNames(["en"],{type:"region"});n(r.of(t))}},[t]);const C=async()=>s?(await G.get(`${K}/${s}`)).data.data.doc:null,{data:a,isLoading:S,isError:I,error:D}=E({queryKey:["petParent",s],queryFn:C,enabled:!!s,staleTime:5*60*1e3,cacheTime:30*60*1e3});u.useEffect(()=>{a&&(i(ae(a==null?void 0:a.countryCode)||(a==null?void 0:a.countryCode)||""),d((a==null?void 0:a.province)||""))},[a]);const q=()=>{var r;return{imageDataURI:null,fullName:(a==null?void 0:a.fullName)||((r=a==null?void 0:a.user)==null?void 0:r.username)||"",email:(a==null?void 0:a.email)||"",countryName:(a==null?void 0:a.countryName)||"",province:(a==null?void 0:a.province)||"",city:(a==null?void 0:a.city)||"",address:(a==null?void 0:a.address)||"",phone:(a==null?void 0:a.phone)||"",bloodGroup:(a==null?void 0:a.bloodGroup)||"",dateOfBirth:a!=null&&a.dateOfBirth?p(a.dateOfBirth).toDate():null}},A=y().shape({imageDataURI:R().nullable().test("fileSize","Image size must be less than 4MB",r=>r===null||r instanceof File&&r.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",r=>r===null||r instanceof File&&["image/jpeg","image/png"].includes(r.type)).required("Image is required"),fullName:l().required("Full Name is required"),email:l().email("Please enter valid email").required("Email is required"),countryName:l().required("Country Name is required"),province:l().optional(),city:l().optional(),address:l().required("Address is required"),phone:l().test("is-possible-phone","Please enter valid phone number",r=>r?T(r):!0).test("is-valid-phone","Please enter valid phone number",r=>r?k(r):!0).required("Phone is required"),bloodGroup:l().oneOf(["A+","A-","B+","B-","AB+","AB-","O+","O-"],"Please select valid blood group").required("Blood Group is required"),dateOfBirth:$().nullable().max(new Date,"Date of Birth cannot be in the future").required("Date of Birth is required")}),O=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"}],F=async r=>{console.log({...r,imageDataURI:h,dateOfBirth:p(r==null?void 0:r.dateOfBirth).format("YYYY-MM-DD"),countryCode:t,petParentObjectId:s})};return S?e.jsx("div",{className:"flex justify-center items-center h-64 text-darkBlue",children:"Loading profile data..."}):I?e.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:["Error loading profile: ",D.message]}):a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(P,{initialValues:q(),validationSchema:A,onSubmit:F,enableReinitialize:!0,children:r=>{var f,x;return e.jsxs(w,{className:"flex flex-col gap-3 p-5 bg-white rounded-[20px] border border-lightBlue shadow",autoComplete:"off",children:[e.jsx("p",{className:"text-xl text-darkBlue font-[500] border-b border-b-lightBlue pb-2",children:"Profile Settings"}),e.jsx("div",{className:"",children:e.jsx(X,{formik:r,name:"imageDataURI",id:"imageDataURI",label:"Profile Image",base64Image:h,setBase64Image:B,backendImage:(f=a==null?void 0:a.user)!=null&&f.image?`${b}/${(x=a==null?void 0:a.user)==null?void 0:x.image}`:a!=null&&a.image?`${b}/${a==null?void 0:a.image}`:""})}),e.jsxs(m,{children:[e.jsx("div",{className:"w-full",children:e.jsx(j,{formik:r,name:"fullName",id:"fullName",label:"Full Name"})}),e.jsx("div",{className:"w-full",children:e.jsx(j,{formik:r,name:"email",id:"email",label:"Email"})})]}),e.jsxs(m,{children:[e.jsx("div",{className:"w-full",children:e.jsx(Q,{formik:r,name:"countryName",id:"countryName",label:"Country",getCountryCode:i})}),e.jsx("div",{className:"w-full",children:e.jsx(_,{formik:r,name:"province",id:"province",label:"State/Province",countryName:o,getStateName:d})})]}),e.jsxs(m,{children:[e.jsx("div",{className:"w-full",children:e.jsx(J,{formik:r,name:"city",id:"city",label:"City",countryName:o,stateName:c})}),e.jsx("div",{className:"w-full",children:e.jsx(W,{formik:r})})]}),e.jsxs(m,{children:[e.jsx("div",{className:"w-full",children:e.jsx(Z,{name:"phone",id:"phone",label:"Phone",country:t})}),e.jsx("div",{className:"w-full",children:e.jsx(ee,{formik:r,name:"bloodGroup",id:"bloodGroup",label:"Blood Group",options:O})})]}),e.jsx(m,{children:e.jsx("div",{className:"w-full",children:e.jsx(re,{name:"dateOfBirth",id:"dateOfBirth"})})}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{formik:r})})]})}})})}):e.jsx("div",{className:"flex justify-center items-center h-64 text-gray-500",children:"No profile data found for this ID."})}z(L);function te(){const{id:s}=N(),t={newPassword:"",confirmPassword:""},i=y().shape({newPassword:l().password().required("New Password is required"),confirmPassword:l().oneOf([V("newPassword"),null],"Passwords do not match").required("Confirm password is required")}),o=async n=>{try{console.log({...n,petParentObjectId:s})}catch(c){M.error(U(c))}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(P,{initialValues:t,validationSchema:i,onSubmit:o,enableReinitialize:!0,children:n=>e.jsxs(w,{className:"flex flex-col gap-3 p-5 bg-white rounded-[20px] border border-lightBlue shadow",children:[e.jsxs(m,{children:[e.jsx("div",{className:"w-full",children:e.jsx(g,{formik:n,name:"newPassword",id:"newPassword",label:"New Password"})}),e.jsx("div",{className:"w-full",children:e.jsx(g,{formik:n,name:"confirmPassword",id:"confirmPassword",label:"Confirm Password"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{formik:n})})]})})})})}function Ce(){const[s,t]=u.useState("profile"),i=o=>`cursor-pointer px-4 py-2 rounded-md transition-colors ${s===o?"bg-myBlue text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`;return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsx(H,{label:"Edit Pet Parent"})}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",className:i("profile"),onClick:()=>t("profile"),children:"Profile"}),e.jsx("button",{type:"button",className:i("password"),onClick:()=>t("password"),children:"Change Password"})]}),e.jsx("div",{children:s==="profile"?e.jsx(se,{}):e.jsx(te,{})})]})}export{Ce as default};
