import{r as o,u as q,w as z,k as K,V as O,h as T,j as e,x as Y,M as J,z as j,B as v,A as Q}from"./index-DqT0A0WV.js";import{D as W}from"./DashboardContainer1-BvCS8xoW.js";import{R as G}from"./ResponsiveTable-FCQxtvDA.js";import{P as X,D as Z,A as aa,a as ea}from"./admin-profit-icon-YhiRSQEj.js";import{V as ta}from"./view-icon-DsPpK1Wz.js";import{E as sa}from"./edit-icon-CSd65PgS.js";/* empty css                */import{f as oa}from"./index-BJhW3WRQ.js";import{h as na}from"./moment-C5S46NFB.js";import"./Status-HTHKglWX.js";import"./index-D5TUXJLt.js";import"./NoData-DRT_4vkO.js";import"./index-CrxefEGs.js";import"./index-DE8dskU1.js";import"./index-BMn7NW-M.js";import"./index-BQbMBTEc.js";function Na(){var f,h;const[c,w]=o.useState(1),[L,P]=o.useState(1),[l,k]=o.useState(null),[d,I]=o.useState(null),[u,E]=o.useState(""),m=10,[S,V]=o.useState(0),B=q(),i=z(),M=["fetch-labs-declined",{currentPage:c,limit:m,startDate:l,endDate:d,keyword:u}],{isLoading:C,data:n,isError:_,error:p}=K({queryKey:M,queryFn:()=>{let t=`lab?status=Declined&isLabBranch=no&page=${c}&pageSize=${m}`;return l&&(t+=`&from=${l}`),d&&(t+=`&to=${d}`),u&&(t+=`&keyword=${u}`),Q.get(t)}}),[s,$]=o.useState((h=(f=n==null?void 0:n.data)==null?void 0:f.data)==null?void 0:h.docs);o.useEffect(()=>{if(n){const{data:{data:{docs:t}}}=n,{data:{data:{pages:a}}}=n;$(t),P(a),V(t==null?void 0:t.length)}p&&O.error(T(p))},[n,p]);const F=Array.from({length:S},(t,a)=>{var r,g,b,x,D,y,A,N;return{_id:(r=s[a])==null?void 0:r._id,id:((g=s[a])==null?void 0:g.longAutoIncrementId)||((b=s[a])==null?void 0:b.autoIncrementId)||"N/A",labName:((x=s[a])==null?void 0:x.title)||"N/A",email:((D=s[a])==null?void 0:D.email)||"N/A",phone:oa((y=s[a])==null?void 0:y.phone)||"N/A",joinedDate:na(((A=s[a])==null?void 0:A.createdAt)||"2025-01-01").format("DD/MM/YY"),status:((N=s[a])==null?void 0:N.status)||"N/A"}}),R=[{label:"All Labs",totalValue:40689,icon:X,status:"Up",value:8.5,duration:"yesterday"},{label:"In Wait of Verification",totalValue:10293,icon:Z,status:"Up",value:1.3,duration:"past week"},{label:"Verified Labs",totalValue:89e3,icon:aa,status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked Labs",totalValue:2040,icon:ea,status:"Up",value:1.8,duration:"yesterday"}],H=(t,a,r)=>{t.stopPropagation(),r==="view"&&B(`/labs/declined/profile/${a==null?void 0:a._id}`)},U=(t,a,r)=>{t.stopPropagation(),r==="change-password"&&(i(j(!0)),i(v({type:"change-password",data:{userId:a._id}}))),r==="block"&&(i(j(!0)),i(v({type:"block",data:{userId:a._id}})))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Labs"}),e.jsx("div",{children:e.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Add New Lab"})]})})]}),e.jsx("div",{className:"",children:e.jsx(W,{data:R})}),e.jsx("div",{className:"",children:e.jsx(G,{datePicker:!0,setStartDate:k,setEndDate:I,setKeyword:E,isLoading:C,isError:_,fetchedData:s,data:F,mainHeading:"All Labs",searchBar:!0,headings:["ID #","Lab Name","Email","Phone","Joined Date","Status","Action"],cells:["id","labName","email","phone","joinedDate"],status:!0,actions:!0,actionTypes:[{action:"view",icon:ta},{action:"edit",icon:sa}],actionHandler:H,currentPage:c,setCurrentPage:w,pages:L,navigation:!0,navigationLink:"/labs/declined/profile",headingNameForNavigationOnMobile:"Lab Name",moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:e.jsx(Y,{})},{label:"Block",action:"block",icon:e.jsx(J,{})}],moreActionsHandler:U})})]})})}export{Na as default};
