import{r,H as L,k as M,u as R,w as q,V as B,h as F,j as a,I as T,J as V,K as z,A as J}from"./index-DqT0A0WV.js";import{R as O}from"./ResponsiveTable-FCQxtvDA.js";import{E as Q}from"./edit-icon-CSd65PgS.js";import{D as W}from"./delete-icon-FU5lMFq3.js";import{n as G}from"./nameWithImage-CgslEbgC.js";/* empty css                */import"./Status-HTHKglWX.js";import"./index-D5TUXJLt.js";import"./NoData-DRT_4vkO.js";import"./index-CrxefEGs.js";import"./index-DE8dskU1.js";import"./index-BMn7NW-M.js";import"./index-BQbMBTEc.js";function de(){var j,E;const[p,I]=r.useState(1),[S,A]=r.useState(1),[g,N]=r.useState(""),[u,P]=r.useState(null),[m,v]=r.useState(null),x=10,{docDeleted:y}=L(s=>s==null?void 0:s.deleteModal),w=["fetch-pet-categories",{currentPage:p,limit:x,docDeleted:y,keyword:g,startDate:u,endDate:m}],{isLoading:C,isError:k,data:t,error:f}=M({queryKey:w,queryFn:async()=>{let s=`/pet-category?page=${p}&pageSize=${x}`;return u&&(s+=`&from=${u}`),m&&(s+=`&to=${m}`),g&&(s+=`&keyword=${g}`),J.get(s)}}),[i,$]=r.useState((E=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:E.docs),[_,b]=r.useState(0),D=R(),h=q();r.useEffect(()=>{var s,e,o,n,c,d,l;t&&($((e=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:e.docs),A((n=(o=t==null?void 0:t.data)==null?void 0:o.data)==null?void 0:n.pages),b((l=(d=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:d.docs)==null?void 0:l.length)),f&&B.error(F(f))},[t,f,y]);const H=(s,e,o)=>{if(s.stopPropagation(),o==="edit"&&D(`/pet-categories/edit/${e==null?void 0:e._id}`),o==="delete"){const n="/pet-category";h(T(!0)),h(V(n)),h(z(e==null?void 0:e._id))}},K=Array.from({length:_},(s,e)=>{var o,n,c,d,l;return{_id:(o=i[e])==null?void 0:o._id,id:((n=i[e])==null?void 0:n.longAutoIncrementId)||((c=i[e])==null?void 0:c.autoIncrementId)||"N/A",category:G((d=i[e])==null?void 0:d.image,(l=i[e])==null?void 0:l.title)}});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[a.jsx("h1",{className:"main-heading",children:"Pet Categories"}),a.jsx("div",{children:a.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{D("/pet-categories/add")},children:[a.jsx("span",{children:"+"}),a.jsx("span",{children:"Add New"})]})})]}),a.jsx("div",{className:"",children:a.jsx(O,{datePicker:!0,setStartDate:P,setEndDate:v,setKeyword:N,isLoading:C,isError:k,fetchedData:i,data:K,mainHeading:"Categories",searchBar:!0,headings:["ID #","Categories","Action"],cells:["id","category"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:Q},{action:"delete",icon:W}],actionHandler:H,currentPage:p,setCurrentPage:I,pages:S})})]})})}export{de as default};
