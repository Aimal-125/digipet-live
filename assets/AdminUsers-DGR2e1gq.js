import{r,u as q,w as z,N as B,k as H,V as K,h as O,j as s,O as Q,Q as V,T as G,A as J}from"./index-90C_iGnH.js";import{R as W}from"./ResponsiveTable-D_gA95Z_.js";/* empty css                */import"./Status-CSWQGFb3.js";import"./index-EwOyO1A0.js";import"./IsError-CviWS08M.js";import"./NoData-PjhX6X5_.js";import"./index-DN2uC23I.js";import"./index-BM3eLwdb.js";import"./index-YtPAdDxb.js";import"./index-nI4YGiSl.js";function ce(){const[a,v]=r.useState([]),[l,w]=r.useState(1),[k,I]=r.useState(1),[i,h]=r.useState(""),[u,P]=r.useState(null),[m,U]=r.useState(null),x=10,A=q(),p=z(),[$,R]=r.useState(0),{docDeleted:g}=B(e=>e==null?void 0:e.deleteModal),_=["fetch-admin-users",{currentPage:l,limit:x,keyword:i,docDeleted:g,startDate:u,endDate:m}],{isLoading:b,data:o,isError:C,error:f}=H({queryKey:_,queryFn:async()=>{let e=`/admin/admin-user/?page=${l}&pageSize=${x}`;return u&&(e+=`&from=${u}`),m&&(e+=`&to=${m}`),i&&(e+=`&keyword=${i}`),J.get(e)}});r.useEffect(()=>{if(o){const{data:{data:{docs:e}}}=o,{data:{data:{pages:t}}}=o;v(e),I(t),R(e==null?void 0:e.length)}g&&h(""),f&&K.error(O(f))},[o,f,g,i]);const L=(e,t,c)=>{if(e.stopPropagation(),c==="edit"&&A(`/admin-users/edit/${t==null?void 0:t._id}`),c==="delete"){const d="/admin/admin-user";p(Q(!0)),p(V(d)),p(G(t==null?void 0:t._id))}},F=Array.from({length:$},(e,t)=>{var d,y,D,j,N,S;const c=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"";return{_id:(d=a[t])==null?void 0:d._id,id:((y=a[t])==null?void 0:y.longAutoIncrementId)||((D=a[t])==null?void 0:D.autoIncrementId)||"N/A",username:((j=a[t])==null?void 0:j.username)||"N/A",email:((N=a[t])==null?void 0:N.email)||"N/A",role:(()=>{var E;const n=(E=a[t])==null?void 0:E.roles;if(Array.isArray(n)&&n.length>0){const M=n.map(T=>c(T));return s.jsx("span",{children:M.join(", ")})}return"N/A"})(),status:((S=a[t])==null?void 0:S.status)||"N/A"}});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Admin Users"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{A("/admin-users/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(W,{datePicker:!0,setStartDate:P,setEndDate:U,isLoading:b,isError:C,fetchedData:a,data:F,mainHeading:"Admin Users",searchBar:!0,headings:["ID #","Username","Email","Role","Status","Action"],cells:["id","username","email","role"],status:!0,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:L,setCurrentPage:w,pages:k,currentPage:l,setKeyword:h})})]})})}export{ce as default};
