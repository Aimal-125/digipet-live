import{r as g,m as U,j as e,D as V,k as X,V as W,h as z,A as F,u as ae,w as te,z as re,B as ie}from"./index-90C_iGnH.js";import{h as Z,T as oe}from"./hasRequiredRole-CE8KSgU3.js";import{I as le,a as ce}from"./IsError-CviWS08M.js";import{N as de}from"./NoData-PjhX6X5_.js";import{P as me,R as K}from"./ResponsiveTable-D_gA95Z_.js";import{a as ue,A as pe,B as fe,P as ge,O as xe,D as he}from"./apiEndpoints-DA67aB0N.js";import{V as Y}from"./view-icon-DsPpK1Wz.js";import{E as se}from"./edit-icon-CSd65PgS.js";import{S as Q}from"./Status-CSWQGFb3.js";/* empty css                */import{W as be,a as je,R as Ne}from"./ReviewsComponent-BYzZEEHi.js";import{D as ye}from"./delete-icon-FU5lMFq3.js";import{I as ve}from"./index-EwOyO1A0.js";import{n as J}from"./nameWithImage-BlHQzK97.js";import{f as Ae}from"./index-BZFQK5FB.js";import"./ButtonClipLoader-Btj_eW0L.js";import"./index-DN2uC23I.js";import"./index-BM3eLwdb.js";import"./index-YtPAdDxb.js";import"./index-nI4YGiSl.js";const ee=[{id:1,name:"Pet Profile",requiredRoles:["admin"]},{id:2,name:"All Appointments",requiredRoles:["admin"]},{id:3,name:"Lab Tests",requiredRoles:["admin"]},{id:4,name:"Wallet",requiredRoles:["admin"]},{id:5,name:"Favorites",requiredRoles:["admin"]},{id:6,name:"Payment Invoices",requiredRoles:["admin"]},{id:7,name:"Reviews",requiredRoles:["admin"]}];function we({pet:a}){var w,P,j;const[f,b]=g.useState(window.innerWidth>768);g.useEffect(()=>{const x=()=>{b(window.innerWidth>768)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]);const[n,d]=g.useState(0),s=g.useRef(!1),o=300,c=[];a!=null&&a.gallery&&a.gallery.length>0?c.push(...a.gallery.map(x=>`${U}/${x}`)):a!=null&&a.image?c.push(`${U}/${a.image}`):(w=a==null?void 0:a.petCategory)!=null&&w.image&&c.push(`${U}/${a.petCategory.image}`);const m=c.length,i=x=>{d(x)},l=()=>{s.current||(s.current=!0,d(x=>x===0?m-1:x-1),setTimeout(()=>{s.current=!1},o))},p=()=>{s.current||(s.current=!0,d(x=>x===m-1?0:x+1),setTimeout(()=>{s.current=!1},o))};if(g.useEffect(()=>()=>{},[]),m===0)return null;const A=c[n],v=new Date().getFullYear(),N=a!=null&&a.age?v-a.age:"N/A";return e.jsxs("div",{className:"flex flex-col min-[1200px]:flex-row gap-5 bg-white rounded-[20px] p-5",children:[f?e.jsxs("div",{className:"flex flex-col min-[1024px]:flex-row gap-4",children:[e.jsx("div",{className:"flex min-[1024px]:flex-col min-[1024px]:h-[430px] p-2 min-[1024px]:p-4 items-center gap-2 overflow-auto min-[1024px]:overflow-x-hidden",children:c.map((x,D)=>e.jsx("div",{className:"flex",children:e.jsx("button",{className:`w-[60px] h-[60px] inline-flex cursor-pointer rounded-md focus:outline-none ${n===D?"highlight-shadow":""}`,onClick:()=>i(D),"aria-label":`View image ${D+1} for ${a==null?void 0:a.name}`,children:e.jsx("img",{src:x,alt:`Thumbnail of ${a==null?void 0:a.name} ${D+1}`,className:"w-full h-full inline-flex object-cover rounded-md"})})},D))}),e.jsx("div",{className:"flex w-full min-[1200px]:w-[430px] h-[430px] mx-auto rounded-[20px]",children:e.jsx("img",{src:A,alt:`Image of ${a==null?void 0:a.name} ${n+1}`,className:"w-full h-full object-cover inline-flex rounded-[20px]"})})]}):e.jsxs("div",{className:"relative w-full h-full max-w-md mx-auto rounded-[20px] overflow-hidden",children:[e.jsx("img",{src:A,alt:`Image of ${a==null?void 0:a.name} ${n+1}`,className:"w-full h-full object-cover rounded-[20px] inline-flex"}),m>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l,className:"absolute top-1/2 left-2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition cursor-pointer z-10","aria-label":`Previous image for ${a==null?void 0:a.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:p,className:"absolute top-1/2 right-2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition cursor-pointer z-10","aria-label":`Next image for ${a==null?void 0:a.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),m>0&&e.jsxs("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-gray-800 bg-opacity-50 text-white text-sm px-3 py-1 rounded-full z-10",children:[n+1," / ",m]})]}),e.jsxs("div",{className:"pet-details-container",children:[e.jsxs("div",{className:"pet-name-container",children:[e.jsx("p",{className:"pet-name",children:(a==null?void 0:a.name)||"N/A"})," ",e.jsxs("p",{className:"breeder-text",children:[e.jsx("span",{children:"Pet Parent:"})," ",e.jsx("span",{children:((P=a==null?void 0:a.petParent)==null?void 0:P.fullName)||"N/A"})]})]}),e.jsxs("div",{className:"pet-details-div",children:[e.jsxs("div",{className:"pet-details-headings-container",children:[e.jsx("p",{children:"Type:"}),e.jsx("p",{children:"Breed:"}),e.jsx("p",{children:"Gender:"}),e.jsx("p",{children:"Registry:"}),e.jsx("p",{children:"Born:"}),e.jsx("p",{children:"Blood Group:"}),e.jsx("p",{children:"Description:"})]}),e.jsxs("div",{className:"pet-detail-fields-container",children:[e.jsx("p",{children:((j=a==null?void 0:a.petCategory)==null?void 0:j.title)||"N/A"}),e.jsx("p",{children:(a==null?void 0:a.breed)||"N/A"})," ",e.jsx("p",{children:(a==null?void 0:a.gender)||"N/A"})," ",e.jsx("p",{children:(a==null?void 0:a.registry)||"N/A"})," ",e.jsx("p",{children:N}),e.jsx("p",{children:(a==null?void 0:a.bloodGroup)||"N/A"}),e.jsx("p",{className:"text-wrap",children:(a==null?void 0:a.description)||"N/A"})]})]}),e.jsx("div",{className:"pet-edit-profile-btn-div mt-auto",children:e.jsx("button",{type:"button",children:"Edit Profile"})})]})]})}function Pe(){var w,P;const{id:a}=V(),[f,b]=g.useState(1),[n,d]=g.useState(1),s=3,[o,c]=g.useState(0),m=["fetch-pets",{currentPage:f,id:a,limit:s}],{isLoading:i,data:l,isError:p,error:A}=X({queryKey:m,queryFn:async()=>{const j=`${ue}?petParentObjectId=${a}&page=${f}&pageSize=${s}`;return F.get(j)}});g.useEffect(()=>{if(l){const{data:j}=l.data,x=(j==null?void 0:j.docs)||[],D=(j==null?void 0:j.pages)||1;c(x==null?void 0:x.length),d(D)}p&&W.error(z(A))},[l,p,A]);const v=j=>{b(j)},N=((P=(w=l==null?void 0:l.data)==null?void 0:w.data)==null?void 0:P.docs)||[];return e.jsxs("div",{className:"flex flex-col gap-5",children:[i?e.jsx(le,{}):p?e.jsx(ce,{}):(N==null?void 0:N.length)===0?e.jsx(de,{}):N==null?void 0:N.map(j=>e.jsx(we,{pet:j},j._id)),e.jsx("div",{className:"flex justify-center",children:n>1&&e.jsx(me,{totalPages:n,currentPage:f,setCurrentPage:v})})]})}function De(){var j,x,D,L,E,C;const{id:a}=V(),[f,b]=g.useState(1),[n,d]=g.useState(""),s=10,o=ae(),c=["allAppointments",{petParentId:a,page:f,limit:s}],{isLoading:m,data:i,isError:l,error:p,isSuccess:A}=X({queryKey:c,queryFn:()=>F.get(pe,{params:{petParent:a,page:f,pageSize:s}}),enabled:!!a,keepPreviousData:!0,onSuccess:S=>{},onError:S=>{W.error(z(S))}}),v=((x=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:x.docs)||[],N=((L=(D=i==null?void 0:i.data)==null?void 0:D.data)==null?void 0:L.pages)||1;(C=(E=i==null?void 0:i.data)==null?void 0:E.data)!=null&&C.docsCount;const w=(S,t,r)=>{S.stopPropagation(),r==="view"?o(`/appointments/view/${t==null?void 0:t._id}`):r==="edit"&&o(`/appointments/edit/${t==null?void 0:t._id}`)},P=Array.from({length:(v==null?void 0:v.length)||0},(S,t)=>{var R,y,u,h,k;const r=v[t],$=r!=null&&r.slot?new Date(r.slot).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return{_id:r==null?void 0:r._id,id:((R=r==null?void 0:r.order)==null?void 0:R.longAutoIncrementId)||"N/A",doctorName:((y=r==null?void 0:r.doctor)==null?void 0:y.fullName)||"N/A",petParents:((u=r==null?void 0:r.petParent)==null?void 0:u.fullName)||"N/A",appointmentDate:$,type:(r==null?void 0:r.type)||"N/A",fee:`${parseFloat((h=r==null?void 0:r.order)==null?void 0:h.amount).toFixed(2)||"N/A"} ${((k=r==null?void 0:r.order)==null?void 0:k.currencyCode)||""}`,appointmentStatus:e.jsx(Q,{status:r==null?void 0:r.status}),paymentStatus:e.jsx(Q,{status:r==null?void 0:r.paymentStatus})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{data:P,mainHeading:"All Appointments",searchBar:!1,keyword:n,isLoading:m,isError:l,fetchedData:v,setKeyword:d,headings:["Order #","Doctor Name","Pet Parents","Appointment Booked","Type","Fee","Appointment Status","Payment Status"],cells:["id","doctorName","petParents","appointmentDate","type","fee","appointmentStatus","paymentStatus"],status:!1,actions:!1,actionTypes:[{action:"view",icon:Y},{action:"edit",icon:se}],actionHandler:w,setCurrentPage:b,pages:N,currentPage:f})})})}function ke(){var x,D,L,E,C,S;const{id:a}=V(),f=ae(),b=te(),[n,d]=g.useState(1),[s,o]=g.useState(""),c=10,m=["petParentLabTests",{petParentId:a,page:n,limit:c,keyword:s}],{isLoading:i,data:l,isError:p,error:A,isSuccess:v}=X({queryKey:m,queryFn:()=>F.get(fe,{params:{petParent:a,page:n,pageSize:c}}),enabled:!!a,keepPreviousData:!0,onError:t=>{W.error(z(t))}}),N=((D=(x=l==null?void 0:l.data)==null?void 0:x.data)==null?void 0:D.docs)||[],w=((E=(L=l==null?void 0:l.data)==null?void 0:L.data)==null?void 0:E.pages)||1;(S=(C=l==null?void 0:l.data)==null?void 0:C.data)!=null&&S.docsCount;const P=(t,r,$)=>{t.stopPropagation(),$==="view"&&f(`/booked-lab-tests/details/${r==null?void 0:r._id}`)},j=N.map(t=>{var u,h,k,B,O,H,_;const r=((u=t==null?void 0:t.offeredLabTests)==null?void 0:u.map(I=>I==null?void 0:I.title).filter(Boolean).join(", "))||"N/A",$=(t==null?void 0:t.sampleCollectionMethod)==="Home"?"Home Collection":t!=null&&t.sampleCollectionMethod?t.sampleCollectionMethod:((h=t==null?void 0:t.labBranchOffice)==null?void 0:h.title)||((k=t==null?void 0:t.labHeadOffice)==null?void 0:k.title)||"N/A",R=t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",y=(B=t==null?void 0:t.medicalRecord)!=null&&B.image?e.jsx("button",{type:"button",className:"cursor-pointer text-blue-600 inline-block",onClick:()=>{var I;b(re(!0)),b(ie({type:"medical-record",data:{userId:a,report:(I=t==null?void 0:t.medicalRecord)==null?void 0:I.image,baseURL:U}}))},children:"View Report"}):e.jsx("span",{className:"text-gray-500",children:"N/A"});return{_id:t==null?void 0:t._id,id:(t==null?void 0:t.longAutoIncrementId)||"N/A",test:r,lab:((O=t==null?void 0:t.labHeadOffice)==null?void 0:O.title)||"N/A",collBy:$,fee:`${parseInt((H=t==null?void 0:t.order)==null?void 0:H.amount).toFixed(2)||"N/A"} ${((_=t==null?void 0:t.order)==null?void 0:_.currencyCode)||""}`,bookedDate:R,result:y,status:e.jsx(Q,{status:t==null?void 0:t.status})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{isLoading:i,isError:p,fetchedData:N,data:j,mainHeading:"Lab Tests",searchBar:!1,keyword:s,setKeyword:o,headings:["Order #","Test","Lab","Collected By","Fee","Booked On","Result","Status","Action"],cells:["id","test","lab","collBy","fee","bookedDate","result","status"],status:!1,actions:!0,actionTypes:[{action:"view",icon:Y}],actionHandler:P,setCurrentPage:d,pages:w,currentPage:n})})})}const q=[{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Pending"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Pending"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"}];function Ie(){const[a,f]=g.useState(1),[b,n]=g.useState(3),d=(c,m,i)=>{c.stopPropagation(),console.log(m,`${i} btn clicked`)},o=Array.from({length:10},(c,m)=>{var i,l,p,A,v,N;return{id:(i=q[m])==null?void 0:i.id,accountNumber:(l=q[m])==null?void 0:l.accountNumber,reason:(p=q[m])==null?void 0:p.reason,transactionDate:(A=q[m])==null?void 0:A.transactionDate,amount:(v=q[m])==null?void 0:v.amount,status:(N=q[m])==null?void 0:N.status}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(be,{transaction:!0,bankDetails:!1}),e.jsx("div",{className:"",children:e.jsx(K,{isLoading:!1,isError:!1,fetchedData:o,data:o,mainHeading:"",searchBar:!1,headings:["ID #","Account #","Reason","Debited/Credited On","Amount","Status"],cells:["id","accountNumber","reason","transactionDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:Y},{action:"edit",icon:se},{action:"delete",icon:ye}],actionHandler:d,setCurrentPage:f,pages:b})})]})})}const Te="/digipet-live/images/pet-parent-profile/fav-doc-1.svg",T="/digipet-live/images/pet-parent-profile/fav-doc-2.svg",Se=[{id:1,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:Te,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:2,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:3,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:4,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:5,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:6,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:7,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:8,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:9,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:10,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:11,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:12,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:T,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"}],Ce="/digipet-live/images/location-icon.svg",Be="/digipet-live/images/book-now-icon.svg",Ee="/digipet-live/images/heart-icon.svg",$e="/digipet-live/images/red-star-icon.svg";function Le({data:a={},mainHeading:f="",searchBar:b=!1}){const d=Array.from({length:12},(s,o)=>{var c,m,i,l,p,A,v,N,w,P;return{id:(c=a[o])==null?void 0:c.id,rating:(m=a[o])==null?void 0:m.rating,profession:(i=a[o])==null?void 0:i.profession,available:(l=a[o])==null?void 0:l.available,name:(p=a[o])==null?void 0:p.name,image:(A=a[o])==null?void 0:A.image,address:(v=a[o])==null?void 0:v.address,distance:(N=a[o])==null?void 0:N.distance,currency:(w=a[o])==null?void 0:w.currency,fee:(P=a[o])==null?void 0:P.fee}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[572px]:flex-col items-center justify-between gap-[20px]",children:[e.jsx("h2",{className:"m-0 font-[700] text-[24px] text-[#252C62] py-0 px-[20px]",children:f}),b?e.jsx("div",{className:"search-bar",children:e.jsxs("div",{className:"flex items-center border border-gray-300 bg-white rounded-[20px]",children:[e.jsx("span",{className:"pl-2 text-gray-500",children:e.jsx(ve,{})}),e.jsx("input",{className:"w-full py-1 px-2 outline-none",type:"search",name:"search",id:"search","aria-label":"Search",placeholder:"Search"})]})}):""]}),e.jsx("div",{className:"cards-container",children:d==null?void 0:d.map((s,o)=>{var c;return e.jsxs("div",{className:`${(d==null?void 0:d.length)===1?"w-[320px]":""} fav-card`,children:[e.jsx("div",{className:"fav-img-box",children:e.jsx("img",{src:s==null?void 0:s.image,alt:s==null?void 0:s.name})}),e.jsxs("div",{className:"fav-details-box",children:[e.jsxs("div",{className:"profession-div relative",children:[e.jsx("p",{className:"profession-name",children:s==null?void 0:s.profession}),e.jsxs("p",{className:"availability-text",children:[e.jsx("span",{className:"rounded-full w-[3px] h-[3px] bg-[#1dc683]"}),e.jsx("span",{children:s==null?void 0:s.available})]}),e.jsx("span",{className:"absolute left-0 bg-black w-[2px] h-[24px]"})]}),e.jsxs("div",{className:"fav-doc-name-div",children:[e.jsx("p",{className:"fav-doc-name",children:s==null?void 0:s.name}),e.jsxs("p",{className:"fav-doc-location-div",children:[e.jsxs("span",{className:"fav-location-span",children:[e.jsx("span",{children:e.jsx("img",{src:Ce,alt:"icon",width:20,height:20})}),e.jsx("span",{children:s==null?void 0:s.address})]}),e.jsxs("span",{className:"fav-distance-span",children:[e.jsx("span",{className:"rounded-full bg-black w-[3px] h-[3px]",children:"."}),e.jsx("span",{children:s==null?void 0:s.distance})]})]})]}),e.jsxs("div",{className:"consultation-fee-div",children:[e.jsxs("div",{className:"",children:[e.jsx("p",{className:"consultation-heading",children:"Consultation Fees"}),e.jsxs("p",{className:"fav-fee-text",children:[e.jsx("span",{children:s==null?void 0:s.currency}),e.jsx("span",{children:s==null?void 0:s.fee})]})]}),e.jsx("div",{className:"book-now-btn-div",children:e.jsxs("button",{type:"button",className:"",children:[e.jsx("span",{children:e.jsx("img",{src:Be,alt:"icon",width:20,height:20})}),e.jsx("span",{children:"Book Now"})]})})]})]}),e.jsx("div",{className:"heart-icon-div",children:e.jsx("img",{src:Ee,alt:"heart icon"})}),e.jsxs("div",{className:"fav-rating-div",children:[e.jsx("img",{src:$e,alt:"start icon"}),e.jsx("span",{children:(c=parseFloat(s==null?void 0:s.rating))==null?void 0:c.toFixed(1)})]})]},o)})})]})})}function Re(){return e.jsx(e.Fragment,{children:e.jsx(Le,{mainHeading:"All Favourites",searchBar:!0,data:Se})})}const ne=(a,f,b)=>{let n=0;if(typeof a=="string"||typeof a=="number"){const d=String(a);if(f>0){const s=Math.min(d.length,f),o=d.slice(0,s);return n+=o.length,{newNode:o,charsUsed:n}}return n+=d.length,{newNode:d,charsUsed:n}}if(g.isValidElement(a)){let d=[],s=0;if(a.props.children){const c=Array.isArray(a.props.children)?a.props.children:[a.props.children];for(const m of c){if(s>=f)break;const{newNode:i,charsUsed:l}=ne(m,f-s);d.push(i),s+=l}}return n=s,{newNode:g.cloneElement(a,{},...d),charsUsed:n}}return{newNode:a,charsUsed:n}};function Xe({children:a,maxLength:f=100}){const[b,n]=g.useState(!1),d=g.useMemo(()=>{let c="";const m=i=>{typeof i=="string"||typeof i=="number"?c+=String(i):g.isValidElement(i)&&i.props.children&&(Array.isArray(i.props.children)?i.props.children:[i.props.children]).forEach(m)};return m(a),c},[a]),s=g.useMemo(()=>{const{newNode:c}=ne(a,f);return e.jsxs(e.Fragment,{children:[c,e.jsx("span",{className:"text-blue-500 font-bold",children:"..."})]})},[a,f]);if(d.length<=f)return e.jsx("div",{children:a});const o=c=>{c.stopPropagation(),n(!b)};return e.jsx("div",{onClick:o,className:"cursor-pointer text-blue-500",title:b?"Click to collapse":"Click to expand",children:b?a:s})}function Fe(){var r,$,R;const{id:a}=V(),[f,b]=g.useState(1),[n,d]=g.useState(1),s=10,{data:o,isLoading:c,isError:m,error:i}=X({queryKey:["petParent",a],queryFn:async()=>{if(!a)throw new Error("Pet Parent ID is missing.");return(await F.get(`${ge}/${a}`)).data},enabled:!!a}),l=(R=($=(r=o==null?void 0:o.data)==null?void 0:r.doc)==null?void 0:$.user)==null?void 0:R._id,{data:p,isLoading:A,isError:v,error:N}=X({queryKey:["orders",l,f,s],queryFn:async()=>{if(!l)throw new Error("User ID is missing for fetching orders.");return(await F.get(`${xe}?userObjectId=${l}&page=${f}&pageSize=${s}`)).data},enabled:!!l,keepPreviousData:!0});g.useEffect(()=>{var y;((y=p==null?void 0:p.data)==null?void 0:y.pages)!==void 0&&d(p.data.pages||1)},[p]);const w=g.useMemo(()=>{var u;const y=new Set;return(u=p==null?void 0:p.data)!=null&&u.docs&&p.data.docs.forEach(h=>{var k;if(h.product==="Appointment"&&((k=h.appointment)!=null&&k.doctor)){const B=typeof h.appointment.doctor=="object"?h.appointment.doctor._id:h.appointment.doctor;B&&y.add(B)}}),Array.from(y)},[p]),{data:P,isLoading:j,isError:x,error:D}=X({queryKey:["doctors",w],queryFn:async()=>{const y={};if(w.length>0){const u=w.map(async h=>{try{const k=await F.get(`${he}/${String(h)}`);y[h]=k.data.data.doc}catch(k){console.error(`Failed to fetch doctor ${h}:`,k),y[h]={fullName:"Unknown Doctor",user:{image:null}}}});await Promise.all(u)}return y},enabled:w.length>0}),L=c||A||j,E=m||v||x,C=i||N||D,S=(y,u,h)=>{y.stopPropagation(),console.log(u,`${h} btn clicked`)},t=g.useMemo(()=>{var y;return(y=p==null?void 0:p.data)!=null&&y.docs?p.data.docs.map(u=>{var _;let h="N/A",k="N/A",B="Unknown",O="N/A",H=null;if(u.product==="OfferedLabTest"&&u.bookedLabTest){B="Lab Test",O=new Date(u.bookedLabTest.createdAt).toLocaleDateString();const I=u.bookedLabTest.labHeadOffice||u.bookedLabTest.labBranchOffice;I?h=J(I.image,I.title):h="Unknown Lab";const M=u.bookedLabTest.offeredLabTests.map(G=>G.title).join(", ");H=e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-black",children:"Lab Test Collection:"})," ",u.bookedLabTest.sampleCollectionMethod||"N/A",e.jsx("br",{}),e.jsx("span",{className:"font-bold text-black",children:"Test Names:"})," ",M||"N/A"]})}else if(u.product==="Appointment"&&u.appointment){B="Appointment";const I=typeof u.appointment.doctor=="object"?u.appointment.doctor._id:u.appointment.doctor,M=P?P[I]:null;M&&M.fullName?h=J((_=M.user)==null?void 0:_.image,M.fullName):h=J(null,"Unknown Doctor"),O=new Date(u.appointment.createdAt).toLocaleDateString();const G=new Date(u.appointment.slot).toLocaleString();H=e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-black",children:"Appointment Type:"})," ",u.appointment.type||"N/A",e.jsx("br",{}),e.jsx("span",{className:"font-bold text-black",children:"Appointment Time:"})," ",G]})}return k=e.jsx(Xe,{maxLength:6,children:H}),{id:u.longAutoIncrementId,bookedFrom:h,description:k,orderDate:new Date(u.createdAt).toLocaleDateString(),orderType:B,bookedOn:O,amount:je(u.currencyCode,u.amount),status:u.internalTransactionStatus,originalItem:u}}):[]},[p,P]);return E?e.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",(C==null?void 0:C.message)||"Failed to fetch data."]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{isLoading:L,isError:E,fetchedData:t,data:t,mainHeading:"Payment Invoices",searchBar:!1,headings:["ID #","Booked From","Description","Order Date","Order Type","Booked On","Amount","Status"],cells:["id","bookedFrom","description","orderDate","orderType","bookedOn","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:Y}],actionHandler:S,setCurrentPage:b,pages:n,currentPage:f})})})}function Oe(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(Ne,{})})})}function ia(){var m,i,l,p;const{id:a}=V(),{data:f,error:b}=X({queryKey:["fetch-pet-parent-profile-data",{id:a}],queryFn:()=>F.get(`/pet-parent/${a}`)});g.useEffect(()=>{b&&W.error(z(b))},[b]);const n=(i=(m=f==null?void 0:f.data)==null?void 0:m.data)==null?void 0:i.doc,d=g.useMemo(()=>["admin"],[]),[s,o]=g.useState(1);g.useEffect(()=>{const A=ee.find(v=>Z(v.requiredRoles,d));A?o(A.id):(W.error("User has no access to any tabs"),o(null))},[d]);const c={profileName:(n==null?void 0:n.fullName)||((l=n==null?void 0:n.user)==null?void 0:l.username)||e.jsxs("span",{children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),profession:"",employeeId:"",profileImage:((p=n==null?void 0:n.user)==null?void 0:p.image)||(n==null?void 0:n.image),phone:Ae(n==null?void 0:n.phone)||"N/A",email:(n==null?void 0:n.email)||"N/A",cnic:"",country:(n==null?void 0:n.countryName)||"N/A",state:(n==null?void 0:n.province)||(n==null?void 0:n.state)||"N/A",city:(n==null?void 0:n.city)||"N/A",address:(n==null?void 0:n.address)||"N/A"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[300px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Pet Parent"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Profile"})})})]}),s!==null&&e.jsx(oe,{activeTab:s,setActiveTab:o,roles:d,hasRequiredRole:Z,tabs:ee,profileData:c}),e.jsxs("div",{className:"",children:[s===1?e.jsx(Pe,{}):"",s===2?e.jsx(De,{}):"",s===3?e.jsx(ke,{}):"",s===4?e.jsx(Ie,{}):"",s===5?e.jsx(Re,{}):"",s===6?e.jsx(Fe,{}):"",s===7?e.jsx(Oe,{}):""]})]})})}export{ia as default};
