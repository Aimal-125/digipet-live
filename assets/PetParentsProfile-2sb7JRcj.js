import{r as p,m as V,j as e,D as _,k as R,V as W,h as z,A as L,u as J,w as ee,z as ae,B as se}from"./index-CCalecE_.js";import{h as G,T as ne}from"./hasRequiredRole-DbPbXhv7.js";import{I as re,a as ie}from"./IsError-DyiOcKGU.js";import{N as te}from"./NoData-DOE3w1om.js";import{P as oe,R as K}from"./ResponsiveTable-Cy4FZobb.js";import{a as le,A as ce,B as de,P as me,O as ue,D as fe}from"./apiEndpoints-BwAEE1pY.js";import{V as U}from"./view-icon-DsPpK1Wz.js";import{E as Z}from"./edit-icon-CSd65PgS.js";import{S as Y}from"./Status-DdUvEVxk.js";/* empty css                */import{W as ge,a as pe,R as he}from"./ReviewsComponent-CEuSzQgb.js";import{D as xe}from"./delete-icon-FU5lMFq3.js";import{I as be}from"./index-DcLfSPDD.js";import{n as ve}from"./nameWithImage-fydCjStV.js";import{f as je}from"./index-Bwbnr2s7.js";import"./ButtonClipLoader-CFvhz7AS.js";import"./index-C4kpwAHd.js";import"./index-S3ECSp8r.js";import"./index-3aV5NVat.js";import"./index-C_tz7SfQ.js";const Q=[{id:1,name:"Pet Profile",requiredRoles:["admin"]},{id:2,name:"All Appointments",requiredRoles:["admin"]},{id:3,name:"Lab Tests",requiredRoles:["admin"]},{id:4,name:"Wallet",requiredRoles:["admin"]},{id:5,name:"Favorites",requiredRoles:["admin"]},{id:6,name:"Payment Invoices",requiredRoles:["admin"]},{id:7,name:"Reviews",requiredRoles:["admin"]}];function ye({pet:a}){var A,w,x;const[h,N]=p.useState(window.innerWidth>768);p.useEffect(()=>{const u=()=>{N(window.innerWidth>768)};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]);const[r,g]=p.useState(0),s=p.useRef(!1),l=300,m=[];a!=null&&a.gallery&&a.gallery.length>0?m.push(...a.gallery.map(u=>`${V}/${u}`)):a!=null&&a.image?m.push(`${V}/${a.image}`):(A=a==null?void 0:a.petCategory)!=null&&A.image&&m.push(`${V}/${a.petCategory.image}`);const c=m.length,d=u=>{g(u)},t=()=>{s.current||(s.current=!0,g(u=>u===0?c-1:u-1),setTimeout(()=>{s.current=!1},l))},o=()=>{s.current||(s.current=!0,g(u=>u===c-1?0:u+1),setTimeout(()=>{s.current=!1},l))};if(p.useEffect(()=>()=>{},[]),c===0)return null;const P=m[r],y=new Date().getFullYear(),v=a!=null&&a.age?y-a.age:"N/A";return e.jsxs("div",{className:"flex flex-col min-[1200px]:flex-row gap-5 bg-white rounded-[20px] p-5",children:[h?e.jsxs("div",{className:"flex flex-col min-[1024px]:flex-row gap-4",children:[e.jsx("div",{className:"flex min-[1024px]:flex-col min-[1024px]:h-[430px] p-2 min-[1024px]:p-4 items-center gap-2 overflow-auto min-[1024px]:overflow-x-hidden",children:m.map((u,I)=>e.jsx("div",{className:"flex",children:e.jsx("button",{className:`w-[60px] h-[60px] inline-flex cursor-pointer rounded-md focus:outline-none ${r===I?"highlight-shadow":""}`,onClick:()=>d(I),"aria-label":`View image ${I+1} for ${a==null?void 0:a.name}`,children:e.jsx("img",{src:u,alt:`Thumbnail of ${a==null?void 0:a.name} ${I+1}`,className:"w-full h-full inline-flex object-cover rounded-md"})})},I))}),e.jsx("div",{className:"flex w-full min-[1200px]:w-[430px] h-[430px] mx-auto rounded-[20px]",children:e.jsx("img",{src:P,alt:`Image of ${a==null?void 0:a.name} ${r+1}`,className:"w-full h-full object-cover inline-flex rounded-[20px]"})})]}):e.jsxs("div",{className:"relative w-full h-full max-w-md mx-auto rounded-[20px] overflow-hidden",children:[e.jsx("img",{src:P,alt:`Image of ${a==null?void 0:a.name} ${r+1}`,className:"w-full h-full object-cover rounded-[20px] inline-flex"}),c>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t,className:"absolute top-1/2 left-2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition cursor-pointer z-10","aria-label":`Previous image for ${a==null?void 0:a.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:o,className:"absolute top-1/2 right-2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition cursor-pointer z-10","aria-label":`Next image for ${a==null?void 0:a.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),c>0&&e.jsxs("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-gray-800 bg-opacity-50 text-white text-sm px-3 py-1 rounded-full z-10",children:[r+1," / ",c]})]}),e.jsxs("div",{className:"pet-details-container",children:[e.jsxs("div",{className:"pet-name-container",children:[e.jsx("p",{className:"pet-name",children:(a==null?void 0:a.name)||"N/A"})," ",e.jsxs("p",{className:"breeder-text",children:[e.jsx("span",{children:"Pet Parent:"})," ",e.jsx("span",{children:((w=a==null?void 0:a.petParent)==null?void 0:w.fullName)||"N/A"})]})]}),e.jsxs("div",{className:"pet-details-div",children:[e.jsxs("div",{className:"pet-details-headings-container",children:[e.jsx("p",{children:"Type:"}),e.jsx("p",{children:"Breed:"}),e.jsx("p",{children:"Gender:"}),e.jsx("p",{children:"Registry:"}),e.jsx("p",{children:"Born:"}),e.jsx("p",{children:"Blood Group:"}),e.jsx("p",{children:"Description:"})]}),e.jsxs("div",{className:"pet-detail-fields-container",children:[e.jsx("p",{children:((x=a==null?void 0:a.petCategory)==null?void 0:x.title)||"N/A"}),e.jsx("p",{children:(a==null?void 0:a.breed)||"N/A"})," ",e.jsx("p",{children:(a==null?void 0:a.gender)||"N/A"})," ",e.jsx("p",{children:(a==null?void 0:a.registry)||"N/A"})," ",e.jsx("p",{children:v}),e.jsx("p",{children:(a==null?void 0:a.bloodGroup)||"N/A"}),e.jsx("p",{className:"text-wrap",children:(a==null?void 0:a.description)||"N/A"})]})]}),e.jsx("div",{className:"pet-edit-profile-btn-div mt-auto",children:e.jsx("button",{type:"button",children:"Edit Profile"})})]})]})}function Ne(){var A,w;const{id:a}=_(),[h,N]=p.useState(1),[r,g]=p.useState(1),s=3,[l,m]=p.useState(0),c=["fetch-pets",{currentPage:h,id:a,limit:s}],{isLoading:d,data:t,isError:o,error:P}=R({queryKey:c,queryFn:async()=>{const x=`${le}?petParentObjectId=${a}&page=${h}&pageSize=${s}`;return L.get(x)}});p.useEffect(()=>{if(t){const{data:x}=t.data,u=(x==null?void 0:x.docs)||[],I=(x==null?void 0:x.pages)||1;m(u==null?void 0:u.length),g(I)}o&&W.error(z(P))},[t,o,P]);const y=x=>{N(x)},v=((w=(A=t==null?void 0:t.data)==null?void 0:A.data)==null?void 0:w.docs)||[];return e.jsxs("div",{className:"flex flex-col gap-5",children:[d?e.jsx(re,{}):o?e.jsx(ie,{}):(v==null?void 0:v.length)===0?e.jsx(te,{}):v==null?void 0:v.map(x=>e.jsx(ye,{pet:x},x._id)),e.jsx("div",{className:"flex justify-center",children:r>1&&e.jsx(oe,{totalPages:r,currentPage:h,setCurrentPage:y})})]})}function Pe(){var x,u,I,T,$,B;const{id:a}=_(),[h,N]=p.useState(1),[r,g]=p.useState(""),s=10,l=J(),m=["allAppointments",{petParentId:a,page:h,limit:s}],{isLoading:c,data:d,isError:t,error:o,isSuccess:P}=R({queryKey:m,queryFn:()=>L.get(ce,{params:{petParent:a,page:h,pageSize:s}}),enabled:!!a,keepPreviousData:!0,onSuccess:S=>{},onError:S=>{W.error(z(S))}}),y=((u=(x=d==null?void 0:d.data)==null?void 0:x.data)==null?void 0:u.docs)||[],v=((T=(I=d==null?void 0:d.data)==null?void 0:I.data)==null?void 0:T.pages)||1;(B=($=d==null?void 0:d.data)==null?void 0:$.data)!=null&&B.docsCount;const A=(S,n,i)=>{S.stopPropagation(),i==="view"?l(`/appointments/view/${n==null?void 0:n._id}`):i==="edit"&&l(`/appointments/edit/${n==null?void 0:n._id}`)},w=Array.from({length:(y==null?void 0:y.length)||0},(S,n)=>{var E,j,f,b,D;const i=y[n],C=i!=null&&i.slot?new Date(i.slot).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return{_id:i==null?void 0:i._id,id:((E=i==null?void 0:i.order)==null?void 0:E.longAutoIncrementId)||"N/A",doctorName:((j=i==null?void 0:i.doctor)==null?void 0:j.fullName)||"N/A",petParents:((f=i==null?void 0:i.petParent)==null?void 0:f.fullName)||"N/A",appointmentDate:C,type:(i==null?void 0:i.type)||"N/A",fee:`${parseFloat((b=i==null?void 0:i.order)==null?void 0:b.amount).toFixed(2)||"N/A"} ${((D=i==null?void 0:i.order)==null?void 0:D.currencyCode)||""}`,appointmentStatus:e.jsx(Y,{status:i==null?void 0:i.status}),paymentStatus:e.jsx(Y,{status:i==null?void 0:i.paymentStatus})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{data:w,mainHeading:"All Appointments",searchBar:!1,keyword:r,isLoading:c,isError:t,fetchedData:y,setKeyword:g,headings:["Order #","Doctor Name","Pet Parents","Appointment Booked","Type","Fee","Appointment Status","Payment Status"],cells:["id","doctorName","petParents","appointmentDate","type","fee","appointmentStatus","paymentStatus"],status:!1,actions:!1,actionTypes:[{action:"view",icon:U},{action:"edit",icon:Z}],actionHandler:A,setCurrentPage:N,pages:v,currentPage:h})})})}function Ae(){var u,I,T,$,B,S;const{id:a}=_(),h=J(),N=ee(),[r,g]=p.useState(1),[s,l]=p.useState(""),m=10,c=["petParentLabTests",{petParentId:a,page:r,limit:m,keyword:s}],{isLoading:d,data:t,isError:o,error:P,isSuccess:y}=R({queryKey:c,queryFn:()=>L.get(de,{params:{petParent:a,page:r,pageSize:m}}),enabled:!!a,keepPreviousData:!0,onError:n=>{W.error(z(n))}}),v=((I=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:I.docs)||[],A=(($=(T=t==null?void 0:t.data)==null?void 0:T.data)==null?void 0:$.pages)||1;(S=(B=t==null?void 0:t.data)==null?void 0:B.data)!=null&&S.docsCount;const w=(n,i,C)=>{n.stopPropagation(),C==="view"&&h(`/booked-lab-tests/details/${i==null?void 0:i._id}`)},x=v.map(n=>{var f,b,D,X,M,F,O;const i=((f=n==null?void 0:n.offeredLabTests)==null?void 0:f.map(H=>H==null?void 0:H.title).filter(Boolean).join(", "))||"N/A",C=(n==null?void 0:n.sampleCollectionMethod)==="Home"?"Home Collection":n!=null&&n.sampleCollectionMethod?n.sampleCollectionMethod:((b=n==null?void 0:n.labBranchOffice)==null?void 0:b.title)||((D=n==null?void 0:n.labHeadOffice)==null?void 0:D.title)||"N/A",E=n!=null&&n.createdAt?new Date(n.createdAt).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",j=(X=n==null?void 0:n.medicalRecord)!=null&&X.image?e.jsx("button",{type:"button",className:"cursor-pointer text-blue-600 inline-block",onClick:()=>{var H;N(ae(!0)),N(se({type:"medical-record",data:{userId:a,report:(H=n==null?void 0:n.medicalRecord)==null?void 0:H.image,baseURL:V}}))},children:"View Report"}):e.jsx("span",{className:"text-gray-500",children:"N/A"});return{_id:n==null?void 0:n._id,id:(n==null?void 0:n.longAutoIncrementId)||"N/A",test:i,lab:((M=n==null?void 0:n.labHeadOffice)==null?void 0:M.title)||"N/A",collBy:C,fee:`${parseInt((F=n==null?void 0:n.order)==null?void 0:F.amount).toFixed(2)||"N/A"} ${((O=n==null?void 0:n.order)==null?void 0:O.currencyCode)||""}`,bookedDate:E,result:j,status:e.jsx(Y,{status:n==null?void 0:n.status})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{isLoading:d,isError:o,fetchedData:v,data:x,mainHeading:"Lab Tests",searchBar:!1,keyword:s,setKeyword:l,headings:["Order #","Test","Lab","Collected By","Fee","Booked On","Result","Status","Action"],cells:["id","test","lab","collBy","fee","bookedDate","result","status"],status:!1,actions:!0,actionTypes:[{action:"view",icon:U}],actionHandler:w,setCurrentPage:g,pages:A,currentPage:r})})})}const q=[{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Pending"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Pending"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"},{id:"#20462",accountNumber:"5396 5250 1908 XXXX",reason:"Appointment",transactionDate:"13/05/2022",amount:"$100.95",status:"Completed"}];function we(){const[a,h]=p.useState(1),[N,r]=p.useState(3),g=(m,c,d)=>{m.stopPropagation(),console.log(c,`${d} btn clicked`)},l=Array.from({length:10},(m,c)=>{var d,t,o,P,y,v;return{id:(d=q[c])==null?void 0:d.id,accountNumber:(t=q[c])==null?void 0:t.accountNumber,reason:(o=q[c])==null?void 0:o.reason,transactionDate:(P=q[c])==null?void 0:P.transactionDate,amount:(y=q[c])==null?void 0:y.amount,status:(v=q[c])==null?void 0:v.status}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(ge,{transaction:!0,bankDetails:!1}),e.jsx("div",{className:"",children:e.jsx(K,{isLoading:!1,isError:!1,fetchedData:l,data:l,mainHeading:"",searchBar:!1,headings:["ID #","Account #","Reason","Debited/Credited On","Amount","Status"],cells:["id","accountNumber","reason","transactionDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:U},{action:"edit",icon:Z},{action:"delete",icon:xe}],actionHandler:g,setCurrentPage:h,pages:N})})]})})}const De="/digipet-live/images/pet-parent-profile/fav-doc-1.svg",k="/digipet-live/images/pet-parent-profile/fav-doc-2.svg",Ie=[{id:1,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:De,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:2,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:3,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:4,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:5,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:6,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:7,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:8,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:9,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:10,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:11,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"},{id:12,rating:"5",profession:"Pediatrician",available:"Available",name:"Dr. Harold Bryant",image:k,address:"Beckley, WV",distance:"30 MIn",currency:"Rs.",fee:"500"}],ke="/digipet-live/images/location-icon.svg",Se="/digipet-live/images/book-now-icon.svg",Be="/digipet-live/images/heart-icon.svg",$e="/digipet-live/images/red-star-icon.svg";function Ce({data:a={},mainHeading:h="",searchBar:N=!1}){const g=Array.from({length:12},(s,l)=>{var m,c,d,t,o,P,y,v,A,w;return{id:(m=a[l])==null?void 0:m.id,rating:(c=a[l])==null?void 0:c.rating,profession:(d=a[l])==null?void 0:d.profession,available:(t=a[l])==null?void 0:t.available,name:(o=a[l])==null?void 0:o.name,image:(P=a[l])==null?void 0:P.image,address:(y=a[l])==null?void 0:y.address,distance:(v=a[l])==null?void 0:v.distance,currency:(A=a[l])==null?void 0:A.currency,fee:(w=a[l])==null?void 0:w.fee}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[572px]:flex-col items-center justify-between gap-[20px]",children:[e.jsx("h2",{className:"m-0 font-[700] text-[24px] text-[#252C62] py-0 px-[20px]",children:h}),N?e.jsx("div",{className:"search-bar",children:e.jsxs("div",{className:"flex items-center border border-gray-300 bg-white rounded-[20px]",children:[e.jsx("span",{className:"pl-2 text-gray-500",children:e.jsx(be,{})}),e.jsx("input",{className:"w-full py-1 px-2 outline-none",type:"search",name:"search",id:"search","aria-label":"Search",placeholder:"Search"})]})}):""]}),e.jsx("div",{className:"cards-container",children:g==null?void 0:g.map((s,l)=>{var m;return e.jsxs("div",{className:`${(g==null?void 0:g.length)===1?"w-[320px]":""} fav-card`,children:[e.jsx("div",{className:"fav-img-box",children:e.jsx("img",{src:s==null?void 0:s.image,alt:s==null?void 0:s.name})}),e.jsxs("div",{className:"fav-details-box",children:[e.jsxs("div",{className:"profession-div relative",children:[e.jsx("p",{className:"profession-name",children:s==null?void 0:s.profession}),e.jsxs("p",{className:"availability-text",children:[e.jsx("span",{className:"rounded-full w-[3px] h-[3px] bg-[#1dc683]"}),e.jsx("span",{children:s==null?void 0:s.available})]}),e.jsx("span",{className:"absolute left-0 bg-black w-[2px] h-[24px]"})]}),e.jsxs("div",{className:"fav-doc-name-div",children:[e.jsx("p",{className:"fav-doc-name",children:s==null?void 0:s.name}),e.jsxs("p",{className:"fav-doc-location-div",children:[e.jsxs("span",{className:"fav-location-span",children:[e.jsx("span",{children:e.jsx("img",{src:ke,alt:"icon",width:20,height:20})}),e.jsx("span",{children:s==null?void 0:s.address})]}),e.jsxs("span",{className:"fav-distance-span",children:[e.jsx("span",{className:"rounded-full bg-black w-[3px] h-[3px]",children:"."}),e.jsx("span",{children:s==null?void 0:s.distance})]})]})]}),e.jsxs("div",{className:"consultation-fee-div",children:[e.jsxs("div",{className:"",children:[e.jsx("p",{className:"consultation-heading",children:"Consultation Fees"}),e.jsxs("p",{className:"fav-fee-text",children:[e.jsx("span",{children:s==null?void 0:s.currency}),e.jsx("span",{children:s==null?void 0:s.fee})]})]}),e.jsx("div",{className:"book-now-btn-div",children:e.jsxs("button",{type:"button",className:"",children:[e.jsx("span",{children:e.jsx("img",{src:Se,alt:"icon",width:20,height:20})}),e.jsx("span",{children:"Book Now"})]})})]})]}),e.jsx("div",{className:"heart-icon-div",children:e.jsx("img",{src:Be,alt:"heart icon"})}),e.jsxs("div",{className:"fav-rating-div",children:[e.jsx("img",{src:$e,alt:"start icon"}),e.jsx("span",{children:(m=parseFloat(s==null?void 0:s.rating))==null?void 0:m.toFixed(1)})]})]},l)})})]})})}function Te(){return e.jsx(e.Fragment,{children:e.jsx(Ce,{mainHeading:"All Favourites",searchBar:!0,data:Ie})})}function Ee(){var i,C,E;const{id:a}=_(),[h,N]=p.useState(1),[r,g]=p.useState(1),s=10,{data:l,isLoading:m,isError:c,error:d}=R({queryKey:["petParent",a],queryFn:async()=>{if(!a)throw new Error("Pet Parent ID is missing.");return(await L.get(`${me}/${a}`)).data},enabled:!!a}),t=(E=(C=(i=l==null?void 0:l.data)==null?void 0:i.doc)==null?void 0:C.user)==null?void 0:E._id,{data:o,isLoading:P,isError:y,error:v}=R({queryKey:["orders",t,h,s],queryFn:async()=>{if(!t)throw new Error("User ID is missing for fetching orders.");return(await L.get(`${ue}?userObjectId=${t}&page=${h}&pageSize=${s}`)).data},enabled:!!t,keepPreviousData:!0});p.useEffect(()=>{var j;((j=o==null?void 0:o.data)==null?void 0:j.pages)!==void 0&&g(o.data.pages||1)},[o]);const A=p.useMemo(()=>{var f;const j=new Set;return(f=o==null?void 0:o.data)!=null&&f.docs&&o.data.docs.forEach(b=>{var D;b.product==="Appointment"&&((D=b.appointment)!=null&&D.doctor)&&j.add(b.appointment.doctor)}),Array.from(j)},[o]),{data:w,isLoading:x,isError:u,error:I}=R({queryKey:["doctors",A],queryFn:async()=>{const j={};if(A.length>0){const f=A.map(async b=>{try{const D=await L.get(`${fe}/${b}`);j[b]=D.data.data.doc}catch(D){console.error(`Failed to fetch doctor ${b}:`,D),j[b]={fullName:"Unknown Doctor",user:{image:null}}}});await Promise.all(f)}return j},enabled:A.length>0}),T=m||P||x,$=c||y||u,B=d||v||I,S=(j,f,b)=>{j.stopPropagation(),console.log(f,`${b} btn clicked`)},n=p.useMemo(()=>{var j;return(j=o==null?void 0:o.data)!=null&&j.docs?o.data.docs.map(f=>{var M;let b="N/A",D="Unknown",X="N/A";if(f.product==="OfferedLabTest"&&f.bookedLabTest)D="Lab Test",b="Lab Service",X=new Date(f.bookedLabTest.createdAt).toLocaleDateString();else if(f.product==="Appointment"&&f.appointment){D="Appointment";const F=f.appointment.doctor,O=w?w[F]:null;O?b=ve((M=O.user)==null?void 0:M.image,O.fullName):F?b=`Doctor ID: ${F}`:b="N/A",X=new Date(f.appointment.createdAt).toLocaleDateString()}return{id:f.longAutoIncrementId,doctor:b,orderDate:new Date(f.createdAt).toLocaleDateString(),orderType:D,bookedOn:X,amount:pe(f.currencyCode,f.amount),status:f.internalTransactionStatus,originalItem:f}}):[]},[o,w]);return $?e.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",(B==null?void 0:B.message)||"Failed to fetch data."]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(K,{isLoading:T,isError:$,fetchedData:n,data:n,mainHeading:"Payment Invoices",searchBar:!1,headings:["ID #","Service Provider","Order Date","Order Type","Booked On","Amount","Status"],cells:["id","doctor","orderDate","orderType","bookedOn","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:U}],actionHandler:S,setCurrentPage:N,pages:r,currentPage:h})})})}function Re(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(he,{})})})}function sa(){var c,d,t,o;const{id:a}=_(),{data:h,error:N}=R({queryKey:["fetch-pet-parent-profile-data",{id:a}],queryFn:()=>L.get(`/pet-parent/${a}`)});p.useEffect(()=>{N&&W.error(z(N))},[N]);const r=(d=(c=h==null?void 0:h.data)==null?void 0:c.data)==null?void 0:d.doc,g=p.useMemo(()=>["admin"],[]),[s,l]=p.useState(1);p.useEffect(()=>{const P=Q.find(y=>G(y.requiredRoles,g));P?l(P.id):(W.error("User has no access to any tabs"),l(null))},[g]);const m={profileName:(r==null?void 0:r.fullName)||((t=r==null?void 0:r.user)==null?void 0:t.username)||e.jsxs("span",{children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),profession:"",employeeId:"",profileImage:((o=r==null?void 0:r.user)==null?void 0:o.image)||(r==null?void 0:r.image),phone:je(r==null?void 0:r.phone)||"N/A",email:(r==null?void 0:r.email)||"N/A",cnic:"",country:(r==null?void 0:r.countryName)||"N/A",state:(r==null?void 0:r.province)||(r==null?void 0:r.state)||"N/A",city:(r==null?void 0:r.city)||"N/A",address:(r==null?void 0:r.address)||"N/A"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[300px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Pet Parent"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Profile"})})})]}),s!==null&&e.jsx(ne,{activeTab:s,setActiveTab:l,roles:g,hasRequiredRole:G,tabs:Q,profileData:m}),e.jsxs("div",{className:"",children:[s===1?e.jsx(Ne,{}):"",s===2?e.jsx(Pe,{}):"",s===3?e.jsx(Ae,{}):"",s===4?e.jsx(we,{}):"",s===5?e.jsx(Te,{}):"",s===6?e.jsx(Ee,{}):"",s===7?e.jsx(Re,{}):""]})]})})}export{sa as default};
