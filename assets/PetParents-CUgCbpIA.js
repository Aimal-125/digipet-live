import{r as o,u as z,w as K,k as O,V as Q,h as G,j as a,x as J,M as W,z as w,B,A as X}from"./index-DqT0A0WV.js";import{D as Y}from"./DashboardContainer1-BvCS8xoW.js";import{R as Z}from"./ResponsiveTable-FCQxtvDA.js";import{f as tt}from"./index-BJhW3WRQ.js";/* empty css                */import"./Status-HTHKglWX.js";import"./index-D5TUXJLt.js";import"./NoData-DRT_4vkO.js";import"./index-CrxefEGs.js";import"./index-DE8dskU1.js";import"./index-BMn7NW-M.js";import"./index-BQbMBTEc.js";function mt(){var g,h;const[d,x]=o.useState(1),[j,S]=o.useState(1),[i,C]=o.useState(""),[I,T]=o.useState(0),[l,L]=o.useState(null),[p,E]=o.useState(null),m=10,V=z(),c=K(),_=["fetch-pet-parents",{currentPage:d,limit:m,keyword:i,startDate:l,endDate:p}],{isLoading:$,data:n,isError:M,error:u}=O({queryKey:_,queryFn:()=>{let e=`/pet-parent/?page=${d}&pageSize=${m}`;return l&&(e+=`&from=${l}`),p&&(e+=`&to=${p}`),i&&(e+=`&keyword=${i}`),X.get(e)}}),[s,R]=o.useState((h=(g=n==null?void 0:n.data)==null?void 0:g.data)==null?void 0:h.docs);o.useEffect(()=>{if(n){const{data:{data:{docs:e}}}=n,{data:{data:{pages:t}}}=n;R(e),S(t),T(e==null?void 0:e.length)}u&&Q.error(G(u))},[n,u,i]);const F=(e,t,r)=>{e.stopPropagation(),r==="view"&&V(`/pet-parents/profile/${t==null?void 0:t._id}`)},H=[{label:"Total Pet Parents",totalValue:40689,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"Active Pet Parents",totalValue:10293,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Today Registered",totalValue:89e3,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked",totalValue:2040,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],U=Array.from({length:I},(e,t)=>{var r,f,P,y,v,b,k,N,A,D;return{_id:(r=s[t])==null?void 0:r._id,id:((f=s[t])==null?void 0:f.longAutoIncrementId)||((P=s[t])==null?void 0:P.autoIncrementId)||"N/A",parentsName:((y=s[t])==null?void 0:y.fullName)||"N/A",appointmentBook:(v=s[t])==null?void 0:v.appointmentsBookedCount,labTestsBooked:(b=s[t])==null?void 0:b.labTestsBookedCount,country:((k=s[t])==null?void 0:k.countryName)||"N/A",phone:tt((N=s[t])==null?void 0:N.phone)||"N/A",status:(D=(A=s[t])==null?void 0:A.user)==null?void 0:D.status}}),q=(e,t,r)=>{e.stopPropagation(),r==="change-password"&&(c(w(!0)),c(B({type:"change-password",data:{userId:t._id}}))),r==="block"&&(c(w(!0)),c(B({type:"block",data:{userId:t._id}})))};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:a.jsx("h1",{className:"main-heading",children:"Pet Parents"})}),a.jsx("div",{className:"",children:a.jsx(Y,{data:H})}),a.jsx("div",{className:"",children:a.jsx(Z,{datePicker:!0,setStartDate:L,setEndDate:E,data:U,mainHeading:"Pet Parents",searchBar:!0,isLoading:$,isError:M,fetchedData:s,headings:["ID #","Parent Name","Appointment Booked","Lab Tests Booked","Country","Phone","Status","Action"],cells:["id","parentsName","appointmentBook","labTestsBooked","country","phone"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"}],actionHandler:F,currentPage:d,setCurrentPage:x,pages:j,navigation:!0,navigationLink:"/pet-parents/profile",headingNameForNavigationOnMobile:"Parents Name",setKeyword:C,moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:a.jsx(J,{})},{label:"Block",action:"block",icon:a.jsx(W,{})}],moreActionsHandler:q})})]})})}export{mt as default};
