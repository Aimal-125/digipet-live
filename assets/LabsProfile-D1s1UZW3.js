import{j as e,m as J,G as H,k as E,r as u,V as R,h as C,A as F,u as ae,g as se}from"./index-CtF5NqjV.js";import{h as z,T as ne}from"./hasRequiredRole-osJ5szYF.js";import{A as re,d as P,r as v,a as D}from"./doctorReportsData-DpG3T3-n.js";import{R as B,P as te}from"./ResponsiveTable-BVHihXma.js";import{S as ie}from"./Status-CFvwze7x.js";import{V as L}from"./view-icon-DsPpK1Wz.js";import{I as oe,a as le,N as ce}from"./NoData-CRNyNY9D.js";import{B as de}from"./apiEndpoints-D7ff-bgI.js";import{f as X}from"./index-CTnICA7r.js";import{E as me}from"./ExpandableText-D797LsxK.js";import{a as Y,W as Z,R as ue}from"./ReviewsComponent-DR0pEwHm.js";import{E as I}from"./edit-icon-CSd65PgS.js";import{D as O}from"./delete-icon-FU5lMFq3.js";import{n as ee}from"./nameWithImage-oYAI2e-8.js";import"./ButtonClipLoader-CrkQjnCO.js";import"./index-CP8FX3G0.js";/* empty css                */import"./index-R1RIAz4U.js";import"./index-BygXZwzy.js";const pe="/digipet-live/images/doctor-profile/location-img.svg",G="/digipet-live/images/doctor-profile/clinic-img.svg",Q=[{id:1,name:"Lab Details",requiredRoles:["admin"]},{id:2,name:"Booked Lab Test",requiredRoles:["admin"]},{id:3,name:"Withdraws",requiredRoles:["admin"]},{id:4,name:"Payouts",requiredRoles:["admin"]},{id:5,name:"Reviews",requiredRoles:["admin"]},{id:6,name:"Reports",requiredRoles:["admin"]},{id:7,name:"Branches",requiredRoles:["admin"]}];function xe({tests:d,mainHeading:a=""}){return!d||d.length===0?null:e.jsxs("div",{className:"bg-white rounded-[20px] p-5",children:[e.jsx("h2",{className:"text-[20px] font-[600] mb-4",children:a}),e.jsx("div",{className:"space-y-4",children:d.map((o,l)=>{var m;return e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[o.image&&e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${J}/${o==null?void 0:o.image}`,alt:o.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:o.name}),o.price&&e.jsxs("p",{className:"text-gray-600 text-sm",children:[o.currencyCode," ",(m=o.price)==null?void 0:m.toFixed(2)]})]})]},l)})})]})}function fe(){var i,f,x,n,p;const{id:d}=H(),{data:a,error:o}=E({queryKey:["fetch-approved-lab-details",{id:d}],queryFn:()=>F.get(`/offered-lab-test?labHeadOffice=${d}`)}),l=(f=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:f.docs;u.useEffect(()=>{o&&R.error(C(o))},[o]);const m=l==null?void 0:l.map(r=>{var h,j;return{name:((h=r==null?void 0:r.labTest)==null?void 0:h.title)||(r==null?void 0:r.title)||"N/A",price:r==null?void 0:r.price,currencyCode:r==null?void 0:r.currencyCode,image:((j=r==null?void 0:r.labTest)==null?void 0:j.image)||(r==null?void 0:r.image)}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"doctor-boxes-main-container",children:[e.jsxs("div",{className:"doctor-profile-box-1 flex flex-col gap-5",children:[e.jsxs("div",{className:"doctor-about-me-container rounded-[20px] bg-white p-5 flex flex-col gap-5",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"About me"}),e.jsx("p",{className:"text-[#969696]",children:l&&l.length>0&&((n=(x=l[0])==null?void 0:x.labHeadOffice)==null?void 0:n.bio)||"N/A"})]}),e.jsx("div",{className:"doctor-skills-container",children:m&&m.length>0&&e.jsx(xe,{mainHeading:"Available Tests",tests:m})})]}),e.jsx("div",{className:"doctor-profile-box-2 bg-white p-5 rounded-[20px] flex flex-col gap-5",children:e.jsxs("div",{className:"doctor-detailed-about-me-container flex flex-col gap-5",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex w-[40px] h-[40px] bg-[#F1F5F9] rounded-[6px] p-2",children:e.jsx("img",{className:"inline-flex w-full h-full",src:re,alt:"about me icon"})}),e.jsx("span",{className:"text-[#4C63BD] font-[600] text-[20px]",children:"About me"})]}),e.jsx("div",{className:"doctor-description-text-div",children:e.jsx("p",{className:"text-[#969696]",children:l&&l.length>0&&((p=l[0])==null?void 0:p.description)||"N/A"})})]})})]})})}function ge(){var b,T,y,A,c,w;const{id:d}=H();ae();const[a,o]=u.useState(1),[l,m]=u.useState(""),i=10,f=["labBookedLabTests",{labId:d,page:a,limit:i,keyword:l}],{isLoading:x,data:n,isError:p,error:r,isSuccess:h}=E({queryKey:f,queryFn:()=>F.get(de,{params:{lab:d,page:a,pageSize:i}}),enabled:!!d,keepPreviousData:!0,onError:s=>{R.error(C(s))}}),j=((T=(b=n==null?void 0:n.data)==null?void 0:b.data)==null?void 0:T.docs)||[],N=((A=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:A.pages)||1;(w=(c=n==null?void 0:n.data)==null?void 0:c.data)!=null&&w.docsCount;const t=(s,S,k)=>{s.stopPropagation()},g=j.map(s=>{var M,$,_,K,W,U,V;const S=((M=s==null?void 0:s.offeredLabTests)==null?void 0:M.map(q=>q==null?void 0:q.title).filter(Boolean).join(", "))||"N/A";(s==null?void 0:s.sampleCollectionMethod)==="Home"||(s!=null&&s.sampleCollectionMethod?s.sampleCollectionMethod:($=s==null?void 0:s.labBranchOffice)!=null&&$.title||(_=s==null?void 0:s.labHeadOffice)!=null&&_.title);const k=s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A";return(K=s==null?void 0:s.medicalRecord)!=null&&K.image&&`${J}${s.medicalRecord.image}`,{_id:s==null?void 0:s._id,id:(s==null?void 0:s.longAutoIncrementId)||"N/A",labName:((W=s==null?void 0:s.labHeadOffice)==null?void 0:W.title)||"N/A",email:((U=s==null?void 0:s.user)==null?void 0:U.email)||"N/A",phone:X((V=s==null?void 0:s.user)==null?void 0:V.phone)||"N/A",bookedLabTest:e.jsx(me,{text:S}),bookedDate:k,status:e.jsx(ie,{status:s==null?void 0:s.status})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:x&&!h?e.jsx(oe,{}):p?e.jsx(le,{message:C(r)}):j.length===0&&h?e.jsx(ce,{setKeyword:m}):e.jsx("div",{className:"",children:e.jsx(B,{data:g,mainHeading:"Booked Lab Tests",searchBar:!1,keyword:l,setKeyword:m,headings:["ID #","Lab Name","Email","Phone","Booked Lab Test","Booked Date","Status"],cells:["id","labName","email","phone","bookedLabTest","bookedDate","status"],status:!1,actions:!1,actionTypes:[{action:"view",icon:L}],actionHandler:t,setCurrentPage:o,pages:N,currentPage:a})})})})}function he(){const[d,a]=u.useState(!0),[o,l]=u.useState(!1),[m,i]=u.useState(1),[f,x]=u.useState(3),n=(N,t,g)=>{N.stopPropagation(),console.log(t,`${g} btn clicked`)},r=Array.from({length:10},(N,t)=>{var g,b,T,y,A,c;return{id:(g=P[t])==null?void 0:g.id,accountNumber:(b=P[t])==null?void 0:b.accountNumber,creditedOn:(T=P[t])==null?void 0:T.creditedOn,requestedDate:(y=P[t])==null?void 0:y.requestedDate,amount:(A=P[t])==null?void 0:A.amount,status:(c=P[t])==null?void 0:c.status}}),j=Array.from({length:10},(N,t)=>{var g,b,T,y,A,c,w,s,S,k;return{id:(g=v[t])==null?void 0:g.id,patient:ee((b=v[t])==null?void 0:b.patientImage,(T=v[t])==null?void 0:T.patient),appointmentDate:(y=v[t])==null?void 0:y.appointmentDate,amount:Y((A=v[t])==null?void 0:A.currency,(c=v[t])==null?void 0:c.amount),status:(w=v[t])==null?void 0:w.status,labTestDate:(s=v[t])==null?void 0:s.labTestDate,reportDate:(S=v[t])==null?void 0:S.reportDate,cancelledDate:(k=v[t])==null?void 0:k.cancelledDate}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(Z,{statistics:!0,bankDetails:!0}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{children:e.jsx("button",{type:"button",className:`${d?"bg-[#4C63BD] text-white":""} rounded-[20px] py-2 px-4 text-[#4C63BD] border border-[#4C63BD] cursor-pointer`,onClick:()=>{a(!0),l(!1)},children:"Withdraw History"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:`${o?"bg-[#4C63BD] text-white":""} rounded-[20px] py-2 px-4 text-[#4C63BD] border border-[#4C63BD] cursor-pointer`,onClick:()=>{l(!0),a(!1)},children:"Refund Requests"})})]}),e.jsxs("div",{className:"",children:[d?e.jsx(B,{data:r,mainHeading:"",searchBar:!0,headings:["ID #","Account #","Created On","Transferred Date","Amount","Status"],cells:["id","accountNumber","creditedOn","requestedDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:I},{action:"delete",icon:O}],actionHandler:n,setCurrentPage:i,pages:f}):"",o?e.jsx(B,{data:j,mainHeading:"",searchBar:!0,headings:["ID #","Pet Parent","Lab Test Date","Report Date","Cancelled Date","Amount","Status"],cells:["id","patient","labTestDate","reportDate","cancelledDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:I},{action:"delete",icon:O}],actionHandler:n,setCurrentPage:i,pages:f}):""]})]})})}function be(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx(Z,{settings:!0})})})}function je(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(ue,{})})})}function Ne(){const[d,a]=u.useState(1),[o,l]=u.useState(3),m=(x,n,p)=>{x.stopPropagation(),console.log(n,`${p} btn clicked`)},f=Array.from({length:10},(x,n)=>{var p,r,h,j,N,t,g,b;return{id:(p=D[n])==null?void 0:p.id,petParent:ee((r=D[n])==null?void 0:r.parentImage,(h=D[n])==null?void 0:h.parentName),appointmentDate:(j=D[n])==null?void 0:j.appointmentDate,bookedOn:(N=D[n])==null?void 0:N.bookedOn,amount:Y((t=D[n])==null?void 0:t.currency,(g=D[n])==null?void 0:g.amount),status:(b=D[n])==null?void 0:b.status}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(B,{data:f,mainHeading:"",searchBar:!1,headings:["ID #","Pet Parents","Appointment Date","BookedOn","Amount","Status"],cells:["id","petParent","appointmentDate","bookedOn","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:I},{action:"delete",icon:O}],actionHandler:m,currentPage:d,setCurrentPage:a,pages:o})})})}function ye(){const[d,a]=u.useState(1),[o,l]=u.useState(3),m=[{id:1,name:"Sofi's Clinic",image:G,appointmentFee:"$350",address:"2286 Sundown Lane, Old Trafford 24541, UK",openingHours:[{day:"Monday",openingTime:"7:00 AM",closingTime:"9:00 PM"},{day:"Tuesday",openingTime:"7:00 AM",closingTime:"9:00 PM"}]},{id:2,name:"Sofi's Clinic",image:G,appointmentFee:"$350",address:"2286 Sundown Lane, Old Trafford 24541, UK",openingHours:[{day:"Monday",openingTime:"7:00 AM",closingTime:"9:00 PM"},{day:"Tuesday",openingTime:"7:00 AM",closingTime:"9:00 PM"}]}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex flex-col gap-5",children:m==null?void 0:m.map((i,f)=>{var x;return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-[12px] p-5 flex max-[1025px]:flex-col gap-3 justify-between",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex roudned-[6px] w-[50px] h-[50px]",children:e.jsx("img",{className:"inline-flex w-full h-full rounded-[6px]",src:i==null?void 0:i.image,alt:"clinic image"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[500] text-[18px]",children:i==null?void 0:i.name}),e.jsxs("p",{className:"text-[#4C63BD] flex items-center gap-1",children:[e.jsx("span",{children:i==null?void 0:i.appointmentFee}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Appointment"})]}),e.jsx("p",{children:i==null?void 0:i.address})]})]}),e.jsx("div",{className:"flex max-[1025px]:flex-col max-[1025px]:items-start items-center gap-5",children:(x=i==null?void 0:i.openingHours)==null?void 0:x.map((n,p)=>e.jsxs("div",{className:"border border-gray-300 rounded-[12px] p-5 flex flex-col gap-3 justify-center items-center",children:[e.jsx("p",{className:"font-[600] text-[18px]",children:n==null?void 0:n.day}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:n==null?void 0:n.openingTime}),e.jsx("span",{children:"-"}),e.jsx("span",{children:n==null?void 0:n.closingTime})]})]},p))})]})}),e.jsx("div",{className:"flex rounded-[12px] w-[250px] max-[1025px]:w-full h-[200px]",children:e.jsx("img",{src:pe,alt:"location image",className:"w-full h-full inline-flex rounded-[12px] object-cover"})})]},f)})}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(te,{totalPages:o,currentPage:d,setCurrentPage:a})})]})})}function $e(){var y,A;const{id:d}=H(),[a,o]=u.useState({}),[l,m]=u.useState(!1),[i,f]=u.useState(!1),x=se(),n=x==null?void 0:x.roles,p=u.useMemo(()=>n,[]),[r,h]=u.useState(1),j=["fetch-approved-lab-profile-data",{id:d}],{data:N,error:t}=E({queryKey:j,queryFn:()=>F.get(`/lab/${d}`)});u.useEffect(()=>{if(N){const{data:{data:{doc:c}}}=N;o(c)}t&&R.error(C(t))},[N,t]),u.useEffect(()=>{const c=Q.find(w=>z(w.requiredRoles,p));c?h(c.id):(R.error("User has no access to any tabs"),h(null))},[p]);const g={profileName:(a==null?void 0:a.title)||(a==null?void 0:a.fullName)||((y=a==null?void 0:a.user)==null?void 0:y.username)||e.jsxs("span",{children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})||"N/A",profileImage:(a==null?void 0:a.image)||((A=a==null?void 0:a.user)==null?void 0:A.image),phone:X(a==null?void 0:a.phone)||"N/A",email:(a==null?void 0:a.email)||"N/A",country:(a==null?void 0:a.countryName)||"N/A",state:(a==null?void 0:a.province)||"N/A",city:(a==null?void 0:a.city)||"N/A",address:(a==null?void 0:a.address)||"",status:(a==null?void 0:a.status)||""},b=async()=>{m(!0);try{await new Promise(c=>setTimeout(c,1e3))}catch(c){R.error(C(c))}finally{m(!1)}},T=async()=>{f(!0);try{await new Promise(c=>setTimeout(c,1e3))}catch(c){R.error(C(c))}finally{f(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Lab Profile"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Lab"})})})]}),r!==null&&e.jsx(ne,{activeTab:r,setActiveTab:h,roles:p,hasRequiredRole:z,tabs:Q,profileData:g,button1Label:"Send Message",button1Handler:b,submitting1:l,button2Label:"Block",button2Handler:T,submitting2:i}),e.jsxs("div",{className:"",children:[r===1?e.jsx(fe,{}):"",r===2?e.jsx(ge,{}):"",r===3?e.jsx(he,{}):"",r===4?e.jsx(be,{}):"",r===5?e.jsx(je,{}):"",r===6?e.jsx(Ne,{}):"",r===7?e.jsx(ye,{}):""]})]})})}export{$e as default};
