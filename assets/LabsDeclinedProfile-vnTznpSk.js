import{C as N,k as v,r as o,V as f,h as j,j as e,m as y,A as g,g as S}from"./index-DqT0A0WV.js";import{h as $,T as k}from"./hasRequiredRole-BEKHWidq.js";import"./ButtonClipLoader-y6fN6nsg.js";import{N as T}from"./no-image-icon-Dam8WiVQ.js";import{I as B,a as D,N as L}from"./NoData-DRT_4vkO.js";import{f as C}from"./index-BJhW3WRQ.js";import{H}from"./HeadingPlusBackBtn-DsBgdeOG.js";import"./Status-HTHKglWX.js";/* empty css                */import"./index-CrxefEGs.js";import"./index-BMn7NW-M.js";import"./BackButton-tIBg2JhS.js";function K(){var n,a,x;const{id:i}=N(),r=["fetch-declined-lab-details",{id:i}],{isLoading:b,isError:d,data:t,error:c}=v({queryKey:r,queryFn:()=>g.get(`/lab/${i}`)}),[s,p]=o.useState((a=(n=t==null?void 0:t.data)==null?void 0:n.data)==null?void 0:a.doc);return o.useEffect(()=>{var h,m;t&&p((m=(h=t==null?void 0:t.data)==null?void 0:h.data)==null?void 0:m.doc),c&&f.error(j(c))},[t,c]),e.jsx(e.Fragment,{children:b?e.jsx(B,{}):d?e.jsx(D,{}):!s||((x=Object.keys(s))==null?void 0:x.length)===0?e.jsx(L,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Details"})}),e.jsxs("div",{className:"flex flex-col",children:[s!=null&&s.image?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Logo"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:s!=null&&s.image?`${y}/${s==null?void 0:s.image}`:T,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s!=null&&s.image?`${y}/${s==null?void 0:s.image}`:T,alt:"education logo",className:"inline-flex w-full h-full object-cover"})})})]}):"",e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab Name"}),e.jsx("p",{children:(s==null?void 0:s.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Phone"}),e.jsx("p",{children:s==null?void 0:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Email"}),e.jsx("p",{children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Country"}),e.jsx("p",{children:(s==null?void 0:s.countryName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"City"}),e.jsx("p",{children:(s==null?void 0:s.city)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"State/Province"}),e.jsx("p",{children:(s==null?void 0:s.province)||"N/A"})]})]})]})})})}function U(){var p,n;const{id:i}=N(),r=["fetch-declined-lab-documents",{id:i}],{isLoading:b,data:d,isError:t,error:c}=v({queryKey:r,queryFn:()=>g.get(`/know-your-customer/?labObjectId=${i}`)}),s=(n=(p=d==null?void 0:d.data)==null?void 0:p.data)==null?void 0:n.docs;return o.useEffect(()=>{c&&f.error(j(c))},[d,c]),e.jsx(e.Fragment,{children:b?e.jsx(B,{}):t?e.jsx(D,{}):!s||(s==null?void 0:s.length)===0?e.jsx(L,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:s==null?void 0:s.map((a,x)=>e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Document"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Identification Type"}),e.jsx("p",{children:(a==null?void 0:a.identificationDocumentType)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Name"}),e.jsx("p",{children:(a==null?void 0:a.businessName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab License"}),e.jsx("p",{children:(a==null?void 0:a.businessLicense)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Address"}),e.jsx("p",{children:(a==null?void 0:a.businessAddress)||"N/A"})]}),a!=null&&a.businessIdentificationDocument?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Business Identification Document"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:`${y}/${a==null?void 0:a.businessIdentificationDocument}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:`${y}/${a==null?void 0:a.businessIdentificationDocument}`,alt:"logo",className:"inline-flex w-full h-full object-cover"})})})]}):""]})]},x))})})}function O(){const{id:i}=N(),r=["fetch-declined-lab-services",{id:i}],{isLoading:b,isError:d,data:t,error:c}=v({queryKey:r,queryFn:()=>g.get(`/offered-lab-test?labHeadOffice=${i}`)}),[s,p]=o.useState([]);return o.useEffect(()=>{var n,a;t&&p((a=(n=t==null?void 0:t.data)==null?void 0:n.data)==null?void 0:a.docs),c&&f.error(j(c))},[t,c]),e.jsx(e.Fragment,{children:b?e.jsx(B,{}):d?e.jsx(D,{}):!s||(s==null?void 0:s.length)===0?e.jsx(L,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:s==null?void 0:s.map((n,a)=>{var x;return e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Lab Test"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Test Name"}),e.jsx("p",{children:(n==null?void 0:n.title)||((x=n==null?void 0:n.labTest)==null?void 0:x.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Price"}),e.jsxs("p",{children:[e.jsx("span",{children:(n==null?void 0:n.currencyCode)==="USD"?"$":""}),e.jsx("span",{children:n!=null&&n.price?parseFloat(n==null?void 0:n.price).toFixed(2):"N/A"})]})]})]})]},a)})})})}const E=[{id:1,name:"Lab Tests",requiredRoles:["admin"]},{id:2,name:"Personal Details",requiredRoles:["admin"]},{id:3,name:"Documents",requiredRoles:["admin"]}];function se(){var q,I;const{id:i}=N(),[r,b]=o.useState({}),[d,t]=o.useState(!1),[c,s]=o.useState(!1),p=S(),n=p==null?void 0:p.roles,a=o.useMemo(()=>n,[]),[x,h]=o.useState(1),m=["fetch-in-review-lab-profile-data",{id:i}],{data:w,error:A}=v({queryKey:m,queryFn:()=>g.get(`/lab/${i}`)});o.useEffect(()=>{if(w){const{data:{data:{doc:u}}}=w;b(u)}A&&f.error(j(A))},[w,A]),o.useEffect(()=>{const u=E.find(l=>$(l.requiredRoles,a));u?h(u.id):(f.error("User has no access to any tabs"),h(null))},[a]);const R={profileName:(r==null?void 0:r.title)||(r==null?void 0:r.fullName)||((q=r==null?void 0:r.user)==null?void 0:q.username)||e.jsxs("span",{children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]})||"N/A",profileImage:(r==null?void 0:r.image)||((I=r==null?void 0:r.user)==null?void 0:I.image),phone:C(r==null?void 0:r.phone)||"N/A",email:(r==null?void 0:r.email)||"N/A",country:(r==null?void 0:r.countryName)||"N/A",state:(r==null?void 0:r.province)||"N/A",city:(r==null?void 0:r.city)||"N/A",address:(r==null?void 0:r.address)||"",status:(r==null?void 0:r.status)||""},P=async()=>{var u;t(!0);try{const{data:l}=await g.patch(`/lab/approve/${i}`,{status:"Approved",statusChangeReason:"Passed all tests"});l!=null&&l.success&&f.success((l==null?void 0:l.message)||((u=l==null?void 0:l.data)==null?void 0:u.message))}catch(l){f.error(j(l))}finally{t(!1)}},F=async()=>{var u;s(!0);try{const{data:l}=await g.patch(`/lab/approve/${i}`,{status:"Declined",statusChangeReason:"Failed all tests"});l!=null&&l.success&&f.success((l==null?void 0:l.message)||((u=l==null?void 0:l.data)==null?void 0:u.message))}catch(l){f.error(j(l))}finally{s(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"",children:e.jsx(H,{label:"Lab Profile"})}),x!==null&&e.jsx(k,{activeTab:x,setActiveTab:h,roles:a,hasRequiredRole:$,tabs:E,profileData:R,button1Label:"Approve",button1Handler:P,submitting1:d,button2Label:"Decline",button2Handler:F,submitting2:c,button1Required:!1,button2Required:!1}),e.jsxs("div",{className:"",children:[x===1?e.jsx(O,{}):"",x===2?e.jsx(K,{}):"",x===3?e.jsx(U,{}):""]})]})})}export{se as default};
