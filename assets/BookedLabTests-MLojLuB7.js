import{r as o,u as H,w as K,H as M,k as R,j as s,V,h as q,I as z,J as G,K as J,A as Q}from"./index-DqT0A0WV.js";import{R as U}from"./ResponsiveTable-FCQxtvDA.js";/* empty css                */import{B as j}from"./apiEndpoints-Bx0RnfJ4.js";import"./Status-HTHKglWX.js";import"./index-D5TUXJLt.js";import"./NoData-DRT_4vkO.js";import"./index-CrxefEGs.js";import"./index-DE8dskU1.js";import"./index-BMn7NW-M.js";import"./index-BQbMBTEc.js";function ie(){const[x,v]=o.useState([]),[r,N]=o.useState(1),[y,B]=o.useState(1),[i,g]=o.useState(""),[c,S]=o.useState(null),[d,T]=o.useState(null),m=10,h=H(),l=K(),{docDeleted:p}=M(t=>t==null?void 0:t.deleteModal),k=["fetch-booked-lab-tests",{currentPage:r,limit:m,keyword:i,docDeleted:p,startDate:c,endDate:d}],{isLoading:w,data:u,isError:f,error:b}=R({queryKey:k,queryFn:async()=>{let t=`${j}?page=${r}&pageSize=${m}`;return c&&(t+=`&from=${c}`),d&&(t+=`&to=${d}`),i&&(t+=`&keyword=${i}`),Q.get(t)}});o.useEffect(()=>{if(u){const{data:{docs:t,pages:a}}=u.data,n=t.map(e=>{var D,A;const L=e.longAutoIncrementId||"N/A",$=e.offeredLabTests&&e.offeredLabTests.length>0?e.offeredLabTests.map(F=>F.title).join(", "):"N/A",P=((D=e.labHeadOffice)==null?void 0:D.title)||"N/A",_=e.createdAt?new Date(e.createdAt).toLocaleDateString("en-GB"):"N/A",C=`$${(((A=e.order)==null?void 0:A.amount)||0).toFixed(2)}`,I=e.sampleCollectionMethod||"N/A",O=e.status||"N/A";return{_id:e._id,id:L,test:$,lab:P,collBy:_,fee:C,visit:s.jsx("span",{className:"text-[#4C63BD]",children:I}),status:O}});v(n),B(a)}p&&g(""),f&&V.error(q(b))},[u,f,b,p]);const E=(t,a,n)=>{if(t.stopPropagation(),n==="view"&&h(`/booked-lab-tests/details/${a==null?void 0:a._id}`),n==="delete"){const e=j;l(z(!0)),l(G(e)),l(J(a==null?void 0:a._id))}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[400px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Booked Lab Tests"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{h("/booked-lab-tests/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(U,{datePicker:!0,setStartDate:S,setEndDate:T,setKeyword:g,isLoading:w,isError:f,fetchedData:x,data:x,mainHeading:"Booked Lab Tests",searchBar:!0,headings:["Order #","Test","Lab","Coll. By","Fee","Visit","Status","Action"],cells:["id","test","lab","collBy","fee","visit"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:E,setCurrentPage:N,pages:y,currentPage:r})})]})})}export{ie as default};
