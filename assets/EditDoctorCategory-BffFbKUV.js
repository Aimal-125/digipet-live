import{H as b,r as o,u as S,k as D,V as n,h as u,c as F,a as N,l as R,j as a,F as U,b as $,m as q,S as v,A as d}from"./index-CKZINqwN.js";import{H as E}from"./HeadingPlusBackBtn-BOBZ_rS4.js";import{S as B}from"./SingleImageUpload-tu7O7bri.js";import{I as z}from"./Input-4jXxZ4n2.js";import"./BackButton-Dd_chuGT.js";import"./index-BmsdS2U_.js";import"./no-image-icon-CabPHXKl.js";function M(){const{id:l}=b(),[t,p]=o.useState({}),[m,x]=o.useState(""),f=S(),h=["fetch-doctor-category",{id:l}],{data:i,error:c}=D({queryKey:h,queryFn:()=>d.get(`/doctor-category/${l}`)});o.useEffect(()=>{var e,r;i&&p((r=(e=i==null?void 0:i.data)==null?void 0:e.data)==null?void 0:r.doc),c&&n.error(u(c))},[i,c]);const j={imageDataURI:null,title:(t==null?void 0:t.title)||""},y=F().shape({imageDataURI:R().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",e=>e===null||e instanceof File&&["image/jpeg","image/png"].includes(e.type)).required("Image is required"),title:N().required("Title is required")}),I=async(e,{setSubmitting:r})=>{var g;r(!0);try{const{data:s}=await d.patch(`/doctor-category/${l}`,{...e,imageDataURI:m});s!=null&&s.success&&(n.success((s==null?void 0:s.message)||((g=s==null?void 0:s.data)==null?void 0:g.message)),f("/doctors-categories"))}catch(s){n.error(u(s))}finally{r(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"",children:a.jsx(E,{label:"Edit Doctor Category"})}),a.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:a.jsx(U,{initialValues:j,validationSchema:y,onSubmit:I,enableReinitialize:!0,children:e=>a.jsxs($,{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"",children:a.jsx(B,{formik:e,base64Image:m,setBase64Image:x,name:"imageDataURI",id:"imageDataURI",backendImage:t!=null&&t.image?`${q}/${t==null?void 0:t.image}`:""})}),a.jsx("div",{className:"",children:a.jsx(z,{formik:e,name:"title",id:"title",label:"Title"})}),a.jsx("div",{className:"mt-2",children:a.jsx(v,{formik:e})})]})})})]})})}export{M as default};
