import{r,J as M,k as R,u as q,w as B,V as F,h as H,j as a,K as O,N as T,O as V,A as z}from"./index-DUYjTDLa.js";import{R as J}from"./ResponsiveTable-Bx0PTskj.js";import{E as Q}from"./edit-icon-CSd65PgS.js";import{D as W}from"./delete-icon-FU5lMFq3.js";import{n as G}from"./nameWithImage-DC3XV7ql.js";/* empty css                */import"./Status-BubxHrRz.js";import"./index-DDsQ4hsC.js";import"./IsError-CddUd3sL.js";import"./NoData-CiBxRMDc.js";import"./index-RjsA-lLy.js";import"./index-DpQgK1aN.js";import"./index-ucCudfBO.js";import"./index-qS6WQuq_.js";function le(){var j,E;const[p,S]=r.useState(1),[I,N]=r.useState(1),[g,A]=r.useState(""),[u,P]=r.useState(null),[m,v]=r.useState(null),x=10,{docDeleted:y}=M(s=>s==null?void 0:s.deleteModal),w=["fetch-pet-categories",{currentPage:p,limit:x,docDeleted:y,keyword:g,startDate:u,endDate:m}],{isLoading:C,isError:k,data:t,error:f}=R({queryKey:w,queryFn:async()=>{let s=`/pet-category?page=${p}&pageSize=${x}`;return u&&(s+=`&from=${u}`),m&&(s+=`&to=${m}`),g&&(s+=`&keyword=${g}`),z.get(s)}}),[i,$]=r.useState((E=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:E.docs),[_,b]=r.useState(0),D=q(),h=B();r.useEffect(()=>{var s,e,o,n,c,d,l;t&&($((e=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:e.docs),N((n=(o=t==null?void 0:t.data)==null?void 0:o.data)==null?void 0:n.pages),b((l=(d=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:d.docs)==null?void 0:l.length)),f&&F.error(H(f))},[t,f,y]);const K=(s,e,o)=>{if(s.stopPropagation(),o==="edit"&&D(`/pet-categories/edit/${e==null?void 0:e._id}`),o==="delete"){const n="/pet-category";h(O(!0)),h(T(n)),h(V(e==null?void 0:e._id))}},L=Array.from({length:_},(s,e)=>{var o,n,c,d,l;return{_id:(o=i[e])==null?void 0:o._id,id:((n=i[e])==null?void 0:n.longAutoIncrementId)||((c=i[e])==null?void 0:c.autoIncrementId)||"N/A",category:G((d=i[e])==null?void 0:d.image,(l=i[e])==null?void 0:l.title)}});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[a.jsx("h1",{className:"main-heading",children:"Pet Categories"}),a.jsx("div",{children:a.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{D("/pet-categories/add")},children:[a.jsx("span",{children:"+"}),a.jsx("span",{children:"Add New"})]})})]}),a.jsx("div",{className:"",children:a.jsx(J,{datePicker:!0,setStartDate:P,setEndDate:v,setKeyword:A,isLoading:C,isError:k,fetchedData:i,data:L,mainHeading:"Categories",searchBar:!0,headings:["ID #","Categories","Action"],cells:["id","category"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:Q},{action:"delete",icon:W}],actionHandler:K,currentPage:p,setCurrentPage:S,pages:I})})]})})}export{le as default};
