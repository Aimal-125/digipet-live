import{H as B,k as A,r as i,V as u,h as m,j as e,m as w,A as N,g as E}from"./index-BpncqqTg.js";import{B as I,h as $,T as R}from"./hasRequiredRole-ChZKFJIS.js";import{N as P}from"./no-image-icon-Dam8WiVQ.js";import{I as k,a as C}from"./IsLoading-D0iuarB6.js";import{N as F}from"./NoData-C9P7-d5K.js";import{f as H}from"./index-B8h8kOrn.js";import"./Status-KfFp0PAM.js";/* empty css                  */import"./index-BddCgcU_.js";import"./index-CgivaiP7.js";function V(){const{id:x}=B(),s=["fetch-declined-lab-details",{id:x}],{data:p,error:t}=A({queryKey:s,queryFn:()=>N.get(`/lab/${x}`)}),[r,d]=i.useState({});return i.useEffect(()=>{var f,n;p&&d((n=(f=p==null?void 0:p.data)==null?void 0:f.data)==null?void 0:n.doc),t&&u.error(m(t))},[p,t]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Details"})}),e.jsxs("div",{className:"flex flex-col",children:[r!=null&&r.image?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Logo"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:r!=null&&r.image?`${w}/${r==null?void 0:r.image}`:P,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:r!=null&&r.image?`${w}/${r==null?void 0:r.image}`:P,alt:"education logo",className:"inline-flex w-full h-full object-cover"})})})]}):"",e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab Name"}),e.jsx("p",{children:(r==null?void 0:r.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Phone"}),e.jsx("p",{children:r==null?void 0:r.phone})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Email"}),e.jsx("p",{children:r==null?void 0:r.email})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Country"}),e.jsx("p",{children:(r==null?void 0:r.countryName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"City"}),e.jsx("p",{children:(r==null?void 0:r.city)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"State/Province"}),e.jsx("p",{children:(r==null?void 0:r.province)||"N/A"})]})]})]})})})}function K(){var g,y;const{id:x}=B(),s=["fetch-declined-lab-documents",{id:x}],{isLoading:p,data:t,isError:r,error:d}=A({queryKey:s,queryFn:()=>N.get(`/know-your-customer/?labObjectId=${x}`)}),[f,n]=i.useState(!1),[h,b]=i.useState(!1),c=(y=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:y.docs;i.useEffect(()=>{d&&u.error(m(d))},[t,d]);const v=async a=>{var j;n(!0);try{const{data:l}=await N.patch(`/know-your-customer/approve/${a==null?void 0:a._id}`,{status:"Approved",statusChangeReason:"Verification Successful"});l!=null&&l.success&&u.success((l==null?void 0:l.message)||((j=l==null?void 0:l.data)==null?void 0:j.message))}catch(l){u.error(m(l))}finally{n(!1)}},D=async a=>{var j;b(!0);try{const{data:l}=await N.patch(`/know-your-customer/approve/${a==null?void 0:a._id}`,{status:"Declined",statusChangeReason:"Verification Failed"});l!=null&&l.success&&u.success((l==null?void 0:l.message)||((j=l==null?void 0:l.data)==null?void 0:j.message))}catch(l){u.error(m(l))}finally{b(!1)}};return e.jsx(e.Fragment,{children:p?e.jsx(k,{}):r?e.jsx(C,{}):!c||(c==null?void 0:c.length)===0?e.jsx(F,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:c==null?void 0:c.map((a,j)=>e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsxs("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"Document"}),e.jsxs("div",{className:"flex max-[370px]:flex-col max-[370px]:w-full max-[370px]:items-start items-center gap-4",children:[e.jsx("div",{className:"max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center gap-1 bg-fullGreen w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>v(a),disabled:f,children:f?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(I,{}),"Please Wait"]}):"Approve"})}),e.jsx("div",{className:" max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"bg-fullRed w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>D(a),disabled:h,children:h?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(I,{}),"Please Wait"]}):"Decline"})})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Identification Type"}),e.jsx("p",{children:(a==null?void 0:a.identificationDocumentType)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Name"}),e.jsx("p",{children:(a==null?void 0:a.businessName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab License"}),e.jsx("p",{children:(a==null?void 0:a.businessLicense)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Address"}),e.jsx("p",{children:(a==null?void 0:a.businessAddress)||"N/A"})]}),a!=null&&a.businessIdentificationDocument?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Business Identification Document"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:`${w}/${a==null?void 0:a.businessIdentificationDocument}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:`${w}/${a==null?void 0:a.businessIdentificationDocument}`,alt:"education logo",className:"inline-flex w-full h-full object-cover"})})})]}):""]})]},j))})})}function U({doc:x}){const s=x==null?void 0:x.branchHeadOffice,p=["fetch-declined-lab-services",{id:s}],{data:t,error:r}=A({queryKey:p,queryFn:()=>N.get(`/offered-lab-test?labHeadOffice=${s}`)}),[d,f]=i.useState([]);return i.useEffect(()=>{var n,h;t&&f((h=(n=t==null?void 0:t.data)==null?void 0:n.data)==null?void 0:h.docs),r&&u.error(m(r))},[t,r]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:d==null?void 0:d.map((n,h)=>{var b;return e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Lab Test"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Test Name"}),e.jsx("p",{children:(n==null?void 0:n.title)||((b=n==null?void 0:n.labTest)==null?void 0:b.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Price"}),e.jsxs("p",{children:[e.jsx("span",{children:(n==null?void 0:n.currencyCode)==="USD"?"$":""}),e.jsx("span",{children:n!=null&&n.price?parseFloat(n==null?void 0:n.price).toFixed(2):"N/A"})]})]})]})]},h)})})})}const S=[{id:1,name:"Lab Tests",requiredRoles:["admin"]},{id:2,name:"Personal Details",requiredRoles:["admin"]},{id:3,name:"Documents",requiredRoles:["admin"]}];function Z(){var L,T;const{id:x}=B(),[s,p]=i.useState({}),[t,r]=i.useState(!1),[d,f]=i.useState(!1),n=E(),h=n==null?void 0:n.roles,b=i.useMemo(()=>h,[]),[c,v]=i.useState(1),D=["fetch-in-review-lab-profile-data",{id:x}],{data:g,error:y}=A({queryKey:D,queryFn:()=>N.get(`/lab/${x}`)});i.useEffect(()=>{if(g){const{data:{data:{doc:o}}}=g;p(o)}y&&u.error(m(y))},[g,y]),i.useEffect(()=>{const o=S.find(q=>$(q.requiredRoles,b));o?v(o.id):(u.error("User has no access to any tabs"),v(null))},[b]);const a={profileName:(s==null?void 0:s.title)||(s==null?void 0:s.fullName)||((L=s==null?void 0:s.user)==null?void 0:L.username)||e.jsxs("span",{children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]})||"N/A",profileImage:(s==null?void 0:s.image)||((T=s==null?void 0:s.user)==null?void 0:T.image),phone:H(s==null?void 0:s.phone)||"N/A",email:(s==null?void 0:s.email)||"N/A",country:(s==null?void 0:s.countryName)||"N/A",state:(s==null?void 0:s.province)||"N/A",city:(s==null?void 0:s.city)||"N/A",address:(s==null?void 0:s.address)||"",status:(s==null?void 0:s.status)||""},j=async()=>{r(!0);try{await new Promise(o=>setTimeout(o,1e3))}catch(o){u.error(m(o))}finally{r(!1)}},l=async()=>{f(!0);try{await new Promise(o=>setTimeout(o,1e3))}catch(o){u.error(m(o))}finally{f(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Lab Profile"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Lab"})})})]}),c!==null&&e.jsx(R,{activeTab:c,setActiveTab:v,roles:b,hasRequiredRole:$,tabs:S,profileData:a,button1Label:"Approve",button1Handler:j,submitting1:t,button2Label:"Decline",button2Handler:l,submitting2:d}),e.jsxs("div",{className:"",children:[c===1?e.jsx(U,{doc:s}):"",c===2?e.jsx(V,{}):"",c===3?e.jsx(K,{}):""]})]})})}export{Z as default};
