import{j as e,Z as K,_ as Q,w as W,z as Y,B as Z,D as G,k as $,m as f,v as O,A as I}from"./index-BsC4CiLt.js";import{H as J}from"./HeadingPlusBackBtn-BcQEfkaA.js";import{I as X,a as V}from"./IsError-DysmRO1f.js";import{N as T}from"./NoData-CEn6Zv-n.js";import{C as L}from"./index-BPo6po31.js";import{a as k}from"./index-NiuxfhvR.js";import{S as b}from"./Status-BCEaVBkQ.js";import{B as ee,b as se}from"./apiEndpoints-DA67aB0N.js";import{f as H}from"./index-2PItWAhb.js";import"./BackButton-BEPFSPqf.js";import"./index-DInAQVjv.js";/* empty css                */import"./index-QFobRxCo.js";function le({data:s={}}){var l,n,m;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5 bg-white rounded-[20px] p-5",children:[e.jsxs("div",{className:"flex max-[768px]:flex-col gap-5",children:[e.jsx("div",{className:"flex w-[160px] h-[160px]",children:e.jsx("img",{src:s==null?void 0:s.image,alt:"profile image",className:"w-full h-full inline-flex rounded-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-[600] text-[20px]",children:s==null?void 0:s.name}),e.jsx("p",{children:s==null?void 0:s.speciality})]}),s!=null&&s.labId?e.jsx("div",{children:e.jsxs("p",{children:["License# : ",s==null?void 0:s.labId]})}):"",e.jsx("div",{children:e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(L,{})}),e.jsx("span",{children:s==null?void 0:s.address})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"Booking Info"}),e.jsxs("div",{className:"flex flex-wrap gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Test Name"}),e.jsx("p",{children:(l=s==null?void 0:s.bookingInfo)==null?void 0:l.testName})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Report Delivery Time"}),e.jsx("p",{children:(n=s==null?void 0:s.bookingInfo)==null?void 0:n.date})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Lab Test Type"}),e.jsx("p",{children:(m=s==null?void 0:s.bookingInfo)==null?void 0:m.labTestType})]})]})]})]})})}function re({data:s}){var l,n;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"appointment-details-middle-card-container",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-[80px] h-[80px] flex",children:e.jsx("img",{src:s==null?void 0:s.image,alt:"image",className:"w-full h-full inline-flex object-cover rounded-[10px]"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"",children:s==null?void 0:s.id}),e.jsx("p",{className:"text-[18px]",children:s==null?void 0:s.name})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(k,{})}),e.jsx("span",{children:(l=s==null?void 0:s.bookingDetails)==null?void 0:l.date})]}),e.jsx("p",{children:(n=s==null?void 0:s.bookingDetails)==null?void 0:n.type})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(K,{})}),e.jsx("span",{children:s==null?void 0:s.email})]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(Q,{})}),e.jsx("span",{children:s==null?void 0:s.phone})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"Test Name"}),e.jsx("div",{children:e.jsx("p",{children:s==null?void 0:s.testName})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"Payment Status"}),e.jsx("div",{children:e.jsx(b,{status:s==null?void 0:s.paymentStatus})})]})]})})}function ie({data:s}){const l=W(),n=x=>{if(!x)return null;const p=x.split(".");return p.length>1?p.pop().toLowerCase():null},m=x=>{if(!x)return"File";const p=x.split("/");return p.length>1?p.pop():"File"},i=s==null?void 0:s.attachment,c=n(i),a=m(i),t=()=>i?["jpg","jpeg","png","svg"].includes(c)?e.jsx("button",{title:"view attachment",type:"button",className:"cursor-pointer text-blue-600 inline-flex w-full h-full rounded-[10px]","aria-label":"view attachment",onClick:()=>{l(Y(!0)),l(Z({type:"view-attachment",data:{attachment:i}}))},children:e.jsx("img",{src:i,alt:"attachment",className:"w-full h-full inline-flex object-contain rounded-[10px]"})}):["mp4","webm","ogg"].includes(c)?e.jsxs("video",{controls:!0,className:"w-full h-full object-cover rounded-[10px]",children:[" ",e.jsx("source",{src:i,type:`video/${c}`}),"Your browser does not support the video tag."]}):c==="pdf"?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-gray-700",children:a}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View PDF"}),e.jsx("a",{href:i,download:!0,className:"text-green-600 hover:underline text-sm",children:"Download PDF"})]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsxs("p",{className:"text-sm text-gray-700",children:[a," (",c?c.toUpperCase():"Unknown Type",")"]}),e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View File"})]}):e.jsx("p",{children:"No attachment available"});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5 p-5 rounded-[20px] bg-white",children:[e.jsx("p",{className:"text-[20px] font-[600]",children:"Basic Information"}),e.jsxs("div",{className:"flex max-[768px]:flex-col max-[768px]:gap-2 gap-5",children:[e.jsxs("div",{className:"w-[400px] max-[768px]:w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"First Name"}),e.jsx("p",{children:s==null?void 0:s.firstName})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Last Name"}),e.jsx("p",{children:s==null?void 0:s.lastName})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Phone#"}),e.jsx("p",{children:s==null?void 0:s.phone})]}),e.jsxs("div",{className:"flex flex-col gap-2 max-[768px]:hidden",children:[e.jsx("p",{children:"Attachment"}),e.jsx("div",{className:"w-[250px] h-[250px] flex justify-center items-center border border-[#AEC8E2] rounded-[10px]",children:t()})]})]}),e.jsxs("div",{className:"w-[400px] max-[768px]:w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Email"}),e.jsx("p",{children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Pet Specie"}),e.jsx("p",{children:s==null?void 0:s.petSpecie})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-[768px]:hidden",children:[e.jsx("p",{children:"Attachment"}),e.jsx("div",{className:"w-[250px] h-[250px] flex justify-center items-center border border-[#AEC8E2] rounded-[10px]",children:t()})]})]})]})]})})}const ne=async s=>(await I.get(`${ee}/${s}`)).data.data.doc,ce=async s=>s?(await I.get(`${se}/${s}`)).data.data.doc:null;function we(){var g,N,v,w,y,A,D,E,B,P,C,F;const{id:s}=G(),{data:l,isLoading:n,isError:m,error:i,isSuccess:c}=$({queryKey:["bookedLabTestDetails",{id:s}],queryFn:()=>ne(s),enabled:!!s}),a=((N=(g=l==null?void 0:l.order)==null?void 0:g.testsPricesDiscounts)==null?void 0:N.map(S=>S.offeredLabTest))||[],{data:t,isLoading:x,isError:p,error:j,isSuccess:te}=$({queryKey:["offeredLabTests",a],queryFn:async()=>(await Promise.all(a.map(o=>ce(o)))).filter(o=>o&&o.title).map(o=>o.title),enabled:c&&a.length>0});if(n||x)return e.jsx(X,{});if(m)return console.error("Error fetching booked lab test details:",i),e.jsx(V,{message:i.message||"Failed to load booked lab test details."});if(p)return console.error("Error fetching offered lab tests:",j),e.jsx(V,{message:j.message||"Failed to load offered lab test details."});if(c&&!l)return e.jsx(T,{goBackButton:!1});const r=(l==null?void 0:l.labBranchOffice)||(l==null?void 0:l.labHeadOffice),R=(r==null?void 0:r.title)||"N/A",_=r!=null&&r.image?`${f}/${r.image}`:O,z=`${(r==null?void 0:r.address)||""}, ${(r==null?void 0:r.city)||""}, ${(r==null?void 0:r.province)||""}`;r!=null&&r.longAutoIncrementId;const d=(t==null?void 0:t.length)>0?t.join(", "):"N/A",M={image:_,name:R,speciality:"",address:z,bookingInfo:{testName:d,date:l!=null&&l.createdAt?new Date(l.createdAt).toLocaleString():"N/A",labTestType:(l==null?void 0:l.sampleCollectionMethod)||"N/A"}},U={image:(v=l==null?void 0:l.pet)!=null&&v.image?`${f}/${l.pet.image}`:O,id:(l==null?void 0:l.longAutoIncrementId)||"N/A",name:((w=l==null?void 0:l.pet)==null?void 0:w.name)||"N/A",bookingDetails:{date:l!=null&&l.createdAt?new Date(l.createdAt).toLocaleString():"N/A",type:(l==null?void 0:l.sampleCollectionMethod)||"N/A"},email:((y=l==null?void 0:l.user)==null?void 0:y.email)||"N/A",phone:H((A=l==null?void 0:l.user)==null?void 0:A.phone)||"N/A",testName:d,paymentStatus:(l==null?void 0:l.paymentStatus)||"N/A"},h=(D=l==null?void 0:l.medicalRecord)==null?void 0:D.image;let u=null;h&&(u=h.startsWith("http")?h:`${f}/${h}`);const q={firstName:((E=l==null?void 0:l.petParent)==null?void 0:E.firstName)||"N/A",lastName:((B=l==null?void 0:l.petParent)==null?void 0:B.lastName)||"N/A",phone:H((P=l==null?void 0:l.petParent)==null?void 0:P.phone)||"N/A",attachment:u,email:((C=l==null?void 0:l.petParent)==null?void 0:C.email)||"N/A",petSpecie:((F=l==null?void 0:l.petCategory)==null?void 0:F.title)||"N/A",userNote:(l==null?void 0:l.userNote)||"N/A"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"",children:e.jsx(J,{label:"Booked Lab Test Details"})}),e.jsx("div",{className:"",children:e.jsx(le,{data:M})}),e.jsx("div",{className:"",children:e.jsx(re,{data:U})}),e.jsx("div",{className:"",children:e.jsx(ie,{data:q})})]})})}export{we as default};
