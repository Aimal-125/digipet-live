import{r as n,N as L,k as M,u as T,w as q,V as B,h as F,j as t,m as H,O as K,Q as O,T as Q,A as V}from"./index-BsC4CiLt.js";import{R as z}from"./ResponsiveTable-CwHPkwiT.js";/* empty css                */import"./Status-BCEaVBkQ.js";import"./index-NiuxfhvR.js";import"./IsError-DysmRO1f.js";import"./NoData-CEn6Zv-n.js";import"./index-DInAQVjv.js";import"./index-CvgDGYcH.js";import"./index-QFobRxCo.js";import"./index-C4oxCGHh.js";function re(){const[a,N]=n.useState([]),[c,E]=n.useState(1),[S,v]=n.useState(1),[w,A]=n.useState(0),{docDeleted:x}=L(s=>s==null?void 0:s.deleteModal),[d,C]=n.useState(""),[l,$]=n.useState(null),[p,I]=n.useState(null),m=10,b=["fetch-doctor-categories",{currentPage:c,limit:m,docDeleted:x,startDate:l,endDate:p,keyword:d}],{isLoading:k,data:r,isError:P,error:g}=M({queryKey:b,queryFn:async()=>{let s=`/doctor-category?page=${c}&pageSize=${m}`;return l&&(s+=`&from=${l}`),p&&(s+=`&to=${p}`),d&&(s+=`&keyword=${d}`),V.get(s)}}),h=T(),u=q();n.useEffect(()=>{var s,e,o,i;r&&(N((e=(s=r==null?void 0:r.data)==null?void 0:s.data)==null?void 0:e.docs),v((i=(o=r==null?void 0:r.data)==null?void 0:o.data)==null?void 0:i.pages),A(a==null?void 0:a.length)),g&&B.error(F(g))},[r,a==null?void 0:a.length,g,x]);const R=Array.from({length:w},(s,e)=>{var o,i,f,y,D;return{_id:(o=a[e])==null?void 0:o._id,id:((i=a[e])==null?void 0:i.longAutoIncrementId)||((f=a[e])==null?void 0:f.autoIncrementId)||"N/A",doctors:t.jsxs("span",{className:"inline-flex max-[351px]:flex-col max-[350px]:items-end items-center gap-[18px]",children:[t.jsx("span",{className:"w-[50px] h-[50px] rounded-full",children:t.jsx("img",{src:`${H}/${(y=a[e])==null?void 0:y.image}`,alt:"test type image",style:{width:"100%",height:"100%",display:"inline-flex",borderRadius:"50%"},onError:j=>{j.target.onerror=null,j.target.src="https://placehold.co/40x40/cccccc/000000?text=No+Img"}})}),t.jsx("span",{children:(D=a[e])==null?void 0:D.title})]})}}),_=(s,e,o)=>{if(s.stopPropagation(),o==="edit"&&h(`/doctors-categories/edit/${e==null?void 0:e._id}`),o==="delete"){const i="/doctor-category";u(K(!0)),u(O(i)),u(Q(e==null?void 0:e._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[400px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Doctor Categories"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{h("/doctors-categories/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New"})]})})]}),t.jsx("div",{className:"",children:t.jsx(z,{datePicker:!0,setStartDate:$,setEndDate:I,setKeyword:C,isLoading:k,isError:P,fetchedData:a,data:R,mainHeading:"Doctor Categories",searchBar:!0,headings:["ID #","Categories","Action"],cells:["id","doctors"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:_,currentPage:c,setCurrentPage:E,pages:S})})]})})}export{re as default};
