import{H as I,r as c,u as S,k as F,V as m,h as u,c as N,a as R,l as v,j as a,F as U,b as $,m as q,S as D,A as d}from"./index-B_nrAWIt.js";import{H as E}from"./HeadingPlusBackBtn-DKCqj644.js";import{S as B}from"./SingleImageUpload-C1mUX98W.js";import{I as z}from"./Input-CWXe6AEF.js";import"./BackButton-DrsOu0xo.js";import"./index-Bs2yjB6o.js";import"./no-image-icon-CabPHXKl.js";function w(){const{id:l}=I(),[t,p]=c.useState({}),[o,x]=c.useState(""),f=S(),b=["fetch-lab-test-category",{id:l}],{data:i,error:n}=F({queryKey:b,queryFn:()=>d.get(`/lab-test-category/${l}`)});c.useEffect(()=>{var e,r;i&&p((r=(e=i==null?void 0:i.data)==null?void 0:e.data)==null?void 0:r.doc),n&&m.error(u(n))},[i,n]);const h={imageDataURI:null,title:(t==null?void 0:t.title)||""},j=N().shape({imageDataURI:v().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",e=>e===null||e instanceof File&&["image/jpeg","image/png"].includes(e.type)).required("Image is required"),title:R().required("Title is required")}),y=async(e,{setSubmitting:r})=>{var g;r(!0);try{const{data:s}=await d.patch(`/lab-test-category/${l}`,{...e,imageDataURI:o,status:"Approved"});s!=null&&s.success&&(m.success((s==null?void 0:s.message)||((g=s==null?void 0:s.data)==null?void 0:g.message)),f("/lab-tests-categories"))}catch(s){m.error(u(s))}finally{r(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"",children:a.jsx(E,{label:"Edit Lab Test Category"})}),a.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:a.jsx(U,{initialValues:h,validationSchema:j,onSubmit:y,enableReinitialize:!0,children:e=>a.jsxs($,{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"",children:a.jsx(B,{formik:e,base64Image:o,setBase64Image:x,name:"imageDataURI",id:"imageDataURI",backendImage:t!=null&&t.image?`${q}/${t==null?void 0:t.image}`:""})}),a.jsx("div",{className:"",children:a.jsx(z,{formik:e,name:"title",id:"title",label:"Title"})}),a.jsx("div",{className:"mt-2",children:a.jsx(D,{formik:e})})]})})})]})})}export{w as default};
