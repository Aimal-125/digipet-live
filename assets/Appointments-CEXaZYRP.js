import{r as n,u as J,w as Q,H as W,k as X,V as Y,h as Z,j as t,I as ee,J as te,K as se,A as ae}from"./index-CQKYHy-I.js";import{D as ne}from"./DashboardContainer1-HByQmYgj.js";import{R as oe}from"./ResponsiveTable-D2aRitRL.js";/* empty css                */import{A as $}from"./apiEndpoints-D7ff-bgI.js";/* empty css                           */import"./Status-C1XBkVxv.js";import"./index-AGEDdwYz.js";import"./NoData-BHZ79NSU.js";import"./index-DJrup_GY.js";import"./index-CipUpZi5.js";import"./index-Dd1dE9M7.js";import"./index-MSC2IknF.js";function Ae(){const[A,V]=n.useState([]),[l,y]=n.useState(1),[k,b]=n.useState(1),[r,D]=n.useState(""),[N,E]=n.useState(0),[c,B]=n.useState(0),[T,I]=n.useState(0),[O,_]=n.useState(0),[o,F]=n.useState("All"),[d,M]=n.useState(null),[p,H]=n.useState(null),j=10,u=J(),m=Q(),{docDeleted:f}=W(e=>e==null?void 0:e.deleteModal),K=["fetch-appointments",{currentPage:l,limit:j,keyword:r,filterBtnType:o,docDeleted:f,startDate:d,endDate:p}],{isLoading:R,data:x,isError:g,error:C}=X({queryKey:K,queryFn:async()=>{let e=`${$}?page=${l}&pageSize=${j}`;return d&&(e+=`&from=${d}`),p&&(e+=`&to=${p}`),r&&(e+=`&keyword=${r}`),o!=="All"&&(e+=`&type=${o}`),ae.get(e)}});n.useEffect(()=>{if(x){const{data:{docs:e,pages:s,docsCount:i}}=x.data,v=e.map(a=>{var w,S,P;const G=a.slot?new Date(a.slot).toLocaleDateString("en-GB"):"N/A";return{_id:a._id,id:a.longAutoIncrementId,doctorName:((w=a.doctor)==null?void 0:w.fullName)||"N/A",petParents:((S=a.petParent)==null?void 0:S.fullName)||"N/A",bookedDate:G,type:a.type,fee:`$${(((P=a.order)==null?void 0:P.amount)||0).toFixed(2)}`,status:a.status}});V(v),b(s),(o==="All"||c===0)&&B(i);const L=e.filter(a=>a.type==="Clinic").length,z=e.filter(a=>a.type==="Online").length;(o==="Clinic"||o==="All")&&I(L),(o==="Online"||o==="All")&&_(z)}f&&D(""),g&&Y.error(Z(C))},[x,g,C,f,o,c]);const U=[{label:"Today Appointments",totalValue:12,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"All Appointments",totalValue:50,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Completed",totalValue:35,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Cancelled/Declined",totalValue:5,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],h=[{id:0,name:"All",value:"All",total:c},{id:1,name:"Clinic Appointments",value:"Clinic",total:T},{id:2,name:"Video Consultation",value:"Online",total:O}],q=(e,s,i)=>{if(e.stopPropagation(),i==="view"&&u(`/appointments/details/${s==null?void 0:s._id}`),i==="edit"&&u(`/appointments/edit/${s==null?void 0:s._id}`),i==="delete"){const v=$;m(ee(!0)),m(te(v)),m(se(s==null?void 0:s._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Appointments"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{u("/appointments/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New Appointment"})]})})]}),t.jsx("div",{className:"",children:t.jsx(ne,{data:U})}),t.jsx("div",{className:"flex items-center gap-3 overflow-auto filterBtn-container",children:h==null?void 0:h.map((e,s)=>t.jsx("div",{className:"",children:t.jsxs("button",{className:`${N===s?"active-btn":""} border border-[#4c63bd] text-[#4c63bd] font-[600] inline-flex items-center justify-between gap-2 px-[11px] py-[5px] rounded-[45px] cursor-pointer transition-colors`,type:"button",onClick:()=>{E(s),F(e==null?void 0:e.value),y(1)},children:[t.jsx("span",{className:`${N===s?"text-white":""}`,children:e==null?void 0:e.name}),t.jsx("span",{className:"bg-white rounded-[20px] w-[39px] h-[31px] inline-flex items-center justify-center",children:e==null?void 0:e.total})]})},s))}),t.jsx("div",{className:"",children:t.jsx(oe,{datePicker:!0,setStartDate:M,setEndDate:H,setKeyword:D,isLoading:R,isError:g,fetchedData:A,data:A,mainHeading:"Appointments",searchBar:!0,headings:["Order #","Doctor Name","Pet Parents","Booked Date","Type","Fee","Status","Action"],cells:["id","doctorName","petParents","bookedDate","type","fee"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:q,setCurrentPage:y,pages:k,currentPage:l})})]})})}export{Ae as default};
