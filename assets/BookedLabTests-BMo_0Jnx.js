import{r as o,u as C,z as P,I as O,k as F,j as e,V as K,h as M,J as H,K as R,N as V,A as q}from"./index-D9Thu0Lz.js";import{R as z}from"./ResponsiveTable-D9t4B7zz.js";import{I as G,a as J,N as Q}from"./NoData-B6yFQmfP.js";import{B as j}from"./apiEndpoints-D7ff-bgI.js";import"./Status-CROOxf9O.js";import"./index-BC1JkQHl.js";/* empty css                */import"./index-amKFu-wi.js";function ae(){const[n,N]=o.useState([]),[i,A]=o.useState(1),[v,y]=o.useState(1),[c,d]=o.useState(""),x=10,g=C(),l=P(),{docDeleted:p}=O(t=>t==null?void 0:t.deleteModal),D=["fetch-booked-lab-tests",{currentPage:i,limit:x,keyword:c,docDeleted:p}],{isLoading:B,data:u,isError:f,error:m}=F({queryKey:D,queryFn:async()=>{let t=`${j}?page=${i}&pageSize=${x}`;return c&&(t+=`&keyword=${c}`),q.get(t)}});o.useEffect(()=>{if(u){const{data:{docs:t,pages:a}}=u.data,r=t.map(s=>{var h,b;const k=s.longAutoIncrementId||"N/A",E=s.offeredLabTests&&s.offeredLabTests.length>0?s.offeredLabTests.map($=>$.title).join(", "):"N/A",L=((h=s.labHeadOffice)==null?void 0:h.title)||"N/A",w=s.createdAt?new Date(s.createdAt).toLocaleDateString("en-GB"):"N/A",S=`$${(((b=s.order)==null?void 0:b.amount)||0).toFixed(2)}`,I=s.sampleCollectionMethod||"N/A",_=s.status||"N/A";return{_id:s._id,id:k,test:E,lab:L,collBy:w,fee:S,visit:e.jsx("span",{className:"text-[#4C63BD]",children:I}),status:_}});N(r),y(a)}p&&d(""),f&&K.error(M(m))},[u,f,m,p]);const T=(t,a,r)=>{if(t.stopPropagation(),r==="view"&&g(`/booked-lab-tests/details/${a==null?void 0:a._id}`),r==="delete"){const s=j;l(H(!0)),l(R(s)),l(V(a==null?void 0:a._id))}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[400px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Booked Lab Tests"}),e.jsx("div",{children:e.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{g("/booked-lab-tests/add")},children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Add New"})]})})]}),B?e.jsx(G,{}):f?e.jsx(J,{}):(n==null?void 0:n.length)===0?e.jsx(Q,{setKeyword:d}):e.jsx("div",{className:"",children:e.jsx(z,{data:n,mainHeading:"Booked Lab Tests",searchBar:!1,headings:["Order #","Test","Lab","Coll. By","Fee","Visit","Status","Action"],cells:["id","test","lab","collBy","fee","visit"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:T,setCurrentPage:A,pages:v,currentPage:i,setKeyword:d})})]})})}export{ae as default};
