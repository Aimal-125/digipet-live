import{r as u,j as e,a8 as F,E as N,a9 as y,aa as b}from"./index-B1B7tQkZ.js";function U({formik:l,name:t="",id:o="",label:r="",getAttachment:f=()=>{},removePreview:h=!1,setRemovePreview:j=()=>{}}){const n=u.useRef(),[s,p]=u.useState(null),[i,c]=u.useState(null);u.useEffect(()=>{f(s||null)},[f,s]),u.useEffect(()=>{h&&(c(null),p(null),j(!1))},[h,j]);const m=d=>{const a=d.target.files[0];if(i&&URL.revokeObjectURL(i),a)if(p(a),l&&l.setFieldValue&&l.setFieldValue(t,a),a.type.startsWith("image/")){const x=new FileReader;x.addEventListener("loadend",()=>{c(x.result)}),x.readAsDataURL(a)}else if(a.type.startsWith("video/")){const x=URL.createObjectURL(a);c(x)}else c(null);else p(null),c(null),l&&l.setFieldValue&&l.setFieldValue(t,null)},v=()=>{i&&s&&s.type.startsWith("video/")&&URL.revokeObjectURL(i),p(null),c(null),l&&l.setFieldValue&&l.setFieldValue(t,null),n.current&&(n.current.value="")},g=()=>s?s.type.startsWith("image/")?e.jsx("div",{className:"w-[200px] h-[200px]",children:e.jsx("img",{src:i,alt:"Image preview",className:"inline-flex w-full h-full object-cover rounded-[10px]"})}):s.type.startsWith("video/")?e.jsx("div",{className:"w-[200px] h-[200px]",children:e.jsx("video",{controls:!0,src:i,className:"w-full h-full object-cover rounded-[10px] inline-flex",children:"Your browser does not support the video tag."})}):s.type==="application/pdf"?e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(y,{size:24,className:"text-red-600"}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",Math.round(s.size/1024)," KB)"]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(b,{size:24}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",Math.round(s.size/1024)," KB)"]})]}):null;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:o,className:"block text-[18px] font-[500] text-[#252C62]",children:r}),e.jsx("input",{ref:n,type:"file",name:t,id:o,accept:"image/jpeg, image/png, image/svg+xml, video/mp4, application/pdf",hidden:!0,onChange:d=>{m(d)}}),g(),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("button",{className:"inline-flex items-center justify-center gap-1 cursor-pointer border border-[#AEC8E2] bg-white rounded-[10px] text-[#679ed4] px-4 py-2",type:"button",onClick:()=>{var d;(d=n==null?void 0:n.current)==null||d.click()},children:[e.jsx("span",{children:e.jsx(F,{size:20})}),e.jsx("span",{children:"Upload"})]})}),s?e.jsx("div",{className:"",children:e.jsx("button",{className:"inline-flex items-center justify-center gap-1 cursor-pointer bg-red-500 rounded-[10px] text-white px-4 py-2",type:"button",onClick:v,children:"Remove"})}):""]})]}),e.jsx(N,{name:t,component:"div",className:"text-sm text-red-500"})]})})}const R=l=>new Promise((t,o)=>{if(!l){o(new Error("No file provided."));return}const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=o,r.readAsDataURL(l)});export{U as A,R as c};
