import{r as n,u as z,w as K,k as O,V as Q,h as G,j as a,x as J,M as W,z as B,B as x,A as X}from"./index-B1B7tQkZ.js";import{D as Y}from"./DashboardContainer1-t7fn4B5K.js";import{R as Z}from"./ResponsiveTable-KuZDUYAc.js";import{f as tt}from"./index-RYfX4fpc.js";/* empty css                */import"./Status-BrxUu6aw.js";import"./index-C65JF4bN.js";import"./IsError-BwdHsqzW.js";import"./NoData-OMJaU7qL.js";import"./index-BlONpDat.js";import"./index-BNuOzlOq.js";import"./index-NkVyEFcp.js";import"./index-DTAqGlX4.js";function gt(){var h,f;const[d,j]=n.useState(1),[S,C]=n.useState(1),[i,I]=n.useState(""),[L,T]=n.useState(0),[l,_]=n.useState(null),[p,$]=n.useState(null),m=10,g=z(),c=K(),E=["fetch-pet-parents",{currentPage:d,limit:m,keyword:i,startDate:l,endDate:p}],{isLoading:V,data:r,isError:M,error:u}=O({queryKey:E,queryFn:()=>{let e=`/pet-parent/?page=${d}&pageSize=${m}`;return l&&(e+=`&from=${l}`),p&&(e+=`&to=${p}`),i&&(e+=`&keyword=${i}`),X.get(e)}}),[s,R]=n.useState((f=(h=r==null?void 0:r.data)==null?void 0:h.data)==null?void 0:f.docs);n.useEffect(()=>{if(r){const{data:{data:{docs:e}}}=r,{data:{data:{pages:t}}}=r;R(e),C(t),T(e==null?void 0:e.length)}u&&Q.error(G(u))},[r,u,i]);const F=(e,t,o)=>{e.stopPropagation(),o==="view"&&g(`/pet-parents/profile/${t==null?void 0:t._id}`),o==="edit"&&g(`/pet-parents/edit/${t==null?void 0:t._id}`)},H=[{label:"Total Pet Parents",totalValue:40689,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"Active Pet Parents",totalValue:10293,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Today Registered",totalValue:89e3,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked",totalValue:2040,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],U=Array.from({length:L},(e,t)=>{var o,P,y,v,b,k,N,A,D,w;return{_id:(o=s[t])==null?void 0:o._id,id:((P=s[t])==null?void 0:P.longAutoIncrementId)||((y=s[t])==null?void 0:y.autoIncrementId)||"N/A",parentsName:((v=s[t])==null?void 0:v.fullName)||"N/A",appointmentBook:(b=s[t])==null?void 0:b.appointmentsBookedCount,labTestsBooked:(k=s[t])==null?void 0:k.labTestsBookedCount,country:((N=s[t])==null?void 0:N.countryName)||"N/A",phone:tt((A=s[t])==null?void 0:A.phone)||"N/A",status:(w=(D=s[t])==null?void 0:D.user)==null?void 0:w.status}}),q=(e,t,o)=>{e.stopPropagation(),o==="change-password"&&(c(B(!0)),c(x({type:"change-password",data:{userId:t._id}}))),o==="block"&&(c(B(!0)),c(x({type:"block",data:{userId:t._id}})))};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:a.jsx("h1",{className:"main-heading",children:"Pet Parents"})}),a.jsx("div",{className:"",children:a.jsx(Y,{data:H})}),a.jsx("div",{className:"",children:a.jsx(Z,{datePicker:!0,setStartDate:_,setEndDate:$,data:U,mainHeading:"Pet Parents",searchBar:!0,isLoading:V,isError:M,fetchedData:s,headings:["ID #","Parent Name","Appointment Booked","Lab Tests Booked","Country","Phone","Status","Action"],cells:["id","parentsName","appointmentBook","labTestsBooked","country","phone"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"}],actionHandler:F,currentPage:d,setCurrentPage:j,pages:S,navigation:!0,navigationLink:"/pet-parents/profile",headingNameForNavigationOnMobile:"Parents Name",setKeyword:I,moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:a.jsx(J,{})},{label:"Block",action:"block",icon:a.jsx(W,{})}],moreActionsHandler:q})})]})})}export{gt as default};
