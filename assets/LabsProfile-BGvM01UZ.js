import{j as e,m as J,D as I,k as E,r as u,V as R,h as k,A as F,u as ae,g as se}from"./index-90C_iGnH.js";import{h as z,T as ne}from"./hasRequiredRole-CE8KSgU3.js";import{A as re,d as P,r as T,a as v}from"./doctorReportsData-Biuh15j3.js";import{R as B,P as te}from"./ResponsiveTable-D_gA95Z_.js";import{S as ie}from"./Status-CSWQGFb3.js";import{V as L}from"./view-icon-DsPpK1Wz.js";/* empty css                */import{B as oe}from"./apiEndpoints-DA67aB0N.js";import{f as X}from"./index-BZFQK5FB.js";import{E as le}from"./ExpandableText-Ci6iWPxG.js";import{a as Y,W as Z,R as ce}from"./ReviewsComponent-BYzZEEHi.js";import{E as O}from"./edit-icon-CSd65PgS.js";import{D as H}from"./delete-icon-FU5lMFq3.js";import{n as ee}from"./nameWithImage-BlHQzK97.js";import"./ButtonClipLoader-Btj_eW0L.js";import"./index-EwOyO1A0.js";import"./IsError-CviWS08M.js";import"./NoData-PjhX6X5_.js";import"./index-DN2uC23I.js";import"./index-BM3eLwdb.js";import"./index-YtPAdDxb.js";import"./index-nI4YGiSl.js";const de="/digipet-live/images/doctor-profile/location-img.svg",Q="/digipet-live/images/doctor-profile/clinic-img.svg",G=[{id:1,name:"Lab Details",requiredRoles:["admin"]},{id:2,name:"Booked Lab Test",requiredRoles:["admin"]},{id:3,name:"Withdraws",requiredRoles:["admin"]},{id:4,name:"Payouts",requiredRoles:["admin"]},{id:5,name:"Reviews",requiredRoles:["admin"]},{id:6,name:"Reports",requiredRoles:["admin"]},{id:7,name:"Branches",requiredRoles:["admin"]}];function me({tests:d,mainHeading:a=""}){return!d||d.length===0?null:e.jsxs("div",{className:"bg-white rounded-[20px] p-5",children:[e.jsx("h2",{className:"text-[20px] font-[600] mb-4",children:a}),e.jsx("div",{className:"space-y-4",children:d.map((o,l)=>{var m;return e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[o.image&&e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${J}/${o==null?void 0:o.image}`,alt:o.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:o.name}),o.price&&e.jsxs("p",{className:"text-gray-600 text-sm",children:[o.currencyCode," ",(m=o.price)==null?void 0:m.toFixed(2)]})]})]},l)})})]})}function ue(){var i,x,f,n,p;const{id:d}=I(),{data:a,error:o}=E({queryKey:["fetch-approved-lab-details",{id:d}],queryFn:()=>F.get(`/offered-lab-test?labHeadOffice=${d}`)}),l=(x=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:x.docs;u.useEffect(()=>{o&&R.error(k(o))},[o]);const m=l==null?void 0:l.map(r=>{var N,h;return{name:((N=r==null?void 0:r.labTest)==null?void 0:N.title)||(r==null?void 0:r.title)||"N/A",price:r==null?void 0:r.price,currencyCode:r==null?void 0:r.currencyCode,image:((h=r==null?void 0:r.labTest)==null?void 0:h.image)||(r==null?void 0:r.image)}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"doctor-boxes-main-container",children:[e.jsxs("div",{className:"doctor-profile-box-1 flex flex-col gap-5",children:[e.jsxs("div",{className:"doctor-about-me-container rounded-[20px] bg-white p-5 flex flex-col gap-5",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"About me"}),e.jsx("p",{className:"text-[#969696]",children:l&&l.length>0&&((n=(f=l[0])==null?void 0:f.labHeadOffice)==null?void 0:n.bio)||"N/A"})]}),e.jsx("div",{className:"doctor-skills-container",children:m&&m.length>0&&e.jsx(me,{mainHeading:"Available Tests",tests:m})})]}),e.jsx("div",{className:"doctor-profile-box-2 bg-white p-5 rounded-[20px] flex flex-col gap-5",children:e.jsxs("div",{className:"doctor-detailed-about-me-container flex flex-col gap-5",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex w-[40px] h-[40px] bg-[#F1F5F9] rounded-[6px] p-2",children:e.jsx("img",{className:"inline-flex w-full h-full",src:re,alt:"about me icon"})}),e.jsx("span",{className:"text-[#4C63BD] font-[600] text-[20px]",children:"About me"})]}),e.jsx("div",{className:"doctor-description-text-div",children:e.jsx("p",{className:"text-[#969696]",children:l&&l.length>0&&((p=l[0])==null?void 0:p.description)||"N/A"})})]})})]})})}function pe(){var b,A,y,D,c,w;const{id:d}=I();ae();const[a,o]=u.useState(1),[l,m]=u.useState(""),i=10,x=["labBookedLabTests",{labId:d,page:a,limit:i,keyword:l}],{isLoading:f,data:n,isError:p,error:r,isSuccess:N}=E({queryKey:x,queryFn:()=>F.get(oe,{params:{lab:d,page:a,pageSize:i}}),enabled:!!d,keepPreviousData:!0,onError:s=>{R.error(k(s))}}),h=((A=(b=n==null?void 0:n.data)==null?void 0:b.data)==null?void 0:A.docs)||[],j=((D=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:D.pages)||1;(w=(c=n==null?void 0:n.data)==null?void 0:c.data)!=null&&w.docsCount;const t=(s,C,S)=>{s.stopPropagation()},g=h.map(s=>{var M,$,_,K,W,U,V;const C=((M=s==null?void 0:s.offeredLabTests)==null?void 0:M.map(q=>q==null?void 0:q.title).filter(Boolean).join(", "))||"N/A";(s==null?void 0:s.sampleCollectionMethod)==="Home"||(s!=null&&s.sampleCollectionMethod?s.sampleCollectionMethod:($=s==null?void 0:s.labBranchOffice)!=null&&$.title||(_=s==null?void 0:s.labHeadOffice)!=null&&_.title);const S=s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A";return(K=s==null?void 0:s.medicalRecord)!=null&&K.image&&`${J}${s.medicalRecord.image}`,{_id:s==null?void 0:s._id,id:(s==null?void 0:s.longAutoIncrementId)||"N/A",labName:((W=s==null?void 0:s.labHeadOffice)==null?void 0:W.title)||"N/A",email:((U=s==null?void 0:s.user)==null?void 0:U.email)||"N/A",phone:X((V=s==null?void 0:s.user)==null?void 0:V.phone)||"N/A",bookedLabTest:e.jsx(le,{text:C}),bookedDate:S,status:e.jsx(ie,{status:s==null?void 0:s.status})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(B,{isLoading:f,isError:p,fetchedData:h,data:g,mainHeading:"Booked Lab Tests",searchBar:!1,keyword:l,setKeyword:m,headings:["ID #","Lab Name","Email","Phone","Booked Lab Test","Booked Date","Status"],cells:["id","labName","email","phone","bookedLabTest","bookedDate","status"],status:!1,actions:!1,actionTypes:[{action:"view",icon:L}],actionHandler:t,setCurrentPage:o,pages:j,currentPage:a})})})}function xe(){const[d,a]=u.useState(!0),[o,l]=u.useState(!1),[m,i]=u.useState(1),[x,f]=u.useState(3),n=(j,t,g)=>{j.stopPropagation(),console.log(t,`${g} btn clicked`)},r=Array.from({length:10},(j,t)=>{var g,b,A,y,D,c;return{id:(g=P[t])==null?void 0:g.id,accountNumber:(b=P[t])==null?void 0:b.accountNumber,creditedOn:(A=P[t])==null?void 0:A.creditedOn,requestedDate:(y=P[t])==null?void 0:y.requestedDate,amount:(D=P[t])==null?void 0:D.amount,status:(c=P[t])==null?void 0:c.status}}),h=Array.from({length:10},(j,t)=>{var g,b,A,y,D,c,w,s,C,S;return{id:(g=T[t])==null?void 0:g.id,patient:ee((b=T[t])==null?void 0:b.patientImage,(A=T[t])==null?void 0:A.patient),appointmentDate:(y=T[t])==null?void 0:y.appointmentDate,amount:Y((D=T[t])==null?void 0:D.currency,(c=T[t])==null?void 0:c.amount),status:(w=T[t])==null?void 0:w.status,labTestDate:(s=T[t])==null?void 0:s.labTestDate,reportDate:(C=T[t])==null?void 0:C.reportDate,cancelledDate:(S=T[t])==null?void 0:S.cancelledDate}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(Z,{statistics:!0,bankDetails:!0}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{children:e.jsx("button",{type:"button",className:`${d?"bg-[#4C63BD] text-white":""} rounded-[20px] py-2 px-4 text-[#4C63BD] border border-[#4C63BD] cursor-pointer`,onClick:()=>{a(!0),l(!1)},children:"Withdraw History"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:`${o?"bg-[#4C63BD] text-white":""} rounded-[20px] py-2 px-4 text-[#4C63BD] border border-[#4C63BD] cursor-pointer`,onClick:()=>{l(!0),a(!1)},children:"Refund Requests"})})]}),e.jsxs("div",{className:"",children:[d?e.jsx(B,{isLoading:!1,isError:!1,fetchedData:r,data:r,mainHeading:"",searchBar:!0,headings:["ID #","Account #","Created On","Transferred Date","Amount","Status"],cells:["id","accountNumber","creditedOn","requestedDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:O},{action:"delete",icon:H}],actionHandler:n,setCurrentPage:i,pages:x}):"",o?e.jsx(B,{isLoading:!1,isError:!1,fetchedData:h,data:h,mainHeading:"",searchBar:!0,headings:["ID #","Pet Parent","Lab Test Date","Report Date","Cancelled Date","Amount","Status"],cells:["id","patient","labTestDate","reportDate","cancelledDate","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:O},{action:"delete",icon:H}],actionHandler:n,setCurrentPage:i,pages:x}):""]})]})})}function fe(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx(Z,{settings:!0})})})}function ge(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(ce,{})})})}function he(){const[d,a]=u.useState(1),[o,l]=u.useState(3),m=(f,n,p)=>{f.stopPropagation(),console.log(n,`${p} btn clicked`)},x=Array.from({length:10},(f,n)=>{var p,r,N,h,j,t,g,b;return{id:(p=v[n])==null?void 0:p.id,petParent:ee((r=v[n])==null?void 0:r.parentImage,(N=v[n])==null?void 0:N.parentName),appointmentDate:(h=v[n])==null?void 0:h.appointmentDate,bookedOn:(j=v[n])==null?void 0:j.bookedOn,amount:Y((t=v[n])==null?void 0:t.currency,(g=v[n])==null?void 0:g.amount),status:(b=v[n])==null?void 0:b.status}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(B,{isLoading:!1,isError:!1,fetchedData:x,data:x,mainHeading:"",searchBar:!1,headings:["ID #","Pet Parents","Appointment Date","BookedOn","Amount","Status"],cells:["id","petParent","appointmentDate","bookedOn","amount"],status:!0,actions:!1,actionTypes:[{action:"view",icon:L},{action:"edit",icon:O},{action:"delete",icon:H}],actionHandler:m,currentPage:d,setCurrentPage:a,pages:o})})})}function be(){const[d,a]=u.useState(1),[o,l]=u.useState(3),m=[{id:1,name:"Sofi's Clinic",image:Q,appointmentFee:"$350",address:"2286 Sundown Lane, Old Trafford 24541, UK",openingHours:[{day:"Monday",openingTime:"7:00 AM",closingTime:"9:00 PM"},{day:"Tuesday",openingTime:"7:00 AM",closingTime:"9:00 PM"}]},{id:2,name:"Sofi's Clinic",image:Q,appointmentFee:"$350",address:"2286 Sundown Lane, Old Trafford 24541, UK",openingHours:[{day:"Monday",openingTime:"7:00 AM",closingTime:"9:00 PM"},{day:"Tuesday",openingTime:"7:00 AM",closingTime:"9:00 PM"}]}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex flex-col gap-5",children:m==null?void 0:m.map((i,x)=>{var f;return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-[12px] p-5 flex max-[1025px]:flex-col gap-3 justify-between",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex roudned-[6px] w-[50px] h-[50px]",children:e.jsx("img",{className:"inline-flex w-full h-full rounded-[6px]",src:i==null?void 0:i.image,alt:"clinic image"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[500] text-[18px]",children:i==null?void 0:i.name}),e.jsxs("p",{className:"text-[#4C63BD] flex items-center gap-1",children:[e.jsx("span",{children:i==null?void 0:i.appointmentFee}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Appointment"})]}),e.jsx("p",{children:i==null?void 0:i.address})]})]}),e.jsx("div",{className:"flex max-[1025px]:flex-col max-[1025px]:items-start items-center gap-5",children:(f=i==null?void 0:i.openingHours)==null?void 0:f.map((n,p)=>e.jsxs("div",{className:"border border-gray-300 rounded-[12px] p-5 flex flex-col gap-3 justify-center items-center",children:[e.jsx("p",{className:"font-[600] text-[18px]",children:n==null?void 0:n.day}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:n==null?void 0:n.openingTime}),e.jsx("span",{children:"-"}),e.jsx("span",{children:n==null?void 0:n.closingTime})]})]},p))})]})}),e.jsx("div",{className:"flex rounded-[12px] w-[250px] max-[1025px]:w-full h-[200px]",children:e.jsx("img",{src:de,alt:"location image",className:"w-full h-full inline-flex rounded-[12px] object-cover"})})]},x)})}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(te,{totalPages:o,currentPage:d,setCurrentPage:a})})]})})}function $e(){var y,D;const{id:d}=I(),[a,o]=u.useState({}),[l,m]=u.useState(!1),[i,x]=u.useState(!1),f=se(),n=f==null?void 0:f.roles,p=u.useMemo(()=>n,[]),[r,N]=u.useState(1),h=["fetch-approved-lab-profile-data",{id:d}],{data:j,error:t}=E({queryKey:h,queryFn:()=>F.get(`/lab/${d}`)});u.useEffect(()=>{if(j){const{data:{data:{doc:c}}}=j;o(c)}t&&R.error(k(t))},[j,t]),u.useEffect(()=>{const c=G.find(w=>z(w.requiredRoles,p));c?N(c.id):(R.error("User has no access to any tabs"),N(null))},[p]);const g={profileName:(a==null?void 0:a.title)||(a==null?void 0:a.fullName)||((y=a==null?void 0:a.user)==null?void 0:y.username)||e.jsxs("span",{children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})||"N/A",profileImage:(a==null?void 0:a.image)||((D=a==null?void 0:a.user)==null?void 0:D.image),phone:X(a==null?void 0:a.phone)||"N/A",email:(a==null?void 0:a.email)||"N/A",country:(a==null?void 0:a.countryName)||"N/A",state:(a==null?void 0:a.province)||"N/A",city:(a==null?void 0:a.city)||"N/A",address:(a==null?void 0:a.address)||"",status:(a==null?void 0:a.status)||""},b=async()=>{m(!0);try{await new Promise(c=>setTimeout(c,1e3))}catch(c){R.error(k(c))}finally{m(!1)}},A=async()=>{x(!0);try{await new Promise(c=>setTimeout(c,1e3))}catch(c){R.error(k(c))}finally{x(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Lab Profile"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Lab"})})})]}),r!==null&&e.jsx(ne,{activeTab:r,setActiveTab:N,roles:p,hasRequiredRole:z,tabs:G,profileData:g,button1Label:"Send Message",button1Handler:b,submitting1:l,button2Label:"Block",button2Handler:A,submitting2:i}),e.jsxs("div",{className:"",children:[r===1?e.jsx(ue,{}):"",r===2?e.jsx(pe,{}):"",r===3?e.jsx(xe,{}):"",r===4?e.jsx(fe,{}):"",r===5?e.jsx(ge,{}):"",r===6?e.jsx(he,{}):"",r===7?e.jsx(be,{}):""]})]})})}export{$e as default};
