import{r as n,u as q,z,I as H,k as G,V as J,h as Q,j as t,J as W,K as X,N as Y,A as Z}from"./index-CtF5NqjV.js";import{D as ee}from"./DashboardContainer1-BEmf-oFx.js";import{R as te}from"./ResponsiveTable-BVHihXma.js";import{I as se,a as ae,N as ne}from"./NoData-CRNyNY9D.js";import{A as S}from"./apiEndpoints-D7ff-bgI.js";/* empty css                           */import"./Status-CFvwze7x.js";import"./index-CP8FX3G0.js";/* empty css                */import"./index-R1RIAz4U.js";function ge(){const[l,P]=n.useState([]),[r,A]=n.useState(1),[V,$]=n.useState(1),[c,d]=n.useState(""),[y,b]=n.useState(0),[p,k]=n.useState(0),[E,I]=n.useState(0),[B,T]=n.useState(0),[o,O]=n.useState("All"),N=10,u=q(),m=z(),{docDeleted:x}=H(e=>e==null?void 0:e.deleteModal),_=["fetch-appointments",{currentPage:r,limit:N,keyword:c,filterBtnType:o,docDeleted:x}],{isLoading:F,data:g,isError:f,error:j}=G({queryKey:_,queryFn:async()=>{let e=`${S}?page=${r}&pageSize=${N}`;return c&&(e+=`&keyword=${c}`),o!=="All"&&(e+=`&type=${o}`),Z.get(e)}});n.useEffect(()=>{if(g){const{data:{docs:e,pages:s,docsCount:i}}=g.data,v=e.map(a=>{var C,D,w;const U=a.slot?new Date(a.slot).toLocaleDateString("en-GB"):"N/A";return{_id:a._id,id:a.longAutoIncrementId,doctorName:((C=a.doctor)==null?void 0:C.fullName)||"N/A",petParents:((D=a.petParent)==null?void 0:D.fullName)||"N/A",bookedDate:U,type:a.type,fee:`$${(((w=a.order)==null?void 0:w.amount)||0).toFixed(2)}`,status:a.status}});P(v),$(s),(o==="All"||p===0)&&k(i);const L=e.filter(a=>a.type==="Clinic").length,R=e.filter(a=>a.type==="Online").length;(o==="Clinic"||o==="All")&&I(L),(o==="Online"||o==="All")&&T(R)}x&&d(""),f&&J.error(Q(j))},[g,f,j,x,o,p]);const M=[{label:"Today Appointments",totalValue:12,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"All Appointments",totalValue:50,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Completed",totalValue:35,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Cancelled/Declined",totalValue:5,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],h=[{id:0,name:"All",value:"All",total:p},{id:1,name:"Clinic Appointments",value:"Clinic",total:E},{id:2,name:"Video Consultation",value:"Online",total:B}],K=(e,s,i)=>{if(e.stopPropagation(),i==="view"&&u(`/appointments/details/${s==null?void 0:s._id}`),i==="edit"&&u(`/appointments/edit/${s==null?void 0:s._id}`),i==="delete"){const v=S;m(W(!0)),m(X(v)),m(Y(s==null?void 0:s._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Appointments"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{u("/appointments/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New Appointment"})]})})]}),t.jsx("div",{className:"",children:t.jsx(ee,{data:M})}),t.jsx("div",{className:"flex items-center gap-3 overflow-auto filterBtn-container",children:h==null?void 0:h.map((e,s)=>t.jsx("div",{className:"",children:t.jsxs("button",{className:`${y===s?"active-btn":""} border border-[#4c63bd] text-[#4c63bd] font-[600] inline-flex items-center justify-between gap-2 px-[11px] py-[5px] rounded-[45px] cursor-pointer transition-colors`,type:"button",onClick:()=>{b(s),O(e==null?void 0:e.value),A(1)},children:[t.jsx("span",{className:`${y===s?"text-white":""}`,children:e==null?void 0:e.name}),t.jsx("span",{className:"bg-white rounded-[20px] w-[39px] h-[31px] inline-flex items-center justify-center",children:e==null?void 0:e.total})]})},s))}),F?t.jsx(se,{}):f?t.jsx(ae,{}):(l==null?void 0:l.length)===0?t.jsx(ne,{setKeyword:d}):t.jsx("div",{className:"",children:t.jsx(te,{data:l,mainHeading:"Appointments",searchBar:!1,headings:["Order #","Doctor Name","Pet Parents","Booked Date","Type","Fee","Status","Action"],cells:["id","doctorName","petParents","bookedDate","type","fee"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:K,setCurrentPage:A,pages:V,currentPage:r,setKeyword:d})})]})})}export{ge as default};
