import{r as o,g as v,u as w,n as y,j as s,F as E,a as F,A as S,V as m,s as P,b as L,c as q}from"./index-BGHtLGIu.js";import{c as V,a as u,F as C,b as R,d as p,E as g}from"./index.esm-C_c1U5EP.js";function M(){const[r,f]=o.useState(!1),i=v(),l=w(),t=o.useCallback(e=>{y(l,q,e)},[l]);o.useEffect(()=>{if(i){const{roles:e}=i;t(e)}},[t,i]);const h={identifier:"",password:""},j=V().shape({identifier:u().email().required("Required"),password:u().required("Required")}),b=async(e,{setSubmitting:c})=>{var d,x;c(!0);try{const{data:a}=await S.post("/admin/login",e);if(a!=null&&a.success){m.success(((d=a==null?void 0:a.data)==null?void 0:d.message)||"Login Successful");const{data:{doc:n}}=a;if(((x=Object.keys(n))==null?void 0:x.length)>0){P(n);const{roles:N}=n;t(N)}}}catch(a){m.error(L(a))}finally{c(!1)}};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"login-page-container",children:s.jsxs("div",{className:"login-container",children:[s.jsx("div",{className:"login-box-1",children:s.jsxs("p",{className:"login-logo-text",children:[s.jsx("span",{className:"text-[#fff]",children:"Digi"}),s.jsx("span",{className:"text-[#83B830]",children:"Pet"})]})}),s.jsxs("div",{className:"login-box-2",children:[s.jsx("p",{className:"font-medium text-2xl",children:"Login"}),s.jsx("p",{children:"Login to access your account"}),s.jsx(C,{initialValues:h,validationSchema:j,onSubmit:b,children:e=>s.jsxs(R,{className:"login-form",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(p,{className:"border border-gray-300 w-full px-4 py-2 rounded",name:"identifier",id:"identifier",placeholder:"Email",form:e}),s.jsx(g,{name:"identifier",component:"div",className:"text-red-500 text-sm"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"border border-gray-300 flex rounded",children:[s.jsx(p,{className:"w-full px-4 py-2",type:r?"text":"password",name:"password",id:"password",placeholder:"Password",form:e}),s.jsx("button",{type:"button",className:"w-[40px] inline-flex justify-center items-center cursor-pointer",onClick:()=>f(!r),children:r?s.jsx(E,{}):s.jsx(F,{})})]}),s.jsx(g,{name:"password",component:"div",className:"text-red-500 text-sm"})]}),s.jsx("div",{children:s.jsx("button",{className:`${e.isSubmitting?"cursor-not-allowed":"cursor-pointer"} bg-[#196498] w-full p-2 rounded text-white font-bold`,type:"submit",disabled:e.isSubmitting,children:"Login"})})]})})]})]})})})}export{M as default};
