import{r as n,u as C,z,a4 as F,k as H,V as M,h as q,j as s,H as B,a5 as K,I as V,A as O}from"./index-BlNJeTnI.js";import{R as Q}from"./ResponsiveTable-DiwuAV0F.js";import{I as T,a as G}from"./IsLoading-D95Gb4F-.js";import{N as J}from"./NoData-B3aR2nQK.js";import"./Status-Di69wyNS.js";import"./index-oJTn2rPy.js";/* empty css                  */import"./index-CMglQiNc.js";function re(){const[t,E]=n.useState([]),[d,I]=n.useState(1),[v,S]=n.useState(1),[l,u]=n.useState(""),h=10,x=C(),m=z(),[k,w]=n.useState(0),{docDeleted:p}=F(a=>a==null?void 0:a.deleteModal),U=["fetch-admin-users",{currentPage:d,limit:h,keyword:l,docDeleted:p}],{isLoading:b,data:i,isError:L,error:g}=H({queryKey:U,queryFn:()=>O.get(`/admin/admin-user/?page=${d}&pageSize=${h}&keyword=${l}`)});n.useEffect(()=>{if(i){const{data:{data:{docs:a}}}=i,{data:{data:{pages:e}}}=i;E(a),S(e),w(a==null?void 0:a.length)}p&&u(""),g&&M.error(q(g))},[i,g,p,l]);const P=(a,e,o)=>{if(a.stopPropagation(),o==="edit"&&x(`/admin-users/edit/${e==null?void 0:e._id}`),o==="delete"){const c="/admin/admin-user";m(B(!0)),m(K(c)),m(V(e==null?void 0:e._id))}console.log(e,`${o} btn clicked`)},R=Array.from({length:k},(a,e)=>{var c,f,j,A,y,N;const o=r=>r?r.charAt(0).toUpperCase()+r.slice(1):"";return{_id:(c=t[e])==null?void 0:c._id,id:((f=t[e])==null?void 0:f.longAutoIncrementId)||((j=t[e])==null?void 0:j.autoIncrementId)||"N/A",username:((A=t[e])==null?void 0:A.username)||"N/A",email:((y=t[e])==null?void 0:y.email)||"N/A",role:(()=>{var D;const r=(D=t[e])==null?void 0:D.roles;if(Array.isArray(r)&&r.length>0){const _=r.map($=>o($));return s.jsx("span",{children:_.join(", ")})}return"N/A"})(),status:((N=t[e])==null?void 0:N.status)||"N/A"}});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Admin Users"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{x("/admin-users/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),b?s.jsx(T,{}):L?s.jsx(G,{}):(t==null?void 0:t.length)===0?s.jsx(J,{setKeyword:u}):s.jsx("div",{className:"",children:s.jsx(Q,{data:R,mainHeading:"Admin Users",searchBar:!0,headings:["ID #","Username","Email","Role","Status","Action"],cells:["id","username","email","role"],status:!0,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:P,setCurrentPage:I,pages:v,currentPage:d,setKeyword:u})})]})})}export{re as default};
