import{r as i,u as _,z as F,k as R,V as H,h as U,j as e,B as $,M as q,C as A,D as N,A as z}from"./index-BxhrTQri.js";import{D as O}from"./DashboardContainer1-DR1SaXty.js";import{R as T}from"./ResponsiveTable-BOmT_VBO.js";import{P as Y,D as J,A as K,a as Q}from"./admin-profit-icon-YhiRSQEj.js";import{V as W}from"./view-icon-DsPpK1Wz.js";import{E as G}from"./edit-icon-CSd65PgS.js";/* empty css                */import{f as X}from"./index-ek4iHqdz.js";import{h as Z}from"./moment-C5S46NFB.js";import"./Status-BBB0qoK2.js";import"./index-DFUMWaLX.js";import"./NoData-D5nSU70a.js";import"./index-C9TsHVx2.js";import"./index-DygF_gE-.js";function ha(){var p,u;const[c,j]=i.useState(1),[y,v]=i.useState(1),d=10,[L,I]=i.useState(0),P=_(),r=F(),w=["fetch-labs-declined",{currentPage:c,limit:d}],{isLoading:k,data:o,isError:V,error:l}=R({queryKey:w,queryFn:()=>z.get(`lab?status=Declined&isLabBranch=no&page=${c}&pageSize=${d}`)}),[t,E]=i.useState((u=(p=o==null?void 0:o.data)==null?void 0:p.data)==null?void 0:u.docs);i.useEffect(()=>{if(o){const{data:{data:{docs:s}}}=o,{data:{data:{pages:a}}}=o;E(s),v(a),I(s==null?void 0:s.length)}l&&H.error(U(l))},[o,l]);const B=Array.from({length:L},(s,a)=>{var n,m,h,g,f,b,x,D;return{_id:(n=t[a])==null?void 0:n._id,id:((m=t[a])==null?void 0:m.longAutoIncrementId)||((h=t[a])==null?void 0:h.autoIncrementId)||"N/A",labName:((g=t[a])==null?void 0:g.title)||"N/A",email:((f=t[a])==null?void 0:f.email)||"N/A",phone:X((b=t[a])==null?void 0:b.phone)||"N/A",joinedDate:Z(((x=t[a])==null?void 0:x.createdAt)||"2025-01-01").format("DD/MM/YY"),status:((D=t[a])==null?void 0:D.status)||"N/A"}}),C=[{label:"All Labs",totalValue:40689,icon:Y,status:"Up",value:8.5,duration:"yesterday"},{label:"In Wait of Verification",totalValue:10293,icon:J,status:"Up",value:1.3,duration:"past week"},{label:"Verified Labs",totalValue:89e3,icon:K,status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked Labs",totalValue:2040,icon:Q,status:"Up",value:1.8,duration:"yesterday"}],M=(s,a,n)=>{s.stopPropagation(),n==="view"&&P(`/labs/declined/profile/${a==null?void 0:a._id}`)},S=(s,a,n)=>{s.stopPropagation(),n==="change-password"&&(r(A(!0)),r(N({type:"change-password",data:{userId:a._id}}))),n==="block"&&(r(A(!0)),r(N({type:"block",data:{userId:a._id}})))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Labs"}),e.jsx("div",{children:e.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Add New Lab"})]})})]}),e.jsx("div",{className:"",children:e.jsx(O,{data:C})}),e.jsx("div",{className:"",children:e.jsx(T,{isLoading:k,isError:V,fetchedData:t,data:B,mainHeading:"All Labs",searchBar:!0,headings:["ID #","Lab Name","Email","Phone","Joined Date","Status","Action"],cells:["id","labName","email","phone","joinedDate"],status:!0,actions:!0,actionTypes:[{action:"view",icon:W},{action:"edit",icon:G}],actionHandler:M,currentPage:c,setCurrentPage:j,pages:y,navigation:!0,navigationLink:"/labs/declined/profile",headingNameForNavigationOnMobile:"Lab Name",moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:e.jsx($,{})},{label:"Block",action:"block",icon:e.jsx(q,{})}],moreActionsHandler:S})})]})})}export{ha as default};
