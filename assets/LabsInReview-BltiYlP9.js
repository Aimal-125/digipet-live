import{r as n,u as q,w as z,k as K,V as O,h as Y,j as e,x as J,M as Q,z as N,B as j,A as T}from"./index-BsC4CiLt.js";import{D as W}from"./DashboardContainer1-DACxEmPH.js";import{R as G}from"./ResponsiveTable-CwHPkwiT.js";import{P as X,D as Z,A as aa,a as ea}from"./admin-profit-icon-YhiRSQEj.js";import{V as ta}from"./view-icon-DsPpK1Wz.js";import{E as sa}from"./edit-icon-CSd65PgS.js";/* empty css                */import{f as oa}from"./index-2PItWAhb.js";import{h as na}from"./moment-C5S46NFB.js";import"./Status-BCEaVBkQ.js";import"./index-NiuxfhvR.js";import"./IsError-DysmRO1f.js";import"./NoData-CEn6Zv-n.js";import"./index-DInAQVjv.js";import"./index-CvgDGYcH.js";import"./index-QFobRxCo.js";import"./index-C4oxCGHh.js";function ya(){var h,g;const[c,I]=n.useState(1),[L,P]=n.useState(1),[l,k]=n.useState(null),[d,E]=n.useState(null),[u,S]=n.useState(""),m=10,[V,B]=n.useState(0),f=q(),i=z(),M=["fetch-labs-in-review",{currentPage:c,limit:m,startDate:l,endDate:d,keyword:u}],{isLoading:_,data:r,isError:$,error:p}=K({queryKey:M,queryFn:()=>{let t=`lab?status=In Review&isLabBranch=no&page=${c}&pageSize=${m}`;return l&&(t+=`&from=${l}`),d&&(t+=`&to=${d}`),u&&(t+=`&keyword=${u}`),T.get(t)}}),[s,C]=n.useState((g=(h=r==null?void 0:r.data)==null?void 0:h.data)==null?void 0:g.docs);n.useEffect(()=>{if(r){const{data:{data:{docs:t}}}=r,{data:{data:{pages:a}}}=r;C(t),P(a),B(t==null?void 0:t.length)}p&&O.error(Y(p))},[r,p]);const R=Array.from({length:V},(t,a)=>{var o,b,x,D,v,w,A,y;return{_id:(o=s[a])==null?void 0:o._id,id:((b=s[a])==null?void 0:b.longAutoIncrementId)||((x=s[a])==null?void 0:x.autoIncrementId)||"N/A",labName:((D=s[a])==null?void 0:D.title)||"N/A",email:((v=s[a])==null?void 0:v.email)||"N/A",phone:oa((w=s[a])==null?void 0:w.phone)||"N/A",joinedDate:na(((A=s[a])==null?void 0:A.createdAt)||"2025-01-01").format("DD/MM/YY"),status:((y=s[a])==null?void 0:y.status)||"N/A"}}),F=[{label:"All Labs",totalValue:40689,icon:X,status:"Up",value:8.5,duration:"yesterday"},{label:"In Wait of Verification",totalValue:10293,icon:Z,status:"Up",value:1.3,duration:"past week"},{label:"Verified Labs",totalValue:89e3,icon:aa,status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked Labs",totalValue:2040,icon:ea,status:"Up",value:1.8,duration:"yesterday"}],H=(t,a,o)=>{t.stopPropagation(),o==="view"&&f(`/labs/in-review/profile/${a==null?void 0:a._id}`),o==="edit"&&f(`/labs/in-review/edit/${a==null?void 0:a._id}`)},U=(t,a,o)=>{t.stopPropagation(),o==="change-password"&&(i(N(!0)),i(j({type:"change-password",data:{userId:a._id}}))),o==="block"&&(i(N(!0)),i(j({type:"block",data:{userId:a._id}})))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Labs"}),e.jsx("div",{children:e.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Add New Lab"})]})})]}),e.jsx("div",{className:"",children:e.jsx(W,{data:F})}),e.jsx("div",{className:"",children:e.jsx(G,{datePicker:!0,setStartDate:k,setEndDate:E,setKeyword:S,isLoading:_,isError:$,fetchedData:s,data:R,mainHeading:"All Labs",searchBar:!0,headings:["ID #","Lab Name","Email","Phone","Joined Date","Status","Action"],cells:["id","labName","email","phone","joinedDate"],status:!0,actions:!0,actionTypes:[{action:"view",icon:ta},{action:"edit",icon:sa}],actionHandler:H,currentPage:c,setCurrentPage:I,pages:L,navigation:!0,navigationLink:"/labs/in-review/profile",headingNameForNavigationOnMobile:"Lab Name",moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:e.jsx(J,{})},{label:"Block",action:"block",icon:e.jsx(Q,{})}],moreActionsHandler:U})})]})})}export{ya as default};
