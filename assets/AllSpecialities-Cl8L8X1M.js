import{r as c,I as _,k as $,u as L,z as k,V as C,h as M,j as s,m as q,J as z,K as B,N as F,A as H}from"./index-BxhrTQri.js";import{R as K}from"./ResponsiveTable-BOmT_VBO.js";/* empty css                */import"./Status-BBB0qoK2.js";import"./index-DFUMWaLX.js";import"./NoData-D5nSU70a.js";import"./index-C9TsHVx2.js";function W(){var h,u;const[r,D]=c.useState(1),[N,A]=c.useState(1),[S,v]=c.useState(0),{docDeleted:p}=_(i=>i==null?void 0:i.deleteModal),g=10,E=["fetch-all-specialities",{currentPage:r,limit:g,docDeleted:p}],{isLoading:I,data:a,isError:b,error:o}=$({queryKey:E,queryFn:()=>H.get(`/speciality?page=${r}&pageSize=${g}`)}),[t,w]=c.useState((u=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:u.docs),x=L(),d=k();c.useEffect(()=>{var i,e,n,l;a&&(w((e=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:e.docs),A((l=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:l.pages),v(t==null?void 0:t.length)),o&&C.error(M(o))},[a,t==null?void 0:t.length,o,p]);const P=Array.from({length:S},(i,e)=>{var n,l,m,f,j;return{_id:(n=t[e])==null?void 0:n._id,id:((l=t[e])==null?void 0:l.longAutoIncrementId)||((m=t[e])==null?void 0:m.autoIncrementId)||"N/A",specialities:s.jsxs("span",{className:"inline-flex max-[351px]:flex-col max-[350px]:items-end items-center gap-[18px]",children:[s.jsx("span",{className:"w-[50px] h-[50px] rounded-full",children:s.jsx("img",{src:`${q}/${(f=t[e])==null?void 0:f.image}`,alt:"test type image",style:{width:"100%",height:"100%",display:"inline-flex",borderRadius:"50%"},onError:y=>{y.target.onerror=null,y.target.src="https://placehold.co/40x40/cccccc/000000?text=No+Img"}})}),s.jsx("span",{children:(j=t[e])==null?void 0:j.title})]})}}),R=(i,e,n)=>{if(i.stopPropagation(),n==="edit"&&x(`/all-specialities/edit/${e==null?void 0:e._id}`),n==="delete"){const l="/speciality";d(z(!0)),d(B(l)),d(F(e==null?void 0:e._id))}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"All Specialities"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{x("/all-specialities/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(K,{isLoading:I,isError:b,fetchedData:t,data:P,mainHeading:"",searchBar:!1,headings:["ID #","Specialities","Action"],cells:["id","specialities"],status:!1,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:R,currentPage:r,setCurrentPage:D,pages:N})})]})})}export{W as default};
