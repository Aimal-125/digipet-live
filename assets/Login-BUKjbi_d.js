import{r as o,g as v,u as w,n as y,c as E,a as m,j as s,F as S,b as F,d as u,E as p,e as P,f as L,A as q,V as g,s as V,h as C,i as R}from"./index-B_nrAWIt.js";function A(){const[i,f]=o.useState(!1),r=v(),l=w(),t=o.useCallback(e=>{y(l,R,e)},[l]);o.useEffect(()=>{if(r){const{roles:e}=r;t(e)}},[t,r]);const h={identifier:"",password:""},j=E().shape({identifier:m().email().required("Required"),password:m().required("Required")}),N=async(e,{setSubmitting:c})=>{var d,x;c(!0);try{const{data:a}=await q.post("/admin/login",e);if(a!=null&&a.success){g.success(((d=a==null?void 0:a.data)==null?void 0:d.message)||"Login Successful");const{data:{doc:n}}=a;if(((x=Object.keys(n))==null?void 0:x.length)>0){V(n);const{roles:b}=n;t(b)}}}catch(a){g.error(C(a))}finally{c(!1)}};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"login-page-container",children:s.jsxs("div",{className:"login-container",children:[s.jsx("div",{className:"login-box-1",children:s.jsxs("p",{className:"login-logo-text",children:[s.jsx("span",{className:"text-[#fff]",children:"Digi"}),s.jsx("span",{className:"text-[#83B830]",children:"Pet"})]})}),s.jsxs("div",{className:"login-box-2",children:[s.jsx("p",{className:"font-medium text-2xl",children:"Login"}),s.jsx("p",{children:"Login to access your account"}),s.jsx(S,{initialValues:h,validationSchema:j,onSubmit:N,children:e=>s.jsxs(F,{className:"login-form",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(u,{className:"border border-gray-300 w-full px-4 py-2 rounded",name:"identifier",id:"identifier",placeholder:"Email",form:e}),s.jsx(p,{name:"identifier",component:"div",className:"text-red-500 text-sm"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"border border-gray-300 flex rounded",children:[s.jsx(u,{className:"w-full px-4 py-2",type:i?"text":"password",name:"password",id:"password",placeholder:"Password",form:e}),s.jsx("button",{type:"button",className:"w-[40px] inline-flex justify-center items-center cursor-pointer",onClick:()=>f(!i),children:i?s.jsx(P,{}):s.jsx(L,{})})]}),s.jsx(p,{name:"password",component:"div",className:"text-red-500 text-sm"})]}),s.jsx("div",{children:s.jsx("button",{className:`${e.isSubmitting?"cursor-not-allowed":"cursor-pointer"} bg-[#196498] w-full p-2 rounded text-white font-bold`,type:"submit",disabled:e.isSubmitting,children:"Login"})})]})})]})]})})})}export{A as default};
