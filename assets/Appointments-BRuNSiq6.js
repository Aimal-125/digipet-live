import{r as n,u as z,z as H,I as L,k as G,V as J,h as Q,j as t,J as W,K as X,N as Y,A as Z}from"./index-BxhrTQri.js";import{D as ee}from"./DashboardContainer1-DR1SaXty.js";import{R as te}from"./ResponsiveTable-BOmT_VBO.js";/* empty css                */import{A as S}from"./apiEndpoints-D7ff-bgI.js";/* empty css                           */import"./Status-BBB0qoK2.js";import"./index-DFUMWaLX.js";import"./NoData-D5nSU70a.js";import"./index-C9TsHVx2.js";function ue(){const[h,P]=n.useState([]),[l,v]=n.useState(1),[V,$]=n.useState(1),[r,A]=n.useState(""),[y,b]=n.useState(0),[c,k]=n.useState(0),[E,B]=n.useState(0),[T,I]=n.useState(0),[o,O]=n.useState("All"),N=10,d=z(),p=H(),{docDeleted:u}=L(e=>e==null?void 0:e.deleteModal),_=["fetch-appointments",{currentPage:l,limit:N,keyword:r,filterBtnType:o,docDeleted:u}],{isLoading:F,data:m,isError:f,error:j}=G({queryKey:_,queryFn:async()=>{let e=`${S}?page=${l}&pageSize=${N}`;return r&&(e+=`&keyword=${r}`),o!=="All"&&(e+=`&type=${o}`),Z.get(e)}});n.useEffect(()=>{if(m){const{data:{docs:e,pages:s,docsCount:i}}=m.data,g=e.map(a=>{var C,D,w;const q=a.slot?new Date(a.slot).toLocaleDateString("en-GB"):"N/A";return{_id:a._id,id:a.longAutoIncrementId,doctorName:((C=a.doctor)==null?void 0:C.fullName)||"N/A",petParents:((D=a.petParent)==null?void 0:D.fullName)||"N/A",bookedDate:q,type:a.type,fee:`$${(((w=a.order)==null?void 0:w.amount)||0).toFixed(2)}`,status:a.status}});P(g),$(s),(o==="All"||c===0)&&k(i);const R=e.filter(a=>a.type==="Clinic").length,U=e.filter(a=>a.type==="Online").length;(o==="Clinic"||o==="All")&&B(R),(o==="Online"||o==="All")&&I(U)}u&&A(""),f&&J.error(Q(j))},[m,f,j,u,o,c]);const M=[{label:"Today Appointments",totalValue:12,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"All Appointments",totalValue:50,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Completed",totalValue:35,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Cancelled/Declined",totalValue:5,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],x=[{id:0,name:"All",value:"All",total:c},{id:1,name:"Clinic Appointments",value:"Clinic",total:E},{id:2,name:"Video Consultation",value:"Online",total:T}],K=(e,s,i)=>{if(e.stopPropagation(),i==="view"&&d(`/appointments/details/${s==null?void 0:s._id}`),i==="edit"&&d(`/appointments/edit/${s==null?void 0:s._id}`),i==="delete"){const g=S;p(W(!0)),p(X(g)),p(Y(s==null?void 0:s._id))}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Appointments"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{d("/appointments/add")},children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New Appointment"})]})})]}),t.jsx("div",{className:"",children:t.jsx(ee,{data:M})}),t.jsx("div",{className:"flex items-center gap-3 overflow-auto filterBtn-container",children:x==null?void 0:x.map((e,s)=>t.jsx("div",{className:"",children:t.jsxs("button",{className:`${y===s?"active-btn":""} border border-[#4c63bd] text-[#4c63bd] font-[600] inline-flex items-center justify-between gap-2 px-[11px] py-[5px] rounded-[45px] cursor-pointer transition-colors`,type:"button",onClick:()=>{b(s),O(e==null?void 0:e.value),v(1)},children:[t.jsx("span",{className:`${y===s?"text-white":""}`,children:e==null?void 0:e.name}),t.jsx("span",{className:"bg-white rounded-[20px] w-[39px] h-[31px] inline-flex items-center justify-center",children:e==null?void 0:e.total})]})},s))}),t.jsx("div",{className:"",children:t.jsx(te,{isLoading:F,isError:f,fetchedData:h,data:h,mainHeading:"Appointments",searchBar:!1,headings:["Order #","Doctor Name","Pet Parents","Booked Date","Type","Fee","Status","Action"],cells:["id","doctorName","petParents","bookedDate","type","fee"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:K,setCurrentPage:v,pages:V,currentPage:l,setKeyword:A})})]})})}export{ue as default};
