import{w as O,j as e,z as K,B as Y,Z as Q,_ as W,D as Z,k as V,m as p,v as B,A as z}from"./index-90C_iGnH.js";import{H as G}from"./HeadingPlusBackBtn-BmGkcs0Z.js";import{a as J}from"./index-EwOyO1A0.js";import{S as T}from"./Status-CSWQGFb3.js";import{C as X}from"./index-CnBiRqea.js";import{I as ee,a as R}from"./IsError-CviWS08M.js";import{N as se}from"./NoData-PjhX6X5_.js";import{A as le,S as ie}from"./apiEndpoints-DA67aB0N.js";import{f as H}from"./index-BZFQK5FB.js";import"./BackButton-CkQpbmPE.js";import"./index-DN2uC23I.js";/* empty css                */import"./index-YtPAdDxb.js";function re({data:l}){const s=O(),r=x=>{if(!x)return null;const o=x.split(".");return o.length>1?o.pop().toLowerCase():null},t=x=>{if(!x)return"File";const o=x.split("/");return o.length>1?o.pop():"File"},i=l==null?void 0:l.attachment,c=r(i),a=t(i),n=()=>i?["jpg","jpeg","png","svg"].includes(c)?e.jsx("button",{title:"view attachment",type:"button",className:"cursor-pointer text-blue-600 inline-flex w-full h-full rounded-[10px]","aria-label":"view attachment",onClick:()=>{s(K(!0)),s(Y({type:"view-attachment",data:{attachment:i}}))},children:e.jsx("img",{src:i,alt:"attachment",className:"w-full h-full inline-flex object-contain rounded-[10px]"})}):["mp4","webm","ogg"].includes(c)?e.jsxs("video",{controls:!0,className:"w-full h-full object-cover rounded-[10px]",children:[" ",e.jsx("source",{src:i,type:`video/${c}`}),"Your browser does not support the video tag."]}):c==="pdf"?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-gray-700",children:a}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View PDF"}),e.jsx("a",{href:i,download:!0,className:"text-green-600 hover:underline text-sm",children:"Download PDF"})]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsxs("p",{className:"text-sm text-gray-700",children:[a," (",c?c.toUpperCase():"Unknown Type",")"]}),e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View File"})]}):e.jsx("p",{children:"No attachment available"});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5 p-5 rounded-[20px] bg-white",children:[e.jsx("p",{className:"text-[20px] font-[600]",children:"Basic Information"}),e.jsxs("div",{className:"flex max-[768px]:flex-col max-[768px]:gap-2 gap-5",children:[e.jsxs("div",{className:"w-[400px] max-[768px]:w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"First Name"}),e.jsx("p",{children:l==null?void 0:l.firstName})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Last Name"}),e.jsx("p",{children:l==null?void 0:l.lastName})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Phone#"}),e.jsx("p",{children:l==null?void 0:l.phone})]}),e.jsxs("div",{className:"flex flex-col gap-2 max-[768px]:hidden",children:[e.jsx("p",{children:"Attachment"}),e.jsx("div",{className:"w-[250px] h-[250px] flex justify-center items-center border border-[#AEC8E2] rounded-[10px]",children:n()})]})]}),e.jsxs("div",{className:"w-[400px] max-[768px]:w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Email"}),e.jsx("p",{children:l==null?void 0:l.email})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Pet Specie"}),e.jsx("p",{children:l==null?void 0:l.petSpecie})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx("p",{children:"Symptoms"}),e.jsx("p",{children:l==null?void 0:l.symptoms})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"Visit Reason"}),e.jsx("div",{className:"",children:e.jsx("p",{className:"p-5 border border-[#AEC8E2] rounded-[10px]",children:l==null?void 0:l.visitReason})})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-[768px]:hidden",children:[e.jsx("p",{children:"Attachment"}),e.jsx("div",{className:"w-[250px] h-[250px] flex justify-center items-center border border-[#AEC8E2] rounded-[10px]",children:n()})]})]})]})]})})}function ce({data:l}){var s,r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"appointment-details-middle-card-container",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-[80px] h-[80px] flex",children:e.jsx("img",{src:l==null?void 0:l.image,alt:"image",className:"w-full h-full inline-flex object-cover rounded-[10px]"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"",children:l==null?void 0:l.id}),e.jsx("p",{className:"text-[18px]",children:l==null?void 0:l.name})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(J,{})}),e.jsx("span",{children:(s=l==null?void 0:l.appointmentDetails)==null?void 0:s.date})]}),e.jsx("p",{children:(r=l==null?void 0:l.appointmentDetails)==null?void 0:r.type})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(Q,{})}),e.jsx("span",{children:l==null?void 0:l.email})]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(W,{})}),e.jsx("span",{children:l==null?void 0:l.phone})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"Appointment"}),e.jsx("div",{children:e.jsx(T,{status:l==null?void 0:l.appointmentStatus})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"Payment Status"}),e.jsx("div",{children:e.jsx(T,{status:l==null?void 0:l.paymentStatus})})]})]})})}function ne({data:l={}}){var s,r,t;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5 bg-white rounded-[20px] p-5",children:[e.jsxs("div",{className:"flex max-[768px]:flex-col gap-5",children:[e.jsx("div",{className:"flex w-[160px] h-[160px]",children:e.jsx("img",{src:l==null?void 0:l.image,alt:"profile image",className:"w-full h-full inline-flex rounded-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-[600] text-[20px]",children:l==null?void 0:l.name}),e.jsx("p",{children:l==null?void 0:l.speciality})]}),e.jsx("div",{children:e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(X,{})}),e.jsx("span",{children:l==null?void 0:l.address})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"Booking Info"}),e.jsxs("div",{className:"flex flex-wrap gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Service"}),e.jsx("p",{children:(s=l==null?void 0:l.bookingInfo)==null?void 0:s.service})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Date & Time"}),e.jsx("p",{children:(r=l==null?void 0:l.bookingInfo)==null?void 0:r.date})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-[600]",children:"Appointment Type"}),e.jsx("p",{children:(t=l==null?void 0:l.bookingInfo)==null?void 0:t.appointmentType})]})]})]})]})})}const xe=async l=>(await z.get(`${le}/${l}`)).data.data.doc,oe=async l=>l?(await z.get(`${ie}/${l}`)).data.data.doc:null;function be(){var j,u,g,N,v,w,y,A,b,S,D,P,E,I,C,F,k,$,L;const{id:l}=Z(),{data:s,isLoading:r,isError:t,error:i,isSuccess:c}=V({queryKey:["appointmentDetails",{id:l}],queryFn:()=>xe(l),enabled:!!l}),a=((j=s==null?void 0:s.doctor)==null?void 0:j.specialities)||[],{data:n,isLoading:x,isError:o,error:d,isSuccess:te}=V({queryKey:["doctorSpecialities",a],queryFn:async()=>(await Promise.all(a.map(m=>oe(m)))).filter(m=>m&&m.title).map(m=>m.title),enabled:c&&a.length>0});if(r||x)return e.jsx(ee,{});if(t)return console.error("Error fetching appointment details:",i),e.jsx(R,{message:i.message||"Failed to load appointment details."});if(o)return console.error("Error fetching specialities:",d),e.jsx(R,{message:d.message||"Failed to load doctor's specialities."});if(c&&!s)return e.jsx(se,{goBackButton:!1});const M=(n==null?void 0:n.length)>0?n.join(", "):"N/A",U={image:(g=(u=s==null?void 0:s.doctor)==null?void 0:u.user)!=null&&g.image?`${p}/${s.doctor.user.image}`:B,name:((N=s==null?void 0:s.doctor)==null?void 0:N.fullName)||"N/A",speciality:M,employeeId:((v=s==null?void 0:s.doctor)==null?void 0:v.longAutoIncrementId)||"N/A",address:`${((w=s==null?void 0:s.doctor)==null?void 0:w.city)||""}, ${((y=s==null?void 0:s.doctor)==null?void 0:y.province)||""}`,bookingInfo:{service:((A=s==null?void 0:s.weekDayMoreInfo)==null?void 0:A.aboutService)||"N/A",date:s!=null&&s.slot?new Date(s.slot).toLocaleString():"N/A",appointmentType:(s==null?void 0:s.type)||"N/A"}},_={image:(b=s==null?void 0:s.pet)!=null&&b.image?`${p}/${s.pet.image}`:B,id:(s==null?void 0:s.longAutoIncrementId)||"N/A",name:((S=s==null?void 0:s.pet)==null?void 0:S.name)||"N/A",appointmentDetails:{date:s!=null&&s.slot?new Date(s.slot).toLocaleString():"N/A",type:(s==null?void 0:s.type)||"N/A"},email:(s==null?void 0:s.email)||"N/A",phone:H(s==null?void 0:s.phone)||"N/A",appointmentStatus:(s==null?void 0:s.status)||"N/A",paymentStatus:(s==null?void 0:s.paymentStatus)||"N/A"},h=((P=(D=s==null?void 0:s.pet)==null?void 0:D.gallery)==null?void 0:P[0])||((E=s==null?void 0:s.pet)==null?void 0:E.image);let f=null;h&&(f=h.startsWith("http")?h:`${p}/${h}`);const q={firstName:((I=s==null?void 0:s.petParent)==null?void 0:I.firstName)||"N/A",lastName:((C=s==null?void 0:s.petParent)==null?void 0:C.lastName)||"N/A",phone:H((F=s==null?void 0:s.petParent)==null?void 0:F.phone)||"N/A",attachment:f,email:((k=s==null?void 0:s.petParent)==null?void 0:k.email)||"N/A",petSpecie:((L=($=s==null?void 0:s.pet)==null?void 0:$.petCategory)==null?void 0:L.title)||"N/A",symptoms:(s==null?void 0:s.symptoms)||"N/A",visitReason:(s==null?void 0:s.reasonForVisit)||"N/A"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"",children:e.jsx(G,{label:"Appointment Details"})}),e.jsx("div",{className:"",children:e.jsx(ne,{data:U})}),e.jsx("div",{className:"",children:e.jsx(ce,{data:_})}),e.jsx("div",{className:"",children:e.jsx(re,{data:q})})]})})}export{be as default};
