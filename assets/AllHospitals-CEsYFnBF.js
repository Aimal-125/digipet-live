import{r as o,u as R,w as q,K as B,k as F,V as O,h as Q,j as s,N as V,O as z,Q as T,A as W}from"./index--oTFs3gJ.js";import{R as G}from"./ResponsiveTable-8dZMXdQy.js";import{n as J}from"./nameWithImage-DyST1X9A.js";/* empty css                */import"./Status-BqlRFT0W.js";import"./index-CIdIKWNU.js";import"./IsError-BE29_yi0.js";import"./NoData-DidAnw_R.js";import"./index-CvwiJHFK.js";import"./index-DbHKKiG3.js";import"./index-BVp46ldf.js";import"./index-oiI3A1nS.js";function le(){var D,v;const[c,w]=o.useState(1),[E,I]=o.useState(1),[r,f]=o.useState(""),x=10,d=R(),p=q(),[$,k]=o.useState(0),{docDeleted:u}=B(t=>t==null?void 0:t.deleteModal),[g,H]=o.useState(null),[h,P]=o.useState(null),_=["fetch-all-hospitals",{currentPage:c,limit:x,keyword:r,docDeleted:u,startDate:g,endDate:h}],{isLoading:b,data:i,isError:L,error:m}=F({queryKey:_,queryFn:async()=>{let t=`/clinic?status=Approved&page=${c}&pageSize=${x}`;return g&&(t+=`&from=${g}`),h&&(t+=`&to=${h}`),r&&(t+=`&keyword=${r}`),W.get(t)}}),[a,C]=o.useState((v=(D=i==null?void 0:i.data)==null?void 0:D.data)==null?void 0:v.docs);o.useEffect(()=>{if(i){const{data:{data:{docs:t}}}=i,{data:{data:{pages:e}}}=i;C(t),I(e),k(t==null?void 0:t.length)}u&&f(""),m&&O.error(Q(m))},[i,m,u,r]);const K=(t,e,n)=>{if(t.stopPropagation(),n==="view"&&d(`/all-hospitals/details/${e==null?void 0:e._id}`),n==="edit"&&d(`/all-hospitals/edit/${e==null?void 0:e._id}`),n==="delete"){const l="/clinic";p(V(!0)),p(z(l)),p(T(e==null?void 0:e._id))}},M=Array.from({length:$},(t,e)=>{var n,l,j,y,A,N,S;return{_id:(n=a[e])==null?void 0:n._id,id:((l=a[e])==null?void 0:l.longAutoIncrementId)||((j=a[e])==null?void 0:j.autoIncrementId)||"N/A",hospitalName:J((y=a[e])==null?void 0:y.image,(A=a[e])==null?void 0:A.title),location:((N=a[e])==null?void 0:N.address)||"N/A",status:(S=a[e])==null?void 0:S.status}});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"All Hospitals"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{d("/all-hospitals/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(G,{datePicker:!0,setStartDate:H,setEndDate:P,isLoading:b,isError:L,fetchedData:a,data:M,mainHeading:"All Hospitals",searchBar:!0,headings:["ID #","Hospital Name","Location","Status","Action"],cells:["id","hospitalName","location"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:K,currentPage:c,setCurrentPage:w,setKeyword:f,pages:E})})]})})}export{le as default};
