import{r as l,j as t}from"./index-CKvnEMZY.js";import{T as j,S as b,A as S,c as A}from"./converToBase64-CdkCHkjg.js";import{H as v}from"./HeadingPlusBackBtn-C0kVFab9.js";import{c as y,a as i,e as o,F,b as I}from"./index.esm-HmjyjoH8.js";import{I as q,S as N}from"./Input-MhhqaxBj.js";import{S as E}from"./SingleImageUpload-B70_3iuq.js";import{V as P}from"./index-NOkcjhol.js";import{r as w}from"./returnErrorMessage-BWBZa02J.js";import"./index-H6eh1cUe.js";import"./no-image-icon-CabPHXKl.js";function _(){const[s,m]=l.useState(""),[c,d]=l.useState(""),r=4*1024*1024,g=["image/jpeg","image/jpg","image/png","image/svg+xml","video/mp4","application/pdf"],p=[{label:"Getting Started",value:"getting started"},{label:"How to trade",value:"how to trade"}],u={image:null,attachment:null,title:"",description:"",category:""},x=y().shape({image:o().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png, svg",e=>e===null||e instanceof File&&["image/jpeg","image/png","image/svg+xml"].includes(e.type)).required("Image is required"),attachment:o().nullable().test("fileFormat","Unsupported file format. Allowed formats: JPG, PNG, SVG, MP4, PDF.",e=>e&&g.includes(e.type)).test("fileSize",`File too large. Maximum size is ${r/(1024*1024)}MB.`,e=>e&&e.size<=r).required("Attachment is required"),title:i().required("Title is required"),description:i().required("Description is required"),category:i().required("Question Category is required")}),h=async(e,{setSubmitting:n})=>{n(!0);const f=await A(c);try{await new Promise(a=>setTimeout(()=>{a()},1e3))}catch(a){P.error(w(a))}finally{n(!1)}console.log({...e,image:s,attachment:f})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx("div",{className:"",children:t.jsx(v,{label:"Add Information"})}),t.jsx("div",{className:"p-5 bg-white rounded-[20px]",children:t.jsx(F,{initialValues:u,validationSchema:x,onSubmit:h,enableReinitialize:!0,children:e=>t.jsxs(I,{className:"flex flex-col gap-3",children:[t.jsx("div",{className:"",children:t.jsx(E,{formik:e,base64Image:s,setBase64Image:m})}),t.jsx("div",{className:"",children:t.jsx(q,{formik:e,name:"title",id:"title",label:"Title"})}),t.jsx("div",{className:"",children:t.jsx(j,{formik:e,name:"description",id:"description",label:"Description"})}),t.jsx("div",{className:"",children:t.jsx(b,{formik:e,name:"category",id:"category",label:"Question Category",options:p})}),t.jsx("div",{className:"",children:t.jsx(S,{formik:e,name:"attachment",id:"attachment",label:"Attachment",getAttachment:d})}),t.jsx("div",{className:"mt-2",children:t.jsx(N,{formik:e})})]})})})]})})}export{_ as default};
