import{r as o,u as W,w as X,N as Y,k as Z,V as ee,h as te,j as s,O as se,Q as ae,T as oe,A as ie}from"./index-90C_iGnH.js";import{D as ne}from"./DashboardContainer1-Ji67HHRG.js";import{R as le}from"./ResponsiveTable-D_gA95Z_.js";/* empty css                */import{A as k}from"./apiEndpoints-DA67aB0N.js";/* empty css                           */import"./Status-CSWQGFb3.js";import"./index-EwOyO1A0.js";import"./IsError-CviWS08M.js";import"./NoData-PjhX6X5_.js";import"./index-DN2uC23I.js";import"./index-BM3eLwdb.js";import"./index-YtPAdDxb.js";import"./index-nI4YGiSl.js";function Ne(){const[A,b]=o.useState([]),[l,y]=o.useState(1),[E,T]=o.useState(1),[r,D]=o.useState(""),[N,B]=o.useState(0),[c,_]=o.useState(0),[I,O]=o.useState(0),[F,M]=o.useState(0),[i,R]=o.useState("All"),[d,U]=o.useState(null),[u,q]=o.useState(null),j=10,p=W(),f=X(),{docDeleted:m}=Y(e=>e==null?void 0:e.deleteModal),H=["fetch-appointments",{currentPage:l,limit:j,keyword:r,filterBtnType:i,docDeleted:m,startDate:d,endDate:u}],{isLoading:K,data:x,isError:g,error:C}=Z({queryKey:H,queryFn:async()=>{let e=`${k}?page=${l}&pageSize=${j}`;return d&&(e+=`&from=${d}`),u&&(e+=`&to=${u}`),r&&(e+=`&keyword=${r}`),i!=="All"&&(e+=`&type=${i}`),ie.get(e)}});o.useEffect(()=>{if(x){const{data:{docs:e,pages:a,docsCount:n}}=x.data,v=e.map(t=>{var w,S,P,$,V;const J=t.slot?new Date(t.slot).toLocaleDateString("en-GB"):"N/A";return{_id:t._id,id:t.longAutoIncrementId,doctorName:((w=t.doctor)==null?void 0:w.fullName)||"N/A",petParents:((S=t.petParent)==null?void 0:S.fullName)||"N/A",bookedDate:J,type:t==null?void 0:t.type,doctorId:((P=t==null?void 0:t.doctor)==null?void 0:P._id)||"",clinicId:(($=t==null?void 0:t.clinic)==null?void 0:$._id)||"",fee:`$${(((V=t.order)==null?void 0:V.amount)||0).toFixed(2)}`,status:t.status}});b(v),T(a),(i==="All"||c===0)&&_(n);const z=e.filter(t=>t.type==="Clinic").length,G=e.filter(t=>t.type==="Online").length;(i==="Clinic"||i==="All")&&O(z),(i==="Online"||i==="All")&&M(G)}m&&D(""),g&&ee.error(te(C))},[x,g,C,m,i,c]);const L=[{label:"Today Appointments",totalValue:12,icon:"./images/dashboard/patients-icon.svg",status:"Up",value:8.5,duration:"yesterday"},{label:"All Appointments",totalValue:50,icon:"./images/dashboard/doctors-icon.svg",status:"Up",value:1.3,duration:"past week"},{label:"Completed",totalValue:35,icon:"./images/dashboard/appointments-icon.svg",status:"Down",value:4.3,duration:"yesterday"},{label:"Cancelled/Declined",totalValue:5,icon:"./images/dashboard/admin-profit-icon.svg",status:"Up",value:1.8,duration:"yesterday"}],h=[{id:0,name:"All",value:"All",total:c},{id:1,name:"Clinic Appointments",value:"Clinic",total:I},{id:2,name:"Video Consultation",value:"Online",total:F}],Q=(e,a,n)=>{if(e.stopPropagation(),n==="view"&&p(`/appointments/details/${a==null?void 0:a._id}`),n==="edit"&&p(`/appointments/edit/${a==null?void 0:a._id}`),n==="delete"){const v=k;f(se(!0)),f(ae(v)),f(oe(a==null?void 0:a._id))}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Appointments"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{p("/appointments/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New Appointment"})]})})]}),s.jsx("div",{className:"",children:s.jsx(ne,{data:L})}),s.jsx("div",{className:"flex items-center gap-3 overflow-auto filterBtn-container",children:h==null?void 0:h.map((e,a)=>s.jsx("div",{className:"",children:s.jsxs("button",{className:`${N===a?"active-btn":""} border border-[#4c63bd] text-[#4c63bd] font-[600] inline-flex items-center justify-between gap-2 px-[11px] py-[5px] rounded-[45px] cursor-pointer transition-colors`,type:"button",onClick:()=>{B(a),R(e==null?void 0:e.value),y(1)},children:[s.jsx("span",{className:`${N===a?"text-white":""}`,children:e==null?void 0:e.name}),s.jsx("span",{className:"bg-white rounded-[20px] w-[39px] h-[31px] inline-flex items-center justify-center",children:e==null?void 0:e.total})]})},a))}),s.jsx("div",{className:"",children:s.jsx(le,{datePicker:!0,setStartDate:U,setEndDate:q,setKeyword:D,isLoading:K,isError:g,fetchedData:A,data:A,mainHeading:"Appointments",searchBar:!0,headings:["Order #","Doctor Name","Pet Parents","Booked Date","Type","Fee","Status","Action"],cells:["id","doctorName","petParents","bookedDate","type","fee"],status:!0,actions:!0,actionTypes:[{action:"view",icon:"./images/view-icon.svg"},{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:Q,setCurrentPage:y,pages:E,currentPage:l})})]})})}export{Ne as default};
