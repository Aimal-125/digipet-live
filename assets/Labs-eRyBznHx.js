import{r,u as q,w as z,k as K,V as O,h as Y,j as t,x as J,M as Q,z as j,B as w,A as T}from"./index-DUYjTDLa.js";import{D as W}from"./DashboardContainer1-DM4GVWQy.js";import{R as G}from"./ResponsiveTable-Bx0PTskj.js";import{P as X,D as Z,A as aa,a as ta}from"./admin-profit-icon-YhiRSQEj.js";import{V as ea}from"./view-icon-DsPpK1Wz.js";import{E as sa}from"./edit-icon-CSd65PgS.js";/* empty css                */import{f as oa}from"./index-BP6acCge.js";import{h as ra}from"./moment-C5S46NFB.js";import"./Status-BubxHrRz.js";import"./index-DDsQ4hsC.js";import"./IsError-CddUd3sL.js";import"./NoData-CiBxRMDc.js";import"./index-RjsA-lLy.js";import"./index-DpQgK1aN.js";import"./index-ucCudfBO.js";import"./index-qS6WQuq_.js";function Na(){var h,g;const[c,L]=r.useState(1),[P,k]=r.useState(1),[l,I]=r.useState(null),[d,E]=r.useState(null),[p,S]=r.useState(""),m=10,[V,B]=r.useState(0),f=q(),i=z(),M=["fetch-labs",{currentPage:c,limit:m,startDate:l,endDate:d,keyword:p}],{isLoading:_,data:n,isError:$,error:u}=K({queryKey:M,queryFn:()=>{let e=`lab?status=Approved&isLabBranch=no&page=${c}&pageSize=${m}`;return l&&(e+=`&from=${l}`),d&&(e+=`&to=${d}`),p&&(e+=`&keyword=${p}`),T.get(e)}}),[s,C]=r.useState((g=(h=n==null?void 0:n.data)==null?void 0:h.data)==null?void 0:g.docs);r.useEffect(()=>{if(n){const{data:{data:{docs:e}}}=n,{data:{data:{pages:a}}}=n;C(e),k(a),B(e==null?void 0:e.length)}u&&O.error(Y(u))},[n,u]);const F=Array.from({length:V},(e,a)=>{var o,b,x,D,A,v,y,N;return{_id:(o=s[a])==null?void 0:o._id,id:((b=s[a])==null?void 0:b.longAutoIncrementId)||((x=s[a])==null?void 0:x.autoIncrementId)||"N/A",labName:((D=s[a])==null?void 0:D.title)||"N/A",email:((A=s[a])==null?void 0:A.email)||"N/A",phone:oa((v=s[a])==null?void 0:v.phone)||"N/A",joinedDate:ra(((y=s[a])==null?void 0:y.createdAt)||"2025-01-01").format("DD/MM/YY"),status:((N=s[a])==null?void 0:N.status)||"N/A"}}),R=[{label:"All Labs",totalValue:40689,icon:X,status:"Up",value:8.5,duration:"yesterday"},{label:"In Wait of Verification",totalValue:10293,icon:Z,status:"Up",value:1.3,duration:"past week"},{label:"Verified Labs",totalValue:89e3,icon:aa,status:"Down",value:4.3,duration:"yesterday"},{label:"Blocked Labs",totalValue:2040,icon:ta,status:"Up",value:1.8,duration:"yesterday"}],H=(e,a,o)=>{e.stopPropagation(),o==="view"&&f(`/labs/approved/profile/${a==null?void 0:a._id}`),o==="edit"&&f(`/labs/approved/edit/${a==null?void 0:a._id}`)},U=(e,a,o)=>{e.stopPropagation(),o==="change-password"&&(i(j(!0)),i(w({type:"change-password",data:{userId:a._id}}))),o==="block"&&(i(j(!0)),i(w({type:"block",data:{userId:a._id}})))};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[t.jsx("h1",{className:"main-heading",children:"Labs"}),t.jsx("div",{children:t.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add New Lab"})]})})]}),t.jsx("div",{className:"",children:t.jsx(W,{data:R})}),t.jsx("div",{className:"",children:t.jsx(G,{datePicker:!0,setStartDate:I,setEndDate:E,setKeyword:S,isLoading:_,isError:$,fetchedData:s,data:F,mainHeading:"All Labs",searchBar:!0,headings:["ID #","Lab Name","Email","Phone","Joined Date","Status","Action"],cells:["id","labName","email","phone","joinedDate"],status:!0,actions:!0,actionTypes:[{action:"view",icon:ea},{action:"edit",icon:sa}],actionHandler:H,currentPage:c,setCurrentPage:L,pages:P,navigation:!0,navigationLink:"/labs/approved/profile",headingNameForNavigationOnMobile:"Lab Name",moreActionsButton:!0,moreActionsTypes:[{label:"Change Password",action:"change-password",icon:t.jsx(J,{})},{label:"Block",action:"block",icon:t.jsx(Q,{})}],moreActionsHandler:U})})]})})}export{Na as default};
