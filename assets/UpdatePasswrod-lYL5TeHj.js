import{r as t,u as y,j as s,F as o,a as i,A as C,V as w,e as S,b as E}from"./index-BGHtLGIu.js";import{c as F,a as d,f as q,F as A,b as V,E as c,y as $}from"./index.esm-C_c1U5EP.js";import{Y as H}from"./index-BBAJCH2C.js";import{L as p}from"./LayoutDiv-VwZNTzL9.js";H($);function R(){const[r,f]=t.useState(!1),[l,h]=t.useState(!1),[n,j]=t.useState(!1),x=y(),P={currentPassword:"",newPassword:"",confirmPassword:""},N=F().shape({currentPassword:d().required("Current Password is required"),newPassword:d().required("New Password is required"),confirmPassword:d().oneOf([q("newPassword"),null],"Confirm password must match new password").required("Confirm password is required")}),b=async(a,{setSubmitting:u,resetForm:g})=>{var m;u(!0);try{const{data:e}=await C.patch("/user/update-my-password",a);e!=null&&e.success&&(w.success((e==null?void 0:e.message)||((m=e==null?void 0:e.data)==null?void 0:m.message)),x(0),await S(),await new Promise(v=>setTimeout(v,1e3)),x("/login"))}catch(e){w.error(E(e))}finally{u(!1),g()}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsx("h1",{className:"main-heading",children:"Update Password"}),s.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:s.jsx(A,{initialValues:P,validationSchema:N,onSubmit:b,enableReinitialize:!0,children:a=>s.jsxs(V,{className:"flex flex-col gap-3",children:[s.jsxs(p,{children:[s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"currentPassword",className:"updatePassword-label",children:"Current Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:r?"text":"password",className:"w-full px-4 py-2",name:"currentPassword",onChange:a.handleChange,value:a.values.currentPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":r?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{f(!r)},children:r?s.jsx(o,{}):s.jsx(i,{})})})]})]}),s.jsx(c,{name:"currentPassword",component:"div",className:"text-sm text-red-500"})]}),s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"newPassword",className:"updatePassword-label",children:"New Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:l?"text":"password",className:"w-full px-4 py-2",name:"newPassword",onChange:a.handleChange,value:a.values.newPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":l?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{h(!l)},children:l?s.jsx(o,{}):s.jsx(i,{})})})]})]}),s.jsx(c,{name:"newPassword",component:"div",className:"text-sm text-red-500"})]})]}),s.jsxs(p,{children:[s.jsxs("div",{className:"w-full flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"updatePassword-label",children:"Confirm Password"}),s.jsxs("span",{className:"inline-flex border border-[#AEC8E2] w-full rounded-md",children:[s.jsx("input",{type:n?"text":"password",className:"w-full px-4 py-2",name:"confirmPassword",onChange:a.handleChange,value:a.values.confirmPassword}),s.jsx("span",{className:"inline-flex w-[40px]",children:s.jsx("button",{type:"button","aria-label":n?"Hide Pass":"Show Pass",className:"inline-flex justify-center items-center w-full cursor-pointer",onClick:()=>{j(!n)},children:n?s.jsx(o,{}):s.jsx(i,{})})})]})]}),s.jsx(c,{name:"confirmPassword",component:"div",className:"text-sm text-red-500"})]}),s.jsx("div",{className:"w-full"})]}),s.jsx("div",{className:"mt-2 max-[601px]:mt-0",children:s.jsx("button",{type:"submit",className:`${a.isSubmitting?"cursor-not-allowed":"cursor-pointer"} bg-[#624DE3] text-white font-bold px-6 py-2 rounded-[20px]`,disabled:a.isSubmitting,children:"Save"})})]})})})]})})}export{R as default};
