import{C as b,r as c,u as S,k as F,V as m,h as u,c as N,a as R,l as U,j as a,F as $,b as q,m as v,S as D,A as d}from"./index-BVnHBMax.js";import{H as E}from"./HeadingPlusBackBtn-Bubrb2Ev.js";import{S as B}from"./SingleImageUpload-CJfdeO_j.js";import{I as P}from"./Input-Dek52udp.js";import"./BackButton-BJQbwgqF.js";import"./index-Cd8EsU9E.js";import"./no-image-icon-CabPHXKl.js";function M(){const{id:l}=b(),[t,p]=c.useState({}),[o,x]=c.useState(""),f=S(),h=["fetch-pet-category",{id:l}],{data:i,error:n}=F({queryKey:h,queryFn:()=>d.get(`/pet-category/${l}`)});c.useEffect(()=>{var e,r;i&&p((r=(e=i==null?void 0:i.data)==null?void 0:e.data)==null?void 0:r.doc),n&&m.error(u(n))},[i,n]);const j={imageDataURI:null,title:(t==null?void 0:t.title)||""},y=N().shape({imageDataURI:U().nullable().test("fileSize","Image size must be less than 4MB",e=>e===null||e instanceof File&&e.size<=4*1024*1024).test("fileFormat","Accepted formats are jpg, png",e=>e===null||e instanceof File&&["image/jpeg","image/png"].includes(e.type)).required("Image is required"),title:R().required("Title is required")}),I=async(e,{setSubmitting:r})=>{var g;r(!0);try{const{data:s}=await d.patch(`/pet-category/${l}`,{...e,imageDataURI:o});s!=null&&s.success&&(m.success((s==null?void 0:s.message)||((g=s==null?void 0:s.data)==null?void 0:g.message)),f("/pet-categories"))}catch(s){m.error(u(s))}finally{r(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("div",{className:"",children:a.jsx(E,{label:"Edit Pet Category"})}),a.jsx("div",{className:"bg-white p-5 rounded-[20px]",children:a.jsx($,{initialValues:j,validationSchema:y,onSubmit:I,enableReinitialize:!0,children:e=>a.jsxs(q,{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"",children:a.jsx(B,{formik:e,base64Image:o,setBase64Image:x,name:"imageDataURI",id:"imageDataURI",backendImage:t!=null&&t.image?`${v}/${t==null?void 0:t.image}`:""})}),a.jsx("div",{className:"",children:a.jsx(P,{formik:e,name:"title",id:"title",label:"Title"})}),a.jsx("div",{className:"mt-2",children:a.jsx(D,{formik:e})})]})})})]})})}export{M as default};
