import{H as C,k as L,r as o,V as c,h as g,j as e,m as D,A as m,g as q}from"./index-B_nrAWIt.js";import{B,h as T,T as F}from"./hasRequiredRole-DQiDdSMA.js";import{N as E}from"./no-image-icon-Dam8WiVQ.js";import{I as $,a as k}from"./IsLoading-BM_5XNiD.js";import{N as R}from"./NoData-aCasLY0q.js";import{f as _}from"./index-BtUWx4lH.js";import"./Status-C74gqdre.js";/* empty css                  */import"./index-Bs2yjB6o.js";import"./index-cpbGERSi.js";function V(){var u,b,f;const{id:p}=C(),a=["fetch-in-review-lab-details",{id:p}],{isLoading:v,isError:h,data:x,error:d}=L({queryKey:a,queryFn:()=>m.get(`/lab/${p}`)}),n=(b=(u=x==null?void 0:x.data)==null?void 0:u.data)==null?void 0:b.doc;return o.useEffect(()=>{d&&c.error(g(d))},[x,d]),e.jsx(e.Fragment,{children:v?e.jsx($,{}):h?e.jsx(k,{}):!n||((f=Object.keys(n))==null?void 0:f.length)===0?e.jsx(R,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsx("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:e.jsx("p",{className:"font-[600] text-[20px]",children:"Details"})}),e.jsxs("div",{className:"flex flex-col",children:[n!=null&&n.image?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Logo"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:n!=null&&n.image?`${D}/${n==null?void 0:n.image}`:E,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:n!=null&&n.image?`${D}/${n==null?void 0:n.image}`:E,alt:"education logo",className:"inline-flex w-full h-full object-cover"})})})]}):"",e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab Name"}),e.jsx("p",{children:(n==null?void 0:n.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Phone"}),e.jsx("p",{children:n==null?void 0:n.phone})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Email"}),e.jsx("p",{children:n==null?void 0:n.email})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Country"}),e.jsx("p",{children:(n==null?void 0:n.countryName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"City"}),e.jsx("p",{children:(n==null?void 0:n.city)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"State/Province"}),e.jsx("p",{children:(n==null?void 0:n.province)||"N/A"})]})]})]})})})}function H(){var y,N;const{id:p}=C(),a=["fetch-in-review-lab-documents",{id:p}],{isLoading:v,data:h,isError:x,error:d}=L({queryKey:a,queryFn:()=>m.get(`/know-your-customer/?labObjectId=${p}`)}),[n,u]=o.useState(!1),[b,f]=o.useState(!1),t=(N=(y=h==null?void 0:h.data)==null?void 0:y.data)==null?void 0:N.docs;o.useEffect(()=>{d&&c.error(g(d))},[h,d]);const w=async s=>{var i;u(!0);try{const{data:r}=await m.patch(`/know-your-customer/approve/${s==null?void 0:s._id}`,{status:"Approved",statusChangeReason:"Verification Successful"});r!=null&&r.success&&c.success((r==null?void 0:r.message)||((i=r==null?void 0:r.data)==null?void 0:i.message))}catch(r){c.error(g(r))}finally{u(!1)}},A=async s=>{var i;f(!0);try{const{data:r}=await m.patch(`/know-your-customer/approve/${s==null?void 0:s._id}`,{status:"Declined",statusChangeReason:"Verification Failed"});r!=null&&r.success&&c.success((r==null?void 0:r.message)||((i=r==null?void 0:r.data)==null?void 0:i.message))}catch(r){c.error(g(r))}finally{f(!1)}};return e.jsx(e.Fragment,{children:v?e.jsx($,{}):x?e.jsx(k,{}):!t||(t==null?void 0:t.length)===0?e.jsx(R,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:t==null?void 0:t.map((s,i)=>e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsxs("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"Document"}),e.jsxs("div",{className:"flex max-[370px]:flex-col max-[370px]:w-full max-[370px]:items-start items-center gap-4",children:[e.jsx("div",{className:"max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center gap-1 bg-fullGreen w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>w(s),disabled:n,children:n?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(B,{}),"Please Wait"]}):"Approve"})}),e.jsx("div",{className:" max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"bg-fullRed w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>A(s),disabled:b,children:b?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(B,{}),"Please Wait"]}):"Decline"})})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Identification Type"}),e.jsx("p",{children:(s==null?void 0:s.identificationDocumentType)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Name"}),e.jsx("p",{children:(s==null?void 0:s.businessName)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Lab License"}),e.jsx("p",{children:(s==null?void 0:s.businessLicense)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Business Address"}),e.jsx("p",{children:(s==null?void 0:s.businessAddress)||"N/A"})]}),s!=null&&s.businessIdentificationDocument?e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Business Identification Document"}),e.jsx("div",{className:"w-[100px] h-[100px] rounded-[10px] bg-[#f1f5f9]",children:e.jsx("a",{href:`${D}/${s==null?void 0:s.businessIdentificationDocument}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:`${D}/${s==null?void 0:s.businessIdentificationDocument}`,alt:"education logo",className:"inline-flex w-full h-full object-cover"})})})]}):""]})]},i))})})}function K(){var y,N;const{id:p}=C(),a=["fetch-in-review-lab-services",{id:p}],{isLoading:v,isError:h,data:x,error:d}=L({queryKey:a,queryFn:()=>m.get(`/offered-lab-test?labHeadOffice=${p}`)}),[n,u]=o.useState(!1),[b,f]=o.useState(!1),t=(N=(y=x==null?void 0:x.data)==null?void 0:y.data)==null?void 0:N.docs;o.useEffect(()=>{d&&c.error(g(d))},[x,d]);const w=async s=>{var i;u(!0);try{const{data:r}=await m.patch(`/offered-lab-test/approve/${s==null?void 0:s._id}`,{status:"Approved",statusChangeReason:"Passed All Tests"});r!=null&&r.success&&c.success((r==null?void 0:r.message)||((i=r==null?void 0:r.data)==null?void 0:i.message))}catch(r){c.error(g(r))}finally{u(!1)}},A=async s=>{var i;f(!0);try{const{data:r}=await m.patch(`/offered-lab-test/approve/${s==null?void 0:s._id}`,{status:"Declined",statusChangeReason:"Failed All Tests"});r!=null&&r.success&&c.success((r==null?void 0:r.message)||((i=r==null?void 0:r.data)==null?void 0:i.message))}catch(r){c.error(g(r))}finally{f(!1)}};return e.jsx(e.Fragment,{children:v?e.jsx($,{}):h?e.jsx(k,{}):!t||(t==null?void 0:t.length)===0?e.jsx(R,{goBackButton:!1}):e.jsx("div",{className:"rounded-[20px] flex flex-col gap-5",children:t==null?void 0:t.map((s,i)=>{var r;return e.jsxs("div",{className:"bg-white rounded-[20px]",children:[e.jsxs("div",{className:"flex max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-3 items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{className:"font-[600] text-[20px]",children:"Lab Test"}),e.jsxs("div",{className:"flex max-[370px]:flex-col max-[370px]:w-full max-[370px]:items-start items-center gap-4",children:[e.jsx("div",{className:"max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center gap-1 bg-fullGreen w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>w(s),disabled:n,children:n?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(B,{}),"Please Wait"]}):"Approve"})}),e.jsx("div",{className:"max-[370px]:w-full",children:e.jsx("button",{type:"button",className:"bg-fullRed w-[140px] max-[370px]:w-full h-[40px] rounded-[8px] cursor-pointer text-white",onClick:()=>A(s),disabled:b,children:b?e.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[e.jsx(B,{}),"Please Wait"]}):"Decline"})})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4 border-b border-lightBlue",children:[e.jsx("p",{children:"Test Name"}),e.jsx("p",{children:(s==null?void 0:s.title)||((r=s==null?void 0:s.labTest)==null?void 0:r.title)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-between px-5 py-4",children:[e.jsx("p",{children:"Price"}),e.jsxs("p",{children:[e.jsx("span",{children:(s==null?void 0:s.currencyCode)==="USD"?"$":""}),e.jsx("span",{children:s!=null&&s.price?parseFloat(s==null?void 0:s.price).toFixed(2):"N/A"})]})]})]})]},i)})})})}const S=[{id:1,name:"Lab Tests",requiredRoles:["admin"]},{id:2,name:"Personal Details",requiredRoles:["admin"]},{id:3,name:"Documents",requiredRoles:["admin"]}];function Z(){var I,P;const{id:p}=C(),[a,v]=o.useState({}),[h,x]=o.useState(!1),[d,n]=o.useState(!1),u=q(),b=u==null?void 0:u.roles,f=o.useMemo(()=>b,[]),[t,w]=o.useState(1),A=["fetch-in-review-lab-profile-data",{id:p}],{data:y,error:N}=L({queryKey:A,queryFn:()=>m.get(`/lab/${p}`)});o.useEffect(()=>{if(y){const{data:{data:{doc:j}}}=y;v(j)}N&&c.error(g(N))},[y,N]),o.useEffect(()=>{const j=S.find(l=>T(l.requiredRoles,f));j?w(j.id):(c.error("User has no access to any tabs"),w(null))},[f]);const s={profileName:(a==null?void 0:a.title)||(a==null?void 0:a.fullName)||((I=a==null?void 0:a.user)==null?void 0:I.username)||e.jsxs("span",{children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})||"N/A",profileImage:(a==null?void 0:a.image)||((P=a==null?void 0:a.user)==null?void 0:P.image),phone:_(a==null?void 0:a.phone)||"N/A",email:(a==null?void 0:a.email)||"N/A",country:(a==null?void 0:a.countryName)||"N/A",state:(a==null?void 0:a.province)||"N/A",city:(a==null?void 0:a.city)||"N/A",address:(a==null?void 0:a.address)||"",status:(a==null?void 0:a.status)||""},i=async()=>{var j;x(!0);try{const{data:l}=await m.patch(`/lab/approve/${p}`,{status:"Approved",statusChangeReason:"Passed all tests."});l!=null&&l.success&&c.success((l==null?void 0:l.message)||((j=l==null?void 0:l.data)==null?void 0:j.message))}catch(l){c.error(g(l))}finally{x(!1)}},r=async()=>{var j;n(!0);try{const{data:l}=await m.patch(`/lab/approve/${p}`,{status:"Declined",statusChangeReason:"Failed all tests."});l!=null&&l.success&&c.success((l==null?void 0:l.message)||((j=l==null?void 0:l.data)==null?void 0:j.message))}catch(l){c.error(g(l))}finally{n(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col gap-3 items-center justify-between",children:[e.jsx("h1",{className:"main-heading",children:"Lab Profile"}),e.jsx("div",{children:e.jsx("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",children:e.jsx("span",{children:"Edit Lab"})})})]}),t!==null&&e.jsx(F,{activeTab:t,setActiveTab:w,roles:f,hasRequiredRole:T,tabs:S,profileData:s,button1Label:"Approve",button1Handler:i,submitting1:h,button2Label:"Decline",button2Handler:r,submitting2:d}),e.jsxs("div",{className:"",children:[t===1?e.jsx(K,{}):"",t===2?e.jsx(V,{}):"",t===3?e.jsx(H,{}):""]})]})})}export{Z as default};
