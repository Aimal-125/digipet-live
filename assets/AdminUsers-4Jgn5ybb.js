import{r as n,u as $,z,I as F,k as K,V as M,h as q,j as s,J as B,K as H,N as T,A as V}from"./index-BxhrTQri.js";import{R as J}from"./ResponsiveTable-BOmT_VBO.js";/* empty css                */import"./Status-BBB0qoK2.js";import"./index-DFUMWaLX.js";import"./NoData-D5nSU70a.js";import"./index-C9TsHVx2.js";function ee(){const[a,v]=n.useState([]),[d,E]=n.useState(1),[S,I]=n.useState(1),[l,g]=n.useState(""),h=10,f=$(),u=z(),[w,U]=n.useState(0),{docDeleted:m}=F(t=>t==null?void 0:t.deleteModal),k=["fetch-admin-users",{currentPage:d,limit:h,keyword:l,docDeleted:m}],{isLoading:P,data:i,isError:R,error:p}=K({queryKey:k,queryFn:()=>V.get(`/admin/admin-user/?page=${d}&pageSize=${h}&keyword=${l}`)});n.useEffect(()=>{if(i){const{data:{data:{docs:t}}}=i,{data:{data:{pages:e}}}=i;v(t),I(e),U(t==null?void 0:t.length)}m&&g(""),p&&M.error(q(p))},[i,p,m,l]);const _=(t,e,o)=>{if(t.stopPropagation(),o==="edit"&&f(`/admin-users/edit/${e==null?void 0:e._id}`),o==="delete"){const c="/admin/admin-user";u(B(!0)),u(H(c)),u(T(e==null?void 0:e._id))}},b=Array.from({length:w},(t,e)=>{var c,x,A,j,y,N;const o=r=>r?r.charAt(0).toUpperCase()+r.slice(1):"";return{_id:(c=a[e])==null?void 0:c._id,id:((x=a[e])==null?void 0:x.longAutoIncrementId)||((A=a[e])==null?void 0:A.autoIncrementId)||"N/A",username:((j=a[e])==null?void 0:j.username)||"N/A",email:((y=a[e])==null?void 0:y.email)||"N/A",role:(()=>{var D;const r=(D=a[e])==null?void 0:D.roles;if(Array.isArray(r)&&r.length>0){const C=r.map(L=>o(L));return s.jsx("span",{children:C.join(", ")})}return"N/A"})(),status:((N=a[e])==null?void 0:N.status)||"N/A"}});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex max-[350px]:flex-col gap-3 items-center justify-between",children:[s.jsx("h1",{className:"main-heading",children:"Admin Users"}),s.jsx("div",{children:s.jsxs("button",{className:"inline-flex items-center gap-[8px] px-[12px] py-[8px] bg-[#624DE3] rounded-[8px] font-[600] text-white cursor-pointer",onClick:()=>{f("/admin-users/add")},children:[s.jsx("span",{children:"+"}),s.jsx("span",{children:"Add New"})]})})]}),s.jsx("div",{className:"",children:s.jsx(J,{isLoading:P,isError:R,fetchedData:a,data:b,mainHeading:"Admin Users",searchBar:!0,headings:["ID #","Username","Email","Role","Status","Action"],cells:["id","username","email","role"],status:!0,actions:!0,actionTypes:[{action:"edit",icon:"./images/edit-icon.svg"},{action:"delete",icon:"./images/delete-icon.svg"}],actionHandler:_,setCurrentPage:E,pages:S,currentPage:d,setKeyword:g})})]})})}export{ee as default};
